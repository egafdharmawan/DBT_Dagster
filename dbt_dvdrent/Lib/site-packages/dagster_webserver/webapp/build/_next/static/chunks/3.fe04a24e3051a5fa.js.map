{"version":3,"file":"static/chunks/3.fe04a24e3051a5fa.js","mappings":"wQAQaA,gBAAkB,WAC7B,MACE,GAAAC,EAAAC,GAAA,EAACC,EAAAA,EAAMA,CAAAA,UACL,GAAAF,EAAAC,GAAA,EAACE,EAAAA,EAAKA,CAAAA,CAACC,KAAK,aACV,GAAAJ,EAAAC,GAAA,EAACI,2BAAAA,CAAAA,MAIT,EAEMC,eAAiB,SAACC,CAAAA,SACtBA,EAAEC,UAAU,CAACC,SAAS,CAACC,MAAM,CAAC,SAACC,CAAAA,QAAM,CAACC,CAAAA,EAAAA,EAAAA,EAAAA,EAAsBD,EAAEE,IAAI,KAE9DR,2BAA6B,WACjC,IAAMS,EAAmBC,EAAAA,UAAgB,CAACC,EAAAA,EAAgBA,EACnDC,EAAsCH,EAAtCG,QAAAA,CAAUC,EAA4BJ,EAA5BI,OAAAA,CAASC,EAAmBL,EAAnBK,eAAAA,CAE1B,GAAID,EACF,MACE,GAAAlB,EAAAC,GAAA,EAACmB,EAAAA,CAAGA,CAAAA,CAACC,KAAM,CAACC,UAAW,MAAOC,eAAgB,QAAQ,EAAGC,MAAO,CAACC,WAAY,OAAO,WAClF,GAAAzB,EAAA0B,IAAA,EAACN,EAAAA,CAAGA,CAAAA,CAACC,KAAM,CAACC,UAAW,MAAOK,WAAY,SAAUC,IAAK,EAAE,YACzD,GAAA5B,EAAAC,GAAA,EAAC4B,EAAAA,CAAOA,CAAAA,CAACC,QAAQ,YACjB,GAAA9B,EAAAC,GAAA,EAAC8B,MAAAA,CAAIP,MAAO,CAACQ,MAAOC,CAAAA,EAAAA,EAAAA,CAAAA,GAAgB,WAAG,8BAQ/C,GAAId,EAAgBe,MAAM,EAAIjB,IAAAA,EAASiB,MAAM,CAC3C,MAAO,GAAAlC,EAAAC,GAAA,EAACkC,EAAAA,EAAQA,CAAAA,CAACC,GAAG,eAGtB,IAAMC,EAAuBpB,EAASP,MAAM,CAAC,SAACH,CAAAA,SAAMD,eAAeC,GAAG2B,MAAM,CAAG,IAG/E,GAAIG,IAAAA,EAAqBH,MAAM,CAAQ,CACrC,IAAMI,EAAqBrB,EAASsB,IAAI,CAAC,SAAChC,CAAAA,SAAMA,EAAEC,UAAU,CAACgC,WAAW,CAACN,MAAM,GAC/E,GAAII,EACF,MACE,GAAAtC,EAAAC,GAAA,EAACkC,EAAAA,EAAQA,CAAAA,CACPC,GAAIK,CAAAA,EAAAA,EAAAA,EAAAA,EACFH,EAAmB9B,UAAU,CAACK,IAAI,CAClCyB,EAAmBI,kBAAkB,CAAC7B,IAAI,CAC1C,iBAAyE8B,MAAA,CAAxDL,EAAmB9B,UAAU,CAACgC,WAAW,CAAC,EAAE,CAAEI,SAAS,IAKlF,CAGA,GAAIP,IAAAA,EAAqBH,MAAM,CAAQ,CACrC,IAAMW,EAAOR,CAAoB,CAAC,EAAE,CAC9BS,EAAcxC,eAAeuC,GACnC,GAAIC,IAAAA,EAAYZ,MAAM,CAAQ,CAC5B,IAAMa,EAAMD,CAAW,CAAC,EAAE,CAC1B,MACE,GAAA9C,EAAAC,GAAA,EAACkC,EAAAA,EAAQA,CAAAA,CACPC,GAAIY,CAAAA,EAAAA,EAAAA,EAAAA,EAAsB,CACxBC,SAAUJ,EAAKrC,UAAU,CAACK,IAAI,CAC9BqC,aAAcL,EAAKH,kBAAkB,CAAC7B,IAAI,CAC1CsC,aAAcJ,EAAIlC,IAAI,CACtBuC,MAAOL,EAAIK,KAAK,IAIxB,CACF,QAGA,EAAyBlB,MAAM,CAAG,EACzB,GAAAlC,EAAAC,GAAA,EAACkC,EAAAA,EAAQA,CAAAA,CAACC,GAAG,cAGf,GAAApC,EAAAC,GAAA,EAACkC,EAAAA,EAAQA,CAAAA,CAACC,GAAG,cACtB,CAIAiB,CAAAA,EAAA,QAAetD","sources":["webpack://_N_E/../ui-core/src/app/FallthroughRoot.tsx","webpack://_N_E/<anon>"],"sourcesContent":["import {Box, Spinner, colorTextLight} from '@dagster-io/ui-components';\nimport * as React from 'react';\nimport {Redirect, Route, Switch} from 'react-router-dom';\n\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {DagsterRepoOption, WorkspaceContext} from '../workspace/WorkspaceContext';\nimport {workspacePath, workspacePipelinePath} from '../workspace/workspacePath';\n\nexport const FallthroughRoot = () => {\n  return (\n    <Switch>\n      <Route path=\"*\">\n        <FinalRedirectOrLoadingRoot />\n      </Route>\n    </Switch>\n  );\n};\n\nconst getVisibleJobs = (r: DagsterRepoOption) =>\n  r.repository.pipelines.filter((j) => !isHiddenAssetGroupJob(j.name));\n\nconst FinalRedirectOrLoadingRoot = () => {\n  const workspaceContext = React.useContext(WorkspaceContext);\n  const {allRepos, loading, locationEntries} = workspaceContext;\n\n  if (loading) {\n    return (\n      <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>\n        <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>\n          <Spinner purpose=\"section\" />\n          <div style={{color: colorTextLight()}}>Loading definitionsâ€¦</div>\n        </Box>\n      </Box>\n    );\n  }\n\n  // If we have location entries but no repos, we have no useful objects to show.\n  // Redirect to Workspace overview to surface relevant errors to the user.\n  if (locationEntries.length && allRepos.length === 0) {\n    return <Redirect to=\"/locations\" />;\n  }\n\n  const reposWithVisibleJobs = allRepos.filter((r) => getVisibleJobs(r).length > 0);\n\n  // If we have no repos with jobs, see if we have an asset group and route to it.\n  if (reposWithVisibleJobs.length === 0) {\n    const repoWithAssetGroup = allRepos.find((r) => r.repository.assetGroups.length);\n    if (repoWithAssetGroup) {\n      return (\n        <Redirect\n          to={workspacePath(\n            repoWithAssetGroup.repository.name,\n            repoWithAssetGroup.repositoryLocation.name,\n            `/asset-groups/${repoWithAssetGroup.repository.assetGroups[0]!.groupName}`,\n          )}\n        />\n      );\n    }\n  }\n\n  // If we have exactly one repo with one job, route to the job overview\n  if (reposWithVisibleJobs.length === 1) {\n    const repo = reposWithVisibleJobs[0]!;\n    const visibleJobs = getVisibleJobs(repo);\n    if (visibleJobs.length === 1) {\n      const job = visibleJobs[0]!;\n      return (\n        <Redirect\n          to={workspacePipelinePath({\n            repoName: repo.repository.name,\n            repoLocation: repo.repositoryLocation.name,\n            pipelineName: job.name,\n            isJob: job.isJob,\n          })}\n        />\n      );\n    }\n  }\n\n  // If we have more than one repo with a job, route to the instance overview\n  if (reposWithVisibleJobs.length > 0) {\n    return <Redirect to=\"/overview\" />;\n  }\n\n  return <Redirect to=\"/locations\" />;\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default FallthroughRoot;\n"],"names":["FallthroughRoot","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Switch","Route","path","FinalRedirectOrLoadingRoot","getVisibleJobs","r","repository","pipelines","filter","j","isHiddenAssetGroupJob","name","workspaceContext","React","WorkspaceContext","allRepos","loading","locationEntries","Box","flex","direction","justifyContent","style","paddingTop","jsxs","alignItems","gap","Spinner","purpose","div","color","colorTextLight","length","Redirect","to","reposWithVisibleJobs","repoWithAssetGroup","find","assetGroups","workspacePath","repositoryLocation","concat","groupName","repo","visibleJobs","job","workspacePipelinePath","repoName","repoLocation","pipelineName","isJob","__webpack_exports__"],"sourceRoot":""}