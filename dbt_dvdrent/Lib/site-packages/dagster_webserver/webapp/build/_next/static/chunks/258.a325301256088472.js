"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{67258:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return nL}});var r=t(52322),i=t(2784),s=t(7267),o=t(81862),a=t(85333),l=t(58467),c=t(82550),u=t(22970),d=t(83601),h=t(28888),f=t(17131),p=t(81308),v=t(22139),x=t(9676),m=t(54266),g=t(63832),j=t(82585),y=t(25195),b=t(75168),w=t(54949),S=t(55237),k=t(46032),O=t(68028),_=t(61935),C=t(71277),T=t(90437),A=t(85888),E=t(56024),R=t(36495),I=t(81966),N=t(40049),OverviewTabs=function(e){var n=e.refreshState,t=e.tab,i=(0,I.dx)(),s=(0,R.e)();return(0,r.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(E.mQ,{selectedTabId:t,children:[(0,r.jsx)(N.f,{id:"activity",title:"Activity",to:"/overview/activity"}),(0,r.jsx)(N.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,r.jsx)(N.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,r.jsx)(N.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===s?(0,r.jsx)(N.f,{id:"amp",title:(0,r.jsxs)(v.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:"Auto-materialize"}),i.loading?(0,r.jsx)(g.$,{purpose:"body-text"}):(0,r.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===i.paused?(0,y.L$)():(0,y.md)()}})]}),to:"/overview/automaterialize"}):null,(0,r.jsx)(N.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,r.jsx)(N.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,r.jsx)(v.x,{padding:{bottom:8},children:(0,r.jsx)(S.xi,{refreshState:n})}):null]})},P=t(89102),L=t(3490),z=t(80428),B=t(65767),F=t(22370),InstanceAutomaterializationEvaluationHistoryTable=function(e){var n,t,s=e.setSelectedTick,o=e.setTableView,a=e.setTimerange,c=e.setParentStatuses,u=(0,l._)((0,C.q)({queryKey:"statuses",decode:i.useCallback(function(e){var n=e.statuses;return new Set(n?JSON.parse(n):[_.izS.STARTED,_.izS.SUCCESS,_.izS.FAILURE,_.izS.SKIPPED])},[]),encode:i.useCallback(function(e){return{statuses:JSON.stringify(Array.from(e))}},[])}),2),d=u[0],h=u[1],f=(0,B.l)({query:P.X,variables:{statuses:i.useMemo(function(){return Array.from(d)},[d])},nextCursorForResult:function(e){var n,t=e.autoMaterializeTicks;if(t.length)return null===(n=t[14])||void 0===n?void 0:n.id},getResultArray:function(e){return(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[]},pageSize:15}),p=f.queryResult,v=f.paginationProps;return(0,S.C4)(p,1e4,!v.hasPrevCursor),i.useEffect(function(){if(v.hasPrevCursor){var e=null===(n=p.data)||void 0===n?void 0:n.autoMaterializeTicks;if(e&&e.length){var n,t,r,i=null===(t=e[e.length-1])||void 0===t?void 0:t.timestamp,s=null===(r=e[0])||void 0===r?void 0:r.endTimestamp;i&&s&&a([i,s])}}else a(void 0)},[v.hasPrevCursor,null===(n=p.data)||void 0===n?void 0:n.autoMaterializeTicks,a]),i.useEffect(function(){v.hasPrevCursor?c(Array.from(d)):c(void 0)},[v.hasPrevCursor,c,d]),(0,r.jsx)(F.V,{loading:p.loading,ticks:(null===(t=p.data)||void 0===t?void 0:t.autoMaterializeTicks)||[],paginationProps:v,setSelectedTick:s,setStatuses:h,setTableView:o,statuses:d})},AutomaterializationRoot=function(){var e=(0,R.e)();switch(e){case"unknown":return(0,r.jsx)("div",{});case"has-global-amp":return(0,r.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,r.jsx)(s.l_,{to:"/overview/sensors"});default:(0,k.UT)(e)}},GlobalAutomaterializationRoot=function(){var e,n,fetchData=function(){N({variables:q})};(0,O.Px)();var t=(0,I.dx)(),s=(0,b.p)(),k=(0,w.WB)().permissions,E=(void 0===k?{}:k).canToggleAutoMaterialize,R=(0,l._)((0,d.t)(P.X),2),N=R[0],B=R[1],F=(0,l._)(i.useState(!1),2),U=F[0],M=F[1],D=(0,l._)(i.useState(void 0),2),K=D[0],$=D[1],V=(0,l._)(i.useState(void 0),2),J=V[0],W=V[1],q=i.useMemo(function(){return J||K?{afterTimestamp:null==J?void 0:J[0],beforeTimestamp:null==J?void 0:J[1],statuses:K}:{afterTimestamp:(Date.now()-12e5)/1e3}},[K,J]);(0,i.useLayoutEffect)(fetchData,[q]),(0,S.C4)(B,2e3,!U&&!J&&!K,fetchData);for(var H=(0,l._)(i.useState(null),2),G=H[0],Q=H[1],X=(0,l._)((0,C.q)(i.useMemo(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),Z=X[0],Y=X[1],ee=null!==(n=B.data)&&void 0!==n?n:B.previousData,en=ee?ee.autoMaterializeTicks.map(function(e){return"".concat(e.id,":").concat(e.status)}):[];en.length<100;)en.push("");var et=i.useMemo(function(){var e,n=null==ee?void 0:ee.autoMaterializeTicks;return null!==(e=null==n?void 0:n.map(function(e,t){var r=n[t-1];if(r&&(0,A.g)(e,t)){var i=(0,a._)({},e);return i.endTimestamp=r.timestamp,i.status=_.izS.FAILURE,i}return e}))&&void 0!==e?e:[]},(0,c._)(en.slice(0,100))),er=i.useCallback(function(e){M(!!e)},[M]);return(0,r.jsxs)(h.T,{children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(p.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"amp"})}),(0,r.jsx)(v.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,r.jsx)(x.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,r.jsxs)(r.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling – instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,r.jsx)(m.i,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Running"}),(0,r.jsx)("td",{children:t.loading?(0,r.jsx)(g.$,{purpose:"body-text"}):(0,r.jsx)(j.X,{format:"switch",checked:!t.paused,disabled:!E,onChange:(e=(0,o._)(function(e){var n;return(0,u.Jh)(this,function(r){switch(r.label){case 0:if(n=e.target.checked)return[3,2];return[4,s({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."})];case 1:r.sent(),r.label=2;case 2:return t.setPaused(!n),[2]}})}),function(n){return e.apply(this,arguments)})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Evaluation frequency"}),(0,r.jsx)("td",{children:"~30s"})]})]})}),(0,r.jsx)(v.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,r.jsx)(p.Tj,{children:"Evaluation timeline"})}),ee?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.p,{ticks:et,onHoverTick:er,onSelectTick:Q,exactRange:J,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,r.jsx)(L.d,{tick:G,isOpen:!!G,close:function(){Q(null)}}),"evaluations"===Z?(0,r.jsx)(InstanceAutomaterializationEvaluationHistoryTable,{setSelectedTick:Q,setTableView:Y,setParentStatuses:$,setTimerange:W}):(0,r.jsx)(z.o,{setTableView:Y})]}):(0,r.jsxs)(v.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,r.jsx)(g.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:(0,y.$)()},children:"Loading evaluations…"})]})]})},U=t(73235),M=t(40794),D=t(60138),K=t(92364),$=t(83302),V=t(91195),J=t(56266),W=t(28252),q=t(62311),H=t(77376),G=t(16292),Q=t(31761),X=t(94611);function _templateObject(){var e=(0,U._)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,U._)(["\n  query InstanceBackfillsQuery($status: BulkActionStatus, $cursor: String, $limit: Int) {\n    partitionBackfillsOrError(status: $status, cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var labelForBackfillStatus=function(e){switch(e){case _.Jv3.CANCELED:return"Canceled";case _.Jv3.CANCELING:return"Canceling";case _.Jv3.COMPLETED:return"Completed";case _.Jv3.FAILED:return"Failed";case _.Jv3.REQUESTED:return"In progress"}},Z=Object.keys(_.Jv3).map(function(e){var n=labelForBackfillStatus(e);return{label:n,value:e,match:[e,n]}}),InstanceBackfills=function(){(0,O.Px)(),(0,W.j)("Overview | Backfills");var e=(0,M.a)(Y),n=(0,G.im)({name:"Status",icon:"status",allValues:Z,allowMultipleSelections:!1,closeOnSelect:!0,renderLabel:function(e){var n=e.value;return(0,r.jsx)("div",{children:labelForBackfillStatus(n)})},getStringValue:function(e){return labelForBackfillStatus(e)}}),t=n.state,i=(0,H.m)({filters:[n]}),s=i.button,o=i.activeFiltersJsx,l=(0,B.l)({query:ee,variables:{status:t.size>0?Array.from(t)[0]:void 0},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.id:void 0},getResultArray:function(e){return(null==e?void 0:e.partitionBackfillsOrError.__typename)==="PartitionBackfills"?e.partitionBackfillsOrError.results:[]}}),c=l.queryResult,u=l.paginationProps,d=(0,S.C4)(c,S.dT),x=c.loading,m=c.data;return(0,r.jsxs)(h.T,{children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(p.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"backfills",refreshState:d})}),(0,r.jsx)(v.x,{padding:{vertical:12,horizontal:20},children:(0,r.jsxs)(v.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)("div",{children:s}),o]})}),function(){if(x&&!m)return(0,r.jsx)(v.x,{padding:{vertical:64},flex:{direction:"column",alignItems:"center"},children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(g.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:(0,y.$)()},children:"Loading backfills…"})]})});var n,i=null==m?void 0:m.partitionBackfillsOrError;if((null==i?void 0:i.__typename)==="PythonError")return(0,r.jsx)(J.T9,{error:i});if(!i||!(null==i?void 0:i.results.length))return t.size>0?(0,r.jsx)(v.x,{padding:{vertical:64},children:(0,r.jsx)(K.t,{icon:"no-results",title:"No matching backfills",description:"No backfills were found for this filter."})}):(0,r.jsx)(v.x,{padding:{vertical:64},children:(0,r.jsx)(K.t,{icon:"no-results",title:"No backfills found",description:"This instance does not have any backfill jobs."})});var s=((null===(n=e.data)||void 0===n?void 0:n.instance.daemonHealth.allDaemonStatuses)||[]).filter(function(e){return"BACKFILL"===e.daemonType}).map(function(e){return e.required&&e.healthy}),o=s.length&&s.every(function(e){return e});return(0,r.jsxs)("div",{children:[o?null:(0,r.jsx)(v.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(q.B1,{})}),(0,r.jsx)(X.G,{backfills:i.results.slice(0,10),refetch:c.refetch}),i.results.length>0?(0,r.jsx)(v.x,{margin:{top:16},children:(0,r.jsx)($.b$,(0,a._)({},u))}):null]})}()]})},Y=(0,D.Ps)(_templateObject(),Q.O),ee=(0,D.Ps)(_templateObject1(),V.B,X.b),en=t(56675),et=t(12084),er=t(57830),ei=t(28879),es=t.n(ei),eo=t(64989),ea=t.n(eo),el=t(77491),ec=t.n(el),eu=t(47933),ed=t(35505),eh=t(58701),ef=t(35157),ep=t(60130),ev=t(74711),ex=t(49313),em=t(68052),eg=t(1813),ej=t(68651),ey=t(67690);function BackfillPage_templateObject(){var e=(0,U._)(["\n  color: ",";\n  font-size: 12px;\n  line-height: 16px;\n"]);return BackfillPage_templateObject=function(){return e},e}function BackfillPage_templateObject1(){var e=(0,U._)(["\n  query BackfillStatusesByAsset($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ...PartitionBackfillFragment\n      ...PythonErrorFragment\n      ... on BackfillNotFoundError {\n        message\n      }\n    }\n  }\n\n  fragment PartitionBackfillFragment on PartitionBackfill {\n    id\n    status\n    timestamp\n    endTimestamp\n    numPartitions\n    ...BackfillActionsBackfillFragment\n\n    error {\n      ...PythonErrorFragment\n    }\n    assetBackfillData {\n      rootTargetedPartitions {\n        partitionKeys\n        ranges {\n          start\n          end\n        }\n      }\n      assetBackfillStatuses {\n        ... on AssetPartitionsStatusCounts {\n          assetKey {\n            path\n          }\n          numPartitionsTargeted\n          numPartitionsInProgress\n          numPartitionsMaterialized\n          numPartitionsFailed\n        }\n        ... on UnpartitionedAssetStatus {\n          assetKey {\n            path\n          }\n          inProgress\n          materialized\n          failed\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return BackfillPage_templateObject1=function(){return e},e}function _templateObject2(){var e=(0,U._)(["\n  query BackfillPartitionsForAssetKey($backfillId: String!, $assetKey: AssetKeyInput!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionsTargetedForAssetKey(assetKey: $assetKey) {\n          partitionKeys\n          ranges {\n            start\n            end\n          }\n        }\n      }\n    }\n  }\n"]);return _templateObject2=function(){return e},e}es().extend(ea()),es().extend(ec());var BackfillPage=function(){var e=(0,en.x)(),n=(0,s.k6)(),t=(0,s.UO)().backfillId;(0,O.Px)(),(0,W.j)("Backfill | ".concat(t));var i=(0,M.a)(ew,{variables:{backfillId:t}}),a=i.data,l=(null==a?void 0:a.partitionBackfillOrError.__typename)==="PartitionBackfill"?a.partitionBackfillOrError:null,c=!l||[_.Jv3.REQUESTED,_.Jv3.CANCELING].includes(l.status),d=(0,S.C4)(i,1e4,c);return(0,r.jsxs)(h.T,{children:[(0,r.jsx)(f.m,{title:(0,r.jsxs)(p.X6,{children:[(0,r.jsx)(eu.rU,{to:"/overview/backfills",style:{color:(0,y.$)()},children:"Backfills"})," / ",t]}),right:(0,r.jsxs)(v.x,{flex:{gap:12,alignItems:"center"},children:[c?(0,r.jsx)(S.xi,{refreshState:d}):null,l?(0,r.jsx)(eg.WH,{backfill:l,refetch:i.refetch,canCancelRuns:l.status===_.Jv3.REQUESTED}):null]})}),function(){if(!a||!a.partitionBackfillOrError)return(0,r.jsx)(v.x,{padding:64,"data-testid":(0,em.N)("page-loading-indicator"),children:(0,r.jsx)(g.$,{purpose:"page"})});if("PythonError"===a.partitionBackfillOrError.__typename)return(0,r.jsx)(J.T9,{error:a.partitionBackfillOrError});if("BackfillNotFoundError"===a.partitionBackfillOrError.__typename)return(0,r.jsx)(K.t,{icon:"no-results",title:a.partitionBackfillOrError.message});var i,s,l,c=a.partitionBackfillOrError;function getRunsUrl(e){var n=[{token:"tag",value:"dagster/backfill=".concat(t)}];switch(e){case"inProgress":n.push({token:"status",value:_.VOA.STARTED},{token:"status",value:_.VOA.QUEUED},{token:"status",value:_.VOA.STARTING},{token:"status",value:_.VOA.CANCELING},{token:"status",value:_.VOA.NOT_STARTED});break;case"complete":n.push({token:"status",value:_.VOA.SUCCESS});break;case"failed":n.push({token:"status",value:_.VOA.FAILURE}),n.push({token:"status",value:_.VOA.CANCELED})}return(0,ex.it)(n)}var d=(i=(0,o._)(function(r,i){var s,o,a,l;return(0,u.Jh)(this,function(c){switch(c.label){case 0:if(s={},!i)return[3,2];return[4,e.query({query:eS,variables:{backfillId:t,assetKey:(0,ep.W1)(r)}})];case 1:(l="PartitionBackfill"===(a=c.sent()).data.partitionBackfillOrError.__typename?a.data.partitionBackfillOrError.partitionsTargetedForAssetKey:null)&&(null===(o=l.ranges)||void 0===o?void 0:o.length)&&(s={default_range:l.ranges.map(function(e){return"[".concat(e.start,"...").concat(e.end,"]")}).join(",")}),c.label=2;case 2:return[2,n.push((0,ev.p)(r,s))]}})}),function(e,n){return i.apply(this,arguments)});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.x,{padding:24,flex:{direction:"row",justifyContent:"space-between",wrap:"nowrap",alignItems:"center"},"data-testid":(0,em.N)("backfill-page-details"),children:[(0,r.jsx)(Detail,{label:"Created",detail:(0,r.jsx)(eh.E,{timestamp:{ms:Number(1e3*c.timestamp)},timeFormat:{showSeconds:!0,showTimezone:!1}})}),(0,r.jsx)(Detail,{label:"Duration",detail:(0,r.jsx)(Duration,{start:1e3*c.timestamp,end:c.endTimestamp?1e3*c.endTimestamp:null})}),(0,r.jsx)(Detail,{label:"Partition selection",detail:(0,r.jsx)(ey.b,{targetPartitionCount:c.numPartitions||0,targetPartitions:null===(s=c.assetBackfillData)||void 0===s?void 0:s.rootTargetedPartitions})}),(0,r.jsx)(Detail,{label:"Status",detail:(0,r.jsx)(ej.w,{backfill:c})})]}),(0,r.jsxs)(m.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"50%"},children:"Asset name"}),(0,r.jsx)("th",{children:(0,r.jsx)(eu.rU,{to:getRunsUrl("targeted"),children:"Partitions targeted"})}),(0,r.jsx)("th",{children:(0,r.jsx)(eu.rU,{to:getRunsUrl("inProgress"),children:"In progress"})}),(0,r.jsx)("th",{children:(0,r.jsx)(eu.rU,{to:getRunsUrl("complete"),children:"Completed"})}),(0,r.jsx)("th",{children:(0,r.jsx)(eu.rU,{to:getRunsUrl("failed"),children:"Failed"})})]})}),(0,r.jsx)("tbody",{children:null===(l=c.assetBackfillData)||void 0===l?void 0:l.assetBackfillStatuses.map(function(e){var n,t,i,s;return"AssetPartitionsStatusCounts"===e.__typename?(n=e.numPartitionsTargeted,t=e.numPartitionsInProgress,i=e.numPartitionsMaterialized,s=e.numPartitionsFailed):(n=1,s=e.failed?1:0,t=e.inProgress?1:0,i=e.materialized?1:0),(0,r.jsxs)("tr",{"data-testid":(0,em.N)("backfill-asset-row-".concat((0,ef.Je)(e.assetKey))),children:[(0,r.jsx)("td",{children:(0,r.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(et.Z,{onClick:function(){return d(e.assetKey,"AssetPartitionsStatusCounts"===e.__typename)},children:e.assetKey.path.join("/")})}),(0,r.jsx)("div",{children:(0,r.jsx)(StatusBar,{targeted:n,inProgress:t,completed:i,failed:s})})]})}),"AssetPartitionsStatusCounts"===e.__typename?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:i}),(0,r.jsx)("td",{children:s})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:"-"}),(0,r.jsx)("td",{children:t?(0,r.jsx)(er.V,{icon:"spinner",intent:"primary",children:"In progress"}):"-"}),(0,r.jsx)("td",{children:i?(0,r.jsx)(er.V,{intent:"success",children:"Completed"}):"-"}),(0,r.jsx)("td",{children:s?(0,r.jsx)(er.V,{intent:"danger",children:"Failed"}):"-"})]})]},(0,ef.Je)(e.assetKey))})})]})]})}()]})},Detail=function(e){var n=e.label,t=e.detail;return(0,r.jsxs)(v.x,{flex:{direction:"column",gap:4},style:{minWidth:"280px"},children:[(0,r.jsx)(eb,{children:n}),(0,r.jsx)("div",{children:t})]})};function StatusBar(e){var n=e.targeted,t=e.inProgress,i=e.completed,s=e.failed;return(0,r.jsxs)("div",{style:{borderRadius:"8px",backgroundColor:(0,y.gJ)(),display:"grid",gridTemplateColumns:"".concat(100*i/n,"% ").concat(100*s/n,"% ").concat(100*t/n,"%"),gridTemplateRows:"100%",height:"12px",width:"200px",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{background:(0,y.fA)()}}),(0,r.jsx)("div",{style:{background:(0,y.FY)()}}),(0,r.jsx)("div",{style:{background:(0,y.L$)()}})]})}var eb=ed.ZP.div.withConfig({componentId:"sc-cb5d3e36-0"})(BackfillPage_templateObject(),(0,y.$)()),Duration=function(e){var n=e.start,t=e.end,s=(0,l._)(i.useReducer(function(e,n){return e+1},0),2),o=(s[0],s[1]);i.useEffect(function(){if(!t){var e=setInterval(o,6e4);return function(){return clearInterval(e)}}},[n,t]);var a=t?t-n:Date.now()-n;return(0,r.jsx)("span",{children:formatDuration(a)})},ew=(0,D.Ps)(BackfillPage_templateObject1(),V.B,eg.V2),eS=(0,D.Ps)(_templateObject2()),formatDuration=function(e){var n=Math.floor(e/6e4%60),t=Math.floor(e/36e5%24),r=Math.floor(e/864e5),i="";return r>0?i+="".concat(r,"d ")+"".concat(t,"h"):t>0?i+="".concat(t,"h ")+"".concat(n,"m"):n>0&&(i+="".concat(n,"m ")+"".concat(Math.floor(e/1e3%60),"s")),i.trim()},ek=t(9001),eO=t(15282),e_=t(46928),eC=t(6692),eT=t(34822),eA=t(21106),eE=t(34e3),eR=t(17276),eI=t(44678),eN=t(88510),eP=t(69643),eL=t(99322),ez=t(58885),eB=t(65885),eF=t(63386),eU=t(55658),eM=t(37160),eD=t(38153);function OverviewAssetsRoot_templateObject(){var e=(0,U._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return OverviewAssetsRoot_templateObject=function(){return e},e}function OverviewAssetsRoot_templateObject1(){var e=(0,U._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return OverviewAssetsRoot_templateObject1=function(){return e},e}function OverviewAssetsRoot_templateObject2(){var e=(0,U._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return OverviewAssetsRoot_templateObject2=function(){return e},e}function _templateObject3(){var e=(0,U._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n,t,s,o=e.Header,a=e.TabButton;(0,O.Px)(),(0,W.j)("Overview | Assets");var c=(0,M.a)(eB.C1,{notifyOnNetworkStatusChange:!0}),u=(0,S.C4)(c,S.dT),d=i.useMemo(function(){var e,n,t;return(null===(e=c.data)||void 0===e?void 0:e.assetsOrError.__typename)==="AssetConnection"?(n=c.data.assetsOrError.nodes,t={},n.forEach(function(e){if(e.definition){var n=e.definition.groupName,r=e.definition.repository.name,i="".concat(n,"||").concat(r),s=t[i]||{groupName:n,repositoryName:r,assets:[]};s.assets.push(e),t[i]=s}}),Object.values(t)):[]},[null===(s=c.data)||void 0===s?void 0:s.assetsOrError]),h=(0,l._)((0,C.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),f=h[0],p=h[1],x=i.useMemo(function(){return""===f?d:d.filter(function(e){return(e.groupName||e$).toLowerCase().includes(f.toLowerCase())||e.repositoryName.toLowerCase().includes(f.toLowerCase())})},[d,f]),m=i.useRef(null),j=(0,eN.MG)({count:x.length,getScrollElement:function(){return m.current},estimateSize:function(){return 82},overscan:5}),y=j.getTotalSize(),b=j.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(o,{refreshState:u}),(0,r.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(a,{selected:"assets"}),(0,r.jsx)(eT.oi,{value:f,onChange:function(e){p(e.target.value)},placeholder:"Filter asset groups…"})]})]}),(t=null===(n=c.data)||void 0===n?void 0:n.assetsOrError,!c.data&&c.loading?(0,r.jsx)(v.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(g.$,{purpose:"page"})}):(null==t?void 0:t.__typename)==="PythonError"?(0,r.jsx)(v.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(J.T9,{error:t})}):(0,r.jsx)(v.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)(eU.W2,{ref:m,children:[(0,r.jsx)(VirtualHeaderRow,{}),(0,r.jsx)(eU.Nh,{$totalHeight:y,children:b.map(function(e){var n=e.index,t=e.key,i=e.size,s=e.start,o=x[n];return(0,r.jsx)(VirtualRow,{start:s,height:i,group:o},t)})})]})}))]})},eK="5fr 1fr 1fr 1fr 1fr";function VirtualHeaderRow(){return(0,r.jsxs)(v.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:eK,height:"32px",fontSize:"12px",color:(0,y.$)(),position:"sticky",top:0,zIndex:1,background:(0,y.v8)()},children:[(0,r.jsx)(eU.qN,{children:"Group name"}),(0,r.jsx)(eU.qN,{children:"Missing"}),(0,r.jsx)(eU.qN,{children:"Failed/Overdue"}),(0,r.jsx)(eU.qN,{children:"In progress"}),(0,r.jsx)(eU.qN,{children:"Materialized"})]})}var e$="Ungrouped Assets";function VirtualRow(e){var n,t,s=e.height,o=e.start,l=e.group,c=i.useMemo(function(){return l.assets.map(function(e){return{path:e.key.path}})},[l.assets]),u=(0,eP.YP)(c).liveDataByNode,d=i.useMemo(function(){var e={successful:[],failed:[],inprogress:[],missing:[],loading:!1};return Object.keys(u).length?Object.keys(u).forEach(function(n){var t=u[n],r=l.assets.find(function(e){return(0,ef.Je)(e.key)===n});if(!(null==r?void 0:r.definition)){console.warn("Expected a definition for asset with key",n);return}var i=(0,eL.D5)({assetKey:r.key,definition:r.definition,liveData:t,expanded:!0});switch(i.case){case eL.KB.LOADING:e.loading=!0;break;case eL.KB.SOURCE_OBSERVING:e.inprogress.push({asset:r,status:i});break;case eL.KB.SOURCE_OBSERVED:e.successful.push({asset:r,status:i});break;case eL.KB.SOURCE_NEVER_OBSERVED:case eL.KB.SOURCE_NO_STATE:e.missing.push({asset:r,status:i});break;case eL.KB.MATERIALIZING:e.inprogress.push({asset:r,status:i});break;case eL.KB.LATE_OR_FAILED:e.failed.push({asset:r,status:i});break;case eL.KB.NEVER_MATERIALIZED:e.missing.push({asset:r,status:i});break;case eL.KB.MATERIALIZED:e.successful.push({asset:r,status:i});break;case eL.KB.PARTITIONS_FAILED:e.failed.push({asset:r,status:i});break;case eL.KB.PARTITIONS_MISSING:e.missing.push({asset:r,status:i});break;case eL.KB.PARTITIONS_MATERIALIZED:e.successful.push({asset:r,status:i})}}):e.loading=!0,e},[u,l.assets]),h=null===(t=l.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,f=(0,eM.kQ)((null==h?void 0:h.name)||"",(null==h?void 0:h.location.name)||""),p=(0,eA.S)(),x=p.containerProps,m=p.viewport,j=c.length!==Object.keys(u).length,b=j?"":"0";return(0,r.jsx)(eU.X2,{$height:s,$start:o,children:(0,r.jsxs)(eV,{border:"bottom",children:[(0,r.jsx)(Cell,{children:(0,r.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(v.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(v.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(eE.JO,{name:"asset_group"}),l.groupName?(0,r.jsx)(eu.rU,{style:{fontWeight:700},to:(0,eD.$U)(f,"/asset-groups/".concat(l.groupName)),children:l.groupName}):e$]}),(0,r.jsx)("div",(0,eC._)((0,a._)({},x),{children:(0,r.jsx)(eJ,{maxWidth:m.width,children:(0,r.jsx)(eF.b,{repoAddress:f,showRefresh:!1})})}))]}),(0,r.jsx)(v.x,{flex:{direction:"column",justifyContent:"center"},children:j?(0,r.jsx)(g.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(Cell,{children:d.missing.length?(0,r.jsx)(SelectOnHover,{assets:d.missing,getCount:function(e){var n=e.status;return n.case===eL.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,r.jsx)(er.V,{intent:"none",children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat((0,y.im)()),borderRadius:"50%"}}),d.missing.length]})})}):b}),(0,r.jsx)(Cell,{children:d.failed.length?(0,r.jsx)(SelectOnHover,{assets:d.failed,getCount:function(e){var n=e.status;return n.case===eL.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,r.jsx)(er.V,{intent:"danger",children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),d.failed.length]})})}):b}),(0,r.jsx)(Cell,{children:d.inprogress.length?(0,r.jsx)(SelectOnHover,{assets:d.inprogress,getCount:function(e){var n=e.status;return n.case===eL.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(er.V,{intent:"primary",icon:"spinner",children:d.inprogress.length})}):b}),(0,r.jsx)(Cell,{children:d.successful.length?(0,r.jsx)(SelectOnHover,{assets:d.successful,getCount:function(e){var n=e.status;return n.case===eL.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(er.V,{intent:"success",children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:(0,y.fA)(),width:"10px",height:"10px",borderRadius:"50%"}}),d.successful.length]})})}):b})]})})}var eV=(0,ed.ZP)(v.x).withConfig({componentId:"sc-9f300bf-0"})(OverviewAssetsRoot_templateObject(),eK),Cell=function(e){var n=e.children;return(0,r.jsx)(eU.E5,{style:{color:(0,y.Ep)()},children:(0,r.jsx)(v.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},eJ=ed.ZP.div.withConfig({componentId:"sc-9f300bf-1"})(OverviewAssetsRoot_templateObject1(),(0,y.$)(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,t=e.children,i=e.getCount,s=e.adjective;return(0,r.jsx)(eW,{children:(0,r.jsx)(eR.P,{items:n,itemPredicate:function(e,n){return(0,ef.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=i(e);return(0,r.jsx)(eq,{to:(0,ev.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(eI.sN,{text:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(eE.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,ef.ll)(e.asset.key)}),n&&n>0?(0,r.jsxs)(p.YS,{style:{color:(0,y.$)()},children:[(0,ez._e)(n)," ",s]}):null]})},(0,ef.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var eW=ed.ZP.div.withConfig({componentId:"sc-9f300bf-2"})(OverviewAssetsRoot_templateObject2()),eq=(0,ed.ZP)(eu.rU).withConfig({componentId:"sc-9f300bf-3"})(_templateObject3()),eH=t(99596),eG=t(64595),eQ=t(10952),eX=t(75690),eZ=t(51969),RepoFilterButton=function(){var e=i.useContext(eZ.C5),n=e.allRepos,t=e.visibleRepos,s=e.toggleVisible,o=(0,l._)(i.useState(!1),2),a=o[0],c=o[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eQ.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:a,style:{width:"auto"},onClose:function(){return c(!1)},children:[(0,r.jsx)(eQ.fK,{icon:"repo",label:"Filter code locations"}),(0,r.jsx)(eX.e,{options:n,onBrowse:function(){return c(!1)},onToggle:s,selected:t}),(0,r.jsx)(eQ.cN,{children:(0,r.jsx)(v.x,{padding:{top:8},children:(0,r.jsx)(ek.zx,{intent:"none",onClick:function(){return c(!1)},children:"Done"})})})]}),(0,r.jsx)(ek.zx,{outlined:!0,icon:(0,r.jsx)(eE.JO,{name:"folder"}),rightIcon:(0,r.jsx)(eE.JO,{name:"expand_more"}),onClick:function(){return c(!0)},children:"".concat(t.length," of ").concat(n.length)})]})},eY=t(83568),e0=t(65435),useHourWindow=function(e){var n=i.useCallback(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,l._)((0,eO.U)("dagster.run-timeline-hour-window",n),2),r=t[0],s=t[1],o=i.useCallback(function(n){s(n||e)},[e,s]);return i.useMemo(function(){return[r,o]},[r,o])},e1=t(87612);function NextTick_templateObject(){var e=(0,U._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var e2=(0,D.Ps)(NextTick_templateObject()),e6=t(44254),e3=t(6315),e4=t(38917),e8=t(16413);function useRunsForTimeline_templateObject(){var e=(0,U._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,l._)(e,2),r=t[0],s=t[1],o=r/1e3,u=s/1e3,d=(0,M.a)(e5,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,eC._)((0,a._)({},n),{statuses:[_.VOA.CANCELING,_.VOA.STARTED],createdBefore:u}),terminatedFilter:(0,eC._)((0,a._)({},n),{statuses:Array.from(e3.cv),createdBefore:u,updatedAfter:o}),tickCursor:o,ticksUntil:u}}),h=d.data,f=d.previousData,p=d.loading&&!h,v=h||f||{},x=v.unterminated,m=v.terminated,g=v.workspaceOrError,j=i.useMemo(function(){var e={},n=Date.now();return(0,c._)((null==x?void 0:x.__typename)==="Runs"?x.results:[]).concat((0,c._)((null==m?void 0:m.__typename)==="Runs"?m.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,e8.a)({start:r,end:s},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var i=makeJobKey({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[i]=(0,c._)(e[i]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[s,x,m,r]),y=i.useMemo(function(){if(!g||"Workspace"!==g.__typename)return[];var e=[],n=!0,t=!1,i=void 0;try{for(var o,l=g.locationEntries[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)!function(){var n=o.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(u=n.locationOrLoadError)||void 0===u?void 0:u.__typename)==="RepositoryLocation"){var t=Date.now(),i=!0,a=!1,l=void 0;try{for(var u,d,h=n.locationOrLoadError.repositories[Symbol.iterator]();!(i=(d=h.next()).done);i=!0)!function(){var i=d.value,o=(0,eM.kQ)(i.name,n.locationOrLoadError.name),a=!0,l=!1,u=void 0;try{for(var h,f=i.pipelines[Symbol.iterator]();!(a=(h=f.next()).done);a=!0)!function(){var n=h.value,a=(i.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],u=!0,d=!1,f=void 0;try{for(var p,v=a[Symbol.iterator]();!(u=(p=v.next()).done);u=!0)!function(){var e=p.value;e.scheduleState.status===_.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var i=n.timestamp,o=1e3*i;o>t&&(0,e8.a)({start:r,end:s},{start:o,end:o})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(i),status:"SCHEDULED",startTime:o,endTime:o+5e3})})}()}catch(e){d=!0,f=e}finally{try{u||null==v.return||v.return()}finally{if(d)throw f}}var x=(0,ef.pv)(n.name),m=makeJobKey(o,n.name),g=x?"Ad hoc materializations":n.name,y=j[m]||[];if(l.length||y.length){var b=(0,c._)(y).concat((0,c._)(l));if(x){var w,S=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===o});if(S)return(w=S.runs).push.apply(w,(0,c._)(b))}e.push({key:m,jobName:g,jobType:x?"asset":"job",repoAddress:o,path:(0,eD.jT)({repoName:o.name,repoLocation:o.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,c._)(y).concat((0,c._)(l))})}}()}catch(e){l=!0,u=e}finally{try{a||null==f.return||f.return()}finally{if(l)throw u}}}()}catch(e){a=!0,l=e}finally{try{i||null==h.return||h.return()}finally{if(a)throw l}}}}()}catch(e){t=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}var u=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,eC._)((0,a._)({},e),(0,e1._)({},n.key,(t=Math).min.apply(t,(0,c._)(r))))},{});return e.sort(function(e,n){return u[e.key]-u[n.key]})},[g,j,r,s]);return i.useMemo(function(){return{jobs:y,initialLoading:p,queryData:d}},[p,y,d])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,e6.Uz)(e))},e5=(0,D.Ps)(useRunsForTimeline_templateObject(),e4.$X,e2),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,t=e.TabButton;(0,O.Px)(),(0,W.j)("Overview | Timeline");var s=(0,eY.t)("OverviewTimelineRoot"),o=i.useContext(eZ.C5),a=o.allRepos,c=o.visibleRepos,u=(0,l._)(useHourWindow("12"),2),d=u[0],h=u[1],f=(0,l._)(i.useState(function(){return Date.now()}),2),p=f[0],x=f[1],m=(0,l._)(i.useState(function(){return 0}),2),g=m[0],j=m[1],y=(0,l._)((0,C.q)({queryKey:"search",defaults:{search:""}}),2),b=y[0],w=y[1];i.useEffect(function(){x(Date.now());var e=setInterval(function(){x(Date.now())},6e4);return function(){clearInterval(e)}},[d]);var k=i.useCallback(function(){j(function(e){return e-hourWindowToOffset(d)})},[d]),_=i.useCallback(function(){j(function(e){return e+hourWindowToOffset(d)})},[d]),T=i.useCallback(function(){j(0)},[]),A=i.useMemo(function(){return[p-36e5*Number(d)+g,p+36e5+g]},[d,p,g]),E=useRunsForTimeline(A),R=E.jobs,I=E.initialLoading,N=E.queryData,P=(0,S.C4)(N,S.dT);i.useEffect(function(){I||s.endTrace()},[I,s]);var L=i.useMemo(function(){var e=b.toLocaleLowerCase().trim(),n=c.flatMap(function(n){var t=(0,eM.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(t,e.name)})});return new Set(n)},[c,b]),z=i.useMemo(function(){return R.filter(function(e){var n=e.key;return L.has(n)})},[R,L]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{refreshState:P}),(0,r.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"timeline"}),a.length>1&&(0,r.jsx)(RepoFilterButton,{}),(0,r.jsx)(eT.oi,{icon:"search",value:b,onChange:function(e){return w(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,r.jsxs)(v.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,r.jsx)(eH.h,{activeItems:new Set([d]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return h(e)}}),(0,r.jsxs)(v.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(ek.zx,{onClick:k,children:"←"}),(0,r.jsx)(ek.zx,{onClick:T,children:"Now"}),(0,r.jsx)(ek.zx,{onClick:_,children:"→"})]})]})]}),(0,r.jsx)(eG.S,{region:"timeline",children:(0,r.jsx)(e0.q,{loading:I,range:A,jobs:z})})]})},OverviewActivityRoot=function(){(0,O.Px)(),(0,W.j)("Overview | Activity");var e=i.useCallback(function(e){var n=e.refreshState;return(0,r.jsx)(f.m,{title:(0,r.jsx)(p.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"activity",refreshState:n})})},[]),n=(0,l._)((0,eO.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],o=n[1],a=i.useCallback(function(e){var n=e.selected;return t!==n&&o(n),(0,r.jsxs)(ek.zH,{children:[(0,r.jsx)(e_.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(e_.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]})},[t,o]);return(0,r.jsx)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,{path:"/overview/activity/assets",children:(0,r.jsx)(OverviewAssetsRoot,{Header:e,TabButton:a})}),(0,r.jsx)(s.AW,{path:"/overview/activity/timeline",children:(0,r.jsx)(OverviewTimelineRoot,{Header:e,TabButton:a})}),(0,r.jsx)(s.AW,{path:"*",render:i.useCallback(function(){return"timeline"===t?(0,r.jsx)(s.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(s.l_,{to:"/overview/activity/assets"})},[t])})]})})},useDelayedState=function(e){var n=(0,l._)(i.useState(!1),2),t=n[0],r=n[1];return i.useEffect(function(){var n=setTimeout(function(){return r(!0)},e);return function(){return clearTimeout(n)}},[e]),t},e9=t(43180),SearchInputSpinner=function(e){var n=e.tooltipContent;return useDelayedState(2e3)?(0,r.jsx)(v.x,{margin:{top:1},children:(0,r.jsx)(e9.u,{placement:"top",canShow:!!n,content:n||"",children:(0,r.jsx)(g.$,{purpose:"body-text"})})}):null},e7=t(77277),ne=t(42885),nn=t(9901),nt=t(86839),nr=t(68884),OverviewJobsTable=function(e){var n=e.repos,t=i.useRef(null),s=i.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e6.Uz)(n)})},[n]),o=(0,ne.N)(nr.y,s),a=o.expandedKeys,l=o.onToggle,c=o.onToggleAll,u=i.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var i=(0,e6.Uz)(t);a.includes(i)&&r.forEach(function(n){var r=n.isJob,i=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:i})})}),e},[n,a]),d=(0,e7.w)(n.map(function(e){return e.repoAddress.name})),h=(0,eN.MG)({count:u.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=u[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=h.getTotalSize(),p=h.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nn.I,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eU.W2,{ref:t,children:(0,r.jsx)(eU.Nh,{$totalHeight:f,children:p.map(function(e){var n=e.index,t=e.key,i=e.size,s=e.start,o=u[n];return"header"===o.type?(0,r.jsx)(nt.vG,{repoAddress:o.repoAddress,height:i,start:s,onToggle:l,onToggleAll:c,expanded:a.includes((0,e6.Uz)(o.repoAddress)),showLocation:d.has(o.repoAddress.name),rightElement:(0,r.jsx)(e9.u,{content:1===o.jobCount?"1 job":"".concat(o.jobCount," jobs"),placement:"top",children:(0,r.jsx)(er.V,{children:o.jobCount})})},t):(0,r.jsx)(nn.b,{name:o.name,isJob:o.isJob,repoAddress:o.repoAddress,height:i,start:s},t)})})})})]})},sortRepoBuckets=function(e){return(0,c._)(e).sort(function(e,n){var t=(0,e6.Uz)(e.repoAddress),r=(0,e6.Uz)(n.repoAddress);return t.localeCompare(r)})},visibleRepoKeys=function(e){return new Set(e.map(function(e){return(0,e6.Uz)((0,eM.kQ)(e.repository.name,e.repositoryLocation.name))}))};function OverviewJobsRoot_templateObject(){var e=(0,U._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return OverviewJobsRoot_templateObject=function(){return e},e}var OverviewJobsRoot=function(){(0,O.Px)(),(0,W.j)("Overview | Jobs");var e=i.useContext(eZ.C5),n=e.allRepos,t=e.visibleRepos,s=e.loading,o=(0,l._)((0,C.q)({queryKey:"search",defaults:{search:""}}),2),a=o[0],c=o[1],u=n.length,d=(0,M.a)(ni,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),h=d.data,x=d.loading,m=(0,S.C4)(d,S.dT),j=i.useMemo(function(){var e=visibleRepoKeys(t);return buildBuckets(h).filter(function(n){var t=n.repoAddress;return e.has((0,e6.Uz)(t))})},[h,t]),b=a.trim().toLocaleLowerCase(),w=b.length>0,k=i.useMemo(function(){var e=b.toLocaleLowerCase();return j.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[j,b]),_=s&&!u||x&&!h;return(0,r.jsxs)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(p.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"jobs",refreshState:m})}),(0,r.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[u>1?(0,r.jsx)(RepoFilterButton,{}):null,(0,r.jsx)(eT.oi,{icon:"search",value:a,rightElement:_?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return c(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),x&&!u?(0,r.jsx)(v.x,{padding:64,children:(0,r.jsx)(g.$,{purpose:"page"})}):function(){if(x&&!h)return(0,r.jsx)(v.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(g.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:(0,y.$)()},children:"Loading jobs…"})]})});var e=n.length>t.length;return k.length?(0,r.jsx)(OverviewJobsTable,{repos:k}):w?(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No matching jobs",description:e?(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:a})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:a})," were found in your definitions"]})})}):(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,x=p.pipelines,m=(0,eM.kQ)(v,l.name),g=x.filter(function(e){var n=e.name;return!(0,ef.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});g.length>0&&t.push({repoAddress:m,jobs:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return sortRepoBuckets(t)},ni=(0,D.Ps)(OverviewJobsRoot_templateObject(),V.B),ns=t(76588),no=t(98319),OverviewResourcesTable=function(e){var n=e.repos,t=i.useRef(null),s=i.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e6.Uz)(n)})},[n]),o=(0,ne.N)(nr.y,s),l=o.expandedKeys,c=o.onToggle,u=o.onToggleAll,d=i.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var i=(0,e6.Uz)(t);l.includes(i)&&r.forEach(function(n){e.push((0,a._)({type:"resource",repoAddress:t},n))})}),e},[n,l]),h=(0,e7.w)(n.map(function(e){return e.repoAddress.name})),f=(0,eN.MG)({count:d.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),p=f.getTotalSize(),v=f.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(no.f,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eU.W2,{ref:t,children:(0,r.jsx)(eU.Nh,{$totalHeight:p,children:v.map(function(e){var n=e.index,t=e.key,i=e.size,s=e.start,o=d[n];return"header"===o.type?(0,r.jsx)(nt.vG,{repoAddress:o.repoAddress,height:i,start:s,onToggle:c,onToggleAll:u,expanded:l.includes((0,e6.Uz)(o.repoAddress)),showLocation:h.has(o.repoAddress.name),rightElement:(0,r.jsx)(e9.u,{content:1===o.resourceCount?"1 resource":"".concat(o.resourceCount," resources"),placement:"top",children:(0,r.jsx)(er.V,{children:o.resourceCount})})},t):(0,r.jsx)(no.K,(0,a._)({height:i,start:s},o),t)})})})})]})};function OverviewResourcesRoot_templateObject(){var e=(0,U._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,O.Px)(),(0,W.j)("Overview | Resources");var e=i.useContext(eZ.C5),n=e.allRepos,t=e.visibleRepos,s=e.loading,o=(0,l._)((0,C.q)({queryKey:"search",defaults:{search:""}}),2),a=o[0],c=o[1],u=n.length,d=(0,M.a)(na,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),h=d.data,x=d.loading,m=(0,S.C4)(d,S.dT),j=i.useMemo(function(){var e=visibleRepoKeys(t);return OverviewResourcesRoot_buildBuckets(h).filter(function(n){var t=n.repoAddress;return e.has((0,e6.Uz)(t))})},[h,t]),b=a.trim().toLocaleLowerCase(),w=b.length>0,k=i.useMemo(function(){var e=b.toLocaleLowerCase();return j.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[j,b]),_=s&&!u||x&&!h;return(0,r.jsxs)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(p.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"resources",refreshState:m})}),(0,r.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[u>1?(0,r.jsx)(RepoFilterButton,{}):null,(0,r.jsx)(eT.oi,{icon:"search",value:a,rightElement:_?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return c(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),x&&!u?(0,r.jsx)(v.x,{padding:64,children:(0,r.jsx)(g.$,{purpose:"page"})}):function(){if(x&&!h)return(0,r.jsx)(v.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(g.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:(0,y.$)()},children:"Loading resources…"})]})});var e=n.length>t.length;return k.length?(0,r.jsx)(OverviewResourcesTable,{repos:k}):w?(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No matching resources",description:e?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:a})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:a})," were found in your definitions"]})})}):(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},OverviewResourcesRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,x=p.allTopLevelResourceDetails,m=(0,eM.kQ)(v,l.name);x.length>0&&t.push({repoAddress:m,resources:x})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return sortRepoBuckets(t)},na=(0,D.Ps)(OverviewResourcesRoot_templateObject(),V.B,ns.L),nl=t(2281),nc=t(73689),nu=t(49280),nd=t(33379),nh=t(59692),nf=t(55055),np=t(54483),nv=t(57981),nx=t(581),nm=t(56284),UnloadableSensors=function(e){var n=e.sensorStates,t=e.showSubheading;return n.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.x,{padding:{vertical:16,horizontal:20},children:[void 0===t||t?(0,r.jsx)(p.pm,{children:"Unloadable sensors"}):null,(0,r.jsx)(UnloadableSensorInfo,{})]}),(0,r.jsxs)(m.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{maxWidth:"60px"}}),(0,r.jsx)("th",{children:"Sensor name"}),(0,r.jsx)("th",{style:{width:"100px"},children:"Last tick"}),(0,r.jsx)("th",{children:"Last run"})]})}),(0,r.jsx)("tbody",{children:n.map(function(e){return(0,r.jsx)(SensorStateRow,{sensorState:e},e.id)})})]})]}):null},UnloadableSchedules=function(e){var n=e.scheduleStates,t=e.showSubheading;return n.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.x,{padding:{vertical:16,horizontal:20},children:[void 0===t||t?(0,r.jsx)(p.pm,{children:"Unloadable schedules"}):null,(0,r.jsx)(UnloadableScheduleInfo,{})]}),(0,r.jsxs)(m.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{maxWidth:"60px"}}),(0,r.jsx)("th",{children:"Schedule name"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Schedule"}),(0,r.jsx)("th",{style:{width:"100px"},children:"Last tick"}),(0,r.jsx)("th",{children:"Last run"}),(0,r.jsx)("th",{children:"Partition set status"})]})}),(0,r.jsx)("tbody",{children:n.map(function(e){return(0,r.jsx)(ScheduleStateRow,{scheduleState:e},e.id)})})]})]}):null},UnloadableSensorInfo=function(){return(0,r.jsx)(x.b,{intent:"warning",title:(0,r.jsxs)("div",{children:["Note: You can turn off any of the following sensors, but you cannot turn them back on."," "]}),description:(0,r.jsx)("div",{children:"The following sensors were previously started but now cannot be loaded. They may be part of a different workspace or from a sensor or code location that no longer exists in code. You can turn them off, but you cannot turn them back on since they can’t be loaded."})})},UnloadableScheduleInfo=function(){return(0,r.jsx)(x.b,{intent:"warning",title:(0,r.jsx)("div",{children:"Note: You can turn off any of the following schedules, but you cannot turn them back on."}),description:(0,r.jsx)("div",{children:"The following schedules were previously started but now cannot be loaded. They may be part of a different workspace or from a schedule or code location that no longer exists in code. You can turn them off, but you cannot turn them back on since they can’t be loaded."})})},SensorStateRow=function(e){var n,t,i=e.sensorState,s=i.id,a=i.selectorId,c=i.name,d=i.status,h=i.ticks,f=i.hasStopPermission,p=(0,l._)((0,nd.D)(nv.Xu,{onCompleted:nv.oI}),2),v=p[0],x=p[1].loading,m=(0,b.p)(),g=(n=(0,o._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:if(d!==_.ynu.RUNNING)return[3,2];return[4,m({title:"Are you sure you want to turn off this sensor?",description:"The definition for this sensor is not available. If you turn it off, you will not be able to turn it back on from the currently loaded workspace."})];case 1:e.sent(),v({variables:{jobOriginId:s,jobSelectorId:a}}),e.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),S=d===_.ynu.RUNNING&&!f,k=h.length?h[0]:null;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:60},children:(t=(0,r.jsx)(j.X,{format:"switch",disabled:x||d===_.ynu.STOPPED||S,checked:d===_.ynu.RUNNING,onChange:g}),S?(0,r.jsx)(e9.u,{content:w.Qr,children:t}):t)}),(0,r.jsxs)("td",{children:[(0,r.jsx)(nh.Z,{direction:"row",spacing:8,alignItems:"center",children:c}),(0,r.jsx)(nm.Y,{instigatorState:i})]}),(0,r.jsx)("td",{children:k?(0,r.jsx)(nx.a,{tick:k}):(0,r.jsx)("span",{style:{color:(0,y.$)()},children:"None"})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{display:"flex"},children:(0,r.jsx)(nu.UD,{instigationState:i})})})]},c)},ScheduleStateRow=function(e){var n,t,i=e.scheduleState,s=(0,l._)((0,nd.D)(nf.d0,{onCompleted:nf.JH}),2),a=s[0],c=s[1].loading,d=(0,b.p)(),h=i.id,f=i.selectorId,p=i.name,v=i.ticks,x=i.status,m=i.typeSpecificData,g=v.length>0?v[0]:null,y=m&&"ScheduleData"===m.__typename?m.cronSchedule:null,S=(n=(0,o._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:if(x!==_.ynu.RUNNING)return[3,2];return[4,d({title:"Are you sure you want to stop this schedule?",description:"The definition for this schedule is not available. If you turn it off, you will not be able to turn it back on from the currently loaded workspace."})];case 1:e.sent(),a({variables:{scheduleOriginId:h,scheduleSelectorId:f}}),e.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),k=x===_.ynu.RUNNING&&!i.hasStopPermission;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:60},children:(t=(0,r.jsx)(j.X,{format:"switch",checked:x===_.ynu.RUNNING,disabled:x!==_.ynu.RUNNING||c||k,onChange:S}),k?(0,r.jsx)(e9.u,{content:w.Qr,children:t}):t)}),(0,r.jsxs)("td",{children:[(0,r.jsx)(nh.Z,{direction:"row",spacing:8,alignItems:"center",children:(0,r.jsx)("div",{children:p})}),(0,r.jsx)(nm.Y,{instigatorState:i})]}),(0,r.jsx)("td",{style:{maxWidth:150},children:(0,r.jsx)("div",{style:{position:"relative",width:"100%",whiteSpace:"pre-wrap",display:"block"},children:y?(0,r.jsx)(e9.u,{position:"bottom",content:y,children:(0,np.A)(y)}):(0,r.jsx)("div",{children:"—"})})}),(0,r.jsx)("td",{children:g?(0,r.jsx)(nx.a,{tick:g}):null}),(0,r.jsx)("td",{children:(0,r.jsx)(nu.UD,{instigationState:i})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{display:"flex"},children:"—"})})]},p)},ng=t(30894),nj=t(24808),ny=t(84826),nb=t(157),nw=t(30682),nS=t(10397),useCodeLocationFilter=function(){var e=i.useContext(eZ.C5),n=e.allRepos,t=e.visibleRepos,s=e.setVisible,o=e.setHidden,a=i.useMemo(function(){return n.map(function(e){return(0,eM.kQ)(e.repository.name,e.repositoryLocation.name)})},[n]),l=i.useMemo(function(){return t.length===n.length?[]:t.map(function(e){return(0,eM.kQ)(e.repository.name,e.repositoryLocation.name)})},[n,t]);return(0,G.im)({name:"Code location",icon:"folder",initialState:l,allValues:a.map(function(e){return{value:e,match:[(0,e6.Uz)(e)]}}),getKey:function(e){return(0,e6.Uz)(e)},renderLabel:function(e){var n=e.value;return(0,r.jsx)(nS.rd,{text:(0,e6.Uz)(n)})},getStringValue:function(e){return(0,e6.Uz)(e)},onStateChanged:function(e){if(0===e.size){s(a);return}o(a.filter(function(n){return!e.has(n)})),s(Array.from(e))},menuWidth:"500px"})},nk=t(8223),nO=t(72855),n_=t(72349),OverviewScheduleTable=function(e){var n=e.repos,t=e.headerCheckbox,s=e.checkedKeys,o=e.onToggleCheckFactory,a=i.useRef(null),l=i.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e6.Uz)(n)})},[n]),c=(0,ne.N)(nr.y,l),u=c.expandedKeys,d=c.onToggle,h=c.onToggleAll,f=i.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.schedules;e.push({type:"header",repoAddress:t,scheduleCount:r.length});var i=(0,e6.Uz)(t);u.includes(i)&&r.forEach(function(n){e.push({type:"schedule",repoAddress:t,schedule:n})})}),e},[n,u]),p=(0,e7.w)(n.map(function(e){return e.repoAddress.name})),v=(0,eN.MG)({count:f.length,getScrollElement:function(){return a.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),x=v.getTotalSize(),m=v.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n_.o,{checkbox:t}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eU.W2,{ref:a,children:(0,r.jsx)(eU.Nh,{$totalHeight:x,children:m.map(function(e){var n=e.index,i=e.key,a=e.size,l=e.start,c=f[n];if("header"===c.type)return(0,r.jsx)(nt.vG,{repoAddress:c.repoAddress,height:a,start:l,onToggle:d,onToggleAll:h,expanded:u.includes((0,e6.Uz)(c.repoAddress)),showLocation:p.has(c.repoAddress.name),rightElement:(0,r.jsx)(e9.u,{content:1===c.scheduleCount?"1 schedule":"".concat(c.scheduleCount," schedules"),placement:"top",children:(0,r.jsx)(er.V,{children:c.scheduleCount})})},i);var v=(0,nb.g)(c.repoAddress,c.schedule.name);return(0,r.jsx)(n_.i,{name:c.schedule.name,scheduleState:c.schedule.scheduleState,showCheckboxColumn:!!t,checked:s.has(v),onToggleChecked:o(v),repoAddress:c.repoAddress,height:a,start:l},i)})})})})]})};function OverviewSchedulesRoot_templateObject(){var e=(0,U._)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                  scheduleState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return OverviewSchedulesRoot_templateObject=function(){return e},e}function OverviewSchedulesRoot_templateObject1(){var e=(0,U._)(["\n  query UnloadableSchedulesQuery {\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewSchedulesRoot_templateObject1=function(){return e},e}var OverviewSchedulesRoot=function(){(0,O.Px)(),(0,W.j)("Overview | Schedules");var e=i.useContext(eZ.C5),n=e.allRepos,t=e.visibleRepos,s=e.loading,o=n.length,c=(0,l._)((0,C.q)({queryKey:"search",defaults:{search:""}}),2),u=c[0],d=c[1],h=useCodeLocationFilter(),x=(0,nk.g)(),m=i.useMemo(function(){return[h,x]},[h,x]),j=(0,H.m)({filters:m}),b=j.button,w=j.activeFiltersJsx,k=(0,M.a)(nC,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),_=k.data,T=k.loading,A=(0,S.C4)(k,S.dT),E=i.useMemo(function(){var e=visibleRepoKeys(t);return OverviewSchedulesRoot_buildBuckets(_).filter(function(n){var t=n.repoAddress;return e.has((0,e6.Uz)(t))})},[_,t]),R=x.state,I=i.useMemo(function(){return E.map(function(e){var n=e.schedules,t=(0,nl._)(e,["schedules"]);return(0,eC._)((0,a._)({},t),{schedules:R.size?n.filter(function(e){var n=e.scheduleState;return R.has(n.status)}):n})})},[E,R]),N=u.trim().toLocaleLowerCase(),P=N.length>0,L=i.useMemo(function(){var e=N.toLocaleLowerCase();return I.map(function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.schedules.length>0})},[I,N]),z=i.useMemo(function(){return L.some(function(e){return e.schedules.length>0})},[L]),B=i.useMemo(function(){return E.map(function(e){var n=e.repoAddress;return e.schedules.filter(function(e){var n=e.scheduleState;return(0,ng.i)(n)}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})}).flat()},[E]),F=i.useMemo(function(){return B.map(function(e){var n=e.repoAddress,t=e.scheduleName;return(0,nb.g)(n,t)})},[B]),U=(0,l._)((0,nc.a)(F),2),D=U[0].checkedIds,$=U[1],V=$.onToggleFactory,J=$.onToggleAll,q=i.useMemo(function(){var e=new Set(L.map(function(e){var n=e.repoAddress;return e.schedules.map(function(e){var t=e.name;return(0,nb.g)(n,t)})}).flat());return F.filter(function(n){return e.has(n)})},[F,L]),G=i.useMemo(function(){var e=new Set(q.filter(function(e){return D.has(e)}));return B.filter(function(n){var t=n.repoAddress,r=n.scheduleName;return e.has((0,nb.g)(t,r))})},[q,B,D]),Q=F.length>0,X=G.length,Z=s&&!o||T&&!_;return(0,r.jsxs)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(p.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"schedules",refreshState:A})}),(0,r.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(v.x,{flex:{direction:"row",gap:12},children:[b,(0,r.jsx)(eT.oi,{icon:"search",value:u,rightElement:Z?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading schedules…"}):void 0,onChange:function(e){d(e.target.value),J(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,r.jsx)(e9.u,{content:"You do not have permission to start or stop these schedules",canShow:z&&!Q,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(nj._,{schedules:G,onDone:function(){return A.refetch()}})})]}),w.length?(0,r.jsx)(v.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:w}):null,T&&!o?(0,r.jsx)(v.x,{padding:64,children:(0,r.jsx)(g.$,{purpose:"page"})}):(0,r.jsxs)(r.Fragment,{children:[(null==_?void 0:_.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(UnloadableSchedulesAlert,{count:_.unloadableInstigationStatesOrError.results.length}):null,(0,r.jsx)(ny.K,{daemonHealth:null==_?void 0:_.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(T&&!_)return(0,r.jsx)(v.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(g.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:(0,y.$)()},children:"Loading schedules…"})]})});var e=n.length>t.length;return L.length?(0,r.jsx)(OverviewScheduleTable,{headerCheckbox:Q?(0,r.jsx)(nw.W,{checkedCount:X,totalCount:q.length,onToggleAll:J}):void 0,repos:L,checkedKeys:D,onToggleCheckFactory:V}):P?(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No matching schedules",description:e?(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:u})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:u})," were found in your definitions"]})})}):(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No schedules",description:e?"No matching schedules were found in the selected code locations":"No matching schedules were found in your definitions"})})}()]})]})},UnloadableSchedulesAlert=function(e){var n=e.count,t=(0,l._)(i.useState(!1),2),s=t[0],o=t[1];return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.x,{padding:{vertical:16,horizontal:24},border:"top",children:(0,r.jsx)(x.b,{intent:"warning",title:1===n?"1 unloadable schedule":"".concat(n," unloadable schedules"),description:(0,r.jsxs)(v.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,r.jsx)("div",{children:"Schedules were previously started but now cannot be loaded. They may be part of a code locations that no longer exist. You can turn them off, but you cannot turn them back on."}),(0,r.jsx)(ek.zx,{onClick:function(){return o(!0)},children:1===n?"View unloadable schedule":"View unloadable schedules"})]})})}),(0,r.jsxs)(eQ.Vq,{isOpen:s,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,r.jsx)(v.x,{padding:{bottom:8},children:(0,r.jsx)(UnloadableScheduleDialog,{})}),(0,r.jsx)(eQ.cN,{children:(0,r.jsx)(ek.zx,{intent:"primary",onClick:function(){return o(!1)},children:"Done"})})]})]}):null},UnloadableScheduleDialog=function(){var e=(0,M.a)(nT).data;return e?(null==e?void 0:e.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(UnloadableSchedules,{scheduleStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,r.jsx)(J.T9,{error:null==e?void 0:e.unloadableInstigationStatesOrError}):(0,r.jsx)(g.$,{purpose:"section"})},OverviewSchedulesRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,x=p.schedules,m=(0,eM.kQ)(v,l.name),g=x.map(function(e){var n=e.name,t=e.scheduleState;return{name:n,scheduleState:t}});g.length>0&&t.push({repoAddress:m,schedules:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return sortRepoBuckets(t)},nC=(0,D.Ps)(OverviewSchedulesRoot_templateObject(),nO.i,V.B,Q.O),nT=(0,D.Ps)(OverviewSchedulesRoot_templateObject1(),nu.ai,V.B),nA=t(67802),nE=t(56692),nR=t(22478),nI=t(16592),OverviewSensorTable=function(e){var n=e.repos,t=e.headerCheckbox,s=e.checkedKeys,o=e.onToggleCheckFactory,a=i.useRef(null),l=i.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e6.Uz)(n)})},[n]),c=(0,ne.N)(nr.y,l),u=c.expandedKeys,d=c.onToggle,h=c.onToggleAll,f=i.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.sensors;e.push({type:"header",repoAddress:t,sensorCount:r.length});var i=(0,e6.Uz)(t);u.includes(i)&&r.forEach(function(n){e.push({type:"sensor",repoAddress:t,sensor:n})})}),e},[n,u]),p=(0,e7.w)(n.map(function(e){return e.repoAddress.name})),v=(0,eN.MG)({count:f.length,getScrollElement:function(){return a.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),x=v.getTotalSize(),m=v.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nI.K,{checkbox:t}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eU.W2,{ref:a,children:(0,r.jsx)(eU.Nh,{$totalHeight:x,children:m.map(function(e){var n=e.index,i=e.key,a=e.size,l=e.start,c=f[n];if("header"===c.type)return(0,r.jsx)(nt.vG,{repoAddress:c.repoAddress,height:a,start:l,onToggle:d,onToggleAll:h,expanded:u.includes((0,e6.Uz)(c.repoAddress)),showLocation:p.has(c.repoAddress.name),rightElement:(0,r.jsx)(e9.u,{content:1===c.sensorCount?"1 sensor":"".concat(c.sensorCount," sensors"),placement:"top",children:(0,r.jsx)(er.V,{children:c.sensorCount})})},i);var v=(0,nR.x)(c.repoAddress,c.sensor.name);return(0,r.jsx)(nI.R,{name:c.sensor.name,sensorState:c.sensor.sensorState,showCheckboxColumn:!!t,checked:s.has(v),onToggleChecked:o(v),repoAddress:c.repoAddress,height:a,start:l},i)})})})})]})};function OverviewSensorsRoot_templateObject(){var e=(0,U._)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                  sensorType\n                  sensorState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return OverviewSensorsRoot_templateObject=function(){return e},e}function OverviewSensorsRoot_templateObject1(){var e=(0,U._)(["\n  query UnloadableSensorsQuery {\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewSensorsRoot_templateObject1=function(){return e},e}var OverviewSensorsRoot=function(){(0,O.Px)(),(0,W.j)("Overview | Sensors");var e=i.useContext(eZ.C5),n=e.allRepos,t=e.visibleRepos,s=e.loading,o=n.length,c=(0,l._)((0,C.q)({queryKey:"search",defaults:{search:""}}),2),u=c[0],d=c[1],h=useCodeLocationFilter(),x=(0,nk.g)(),m=i.useMemo(function(){return[h,x]},[h,x]),j=(0,H.m)({filters:m}),b=j.button,w=j.activeFiltersJsx,k=(0,M.a)(nN,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),_=k.data,T=k.loading,A=(0,S.C4)(k,S.dT),E=i.useMemo(function(){var e=visibleRepoKeys(t);return OverviewSensorsRoot_buildBuckets(_).filter(function(n){var t=n.repoAddress;return e.has((0,e6.Uz)(t))})},[_,t]),R=x.state,I=i.useMemo(function(){return E.map(function(e){var n=e.sensors,t=(0,nl._)(e,["sensors"]);return(0,eC._)((0,a._)({},t),{sensors:R.size?n.filter(function(e){var n=e.sensorState;return R.has(n.status)}):n})})},[E,R]),N=u.trim().toLocaleLowerCase(),P=N.length>0,L=i.useMemo(function(){var e=N.toLocaleLowerCase();return I.map(function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.sensors.length>0})},[I,N]),z=i.useMemo(function(){return L.some(function(e){return e.sensors.length>0})},[L]),B=i.useMemo(function(){return E.map(function(e){var n=e.repoAddress;return e.sensors.filter(function(e){var n=e.sensorState;return(0,ng.i)(n)}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})}).flat()},[E]),F=i.useMemo(function(){return B.map(function(e){var n=e.repoAddress,t=e.sensorName;return(0,nR.x)(n,t)})},[B]),U=(0,l._)((0,nc.a)(F),2),D=U[0].checkedIds,$=U[1],V=$.onToggleFactory,J=$.onToggleAll,q=i.useMemo(function(){var e=new Set(L.map(function(e){var n=e.repoAddress;return e.sensors.map(function(e){var t=e.name;return(0,nR.x)(n,t)})}).flat());return F.filter(function(n){return e.has(n)})},[F,L]),G=i.useMemo(function(){var e=new Set(q.filter(function(e){return D.has(e)}));return B.filter(function(n){var t=n.repoAddress,r=n.sensorName;return e.has((0,nR.x)(t,r))})},[q,B,D]),Q=F.length>0,X=G.length,Z=s&&!o||T&&!_;return(0,r.jsxs)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(p.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"sensors",refreshState:A})}),(0,r.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,r.jsxs)(v.x,{flex:{direction:"row",gap:12},children:[b,(0,r.jsx)(eT.oi,{icon:"search",value:u,rightElement:Z?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading sensors…"}):void 0,onChange:function(e){return d(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,r.jsx)(e9.u,{content:"You do not have permission to start or stop these schedules",canShow:z&&!Q,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(nA.b,{sensors:G,onDone:function(){return A.refetch()}})})]}),w.length?(0,r.jsx)(v.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:w}):null,T&&!o?(0,r.jsx)(v.x,{padding:64,children:(0,r.jsx)(g.$,{purpose:"page"})}):(0,r.jsxs)(r.Fragment,{children:[(null==_?void 0:_.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(UnloadableSensorsAlert,{count:_.unloadableInstigationStatesOrError.results.length}):null,(0,r.jsx)(nE.F,{daemonHealth:null==_?void 0:_.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(T&&!_)return(0,r.jsx)(v.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(g.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:(0,y.$)()},children:"Loading sensors…"})]})});var e=n.length>t.length;return L.length?(0,r.jsx)(OverviewSensorTable,{headerCheckbox:Q?(0,r.jsx)(nw.W,{checkedCount:X,totalCount:q.length,onToggleAll:J}):void 0,repos:L,checkedKeys:D,onToggleCheckFactory:V}):P?(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No matching sensors",description:e?(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:u})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:u})," were found in your definitions"]})})}):(0,r.jsx)(v.x,{padding:{top:20},children:(0,r.jsx)(K.t,{icon:"search",title:"No sensors",description:e?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})}()]})]})},UnloadableSensorsAlert=function(e){var n=e.count,t=(0,l._)(i.useState(!1),2),s=t[0],o=t[1];return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.x,{padding:{vertical:16,horizontal:24},border:"top",children:(0,r.jsx)(x.b,{intent:"warning",title:1===n?"1 unloadable sensor":"".concat(n," unloadable sensors"),description:(0,r.jsxs)(v.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,r.jsx)("div",{children:"Sensors were previously started but now cannot be loaded. They may be part of a code location that no longer exists. You can turn them off, but you cannot turn them back on."}),(0,r.jsx)(ek.zx,{onClick:function(){return o(!0)},children:1===n?"View unloadable sensor":"View unloadable sensors"})]})})}),(0,r.jsxs)(eQ.Vq,{isOpen:s,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,r.jsx)(v.x,{padding:{bottom:8},children:(0,r.jsx)(UnloadableSensorDialog,{})}),(0,r.jsx)(eQ.cN,{children:(0,r.jsx)(ek.zx,{intent:"primary",onClick:function(){return o(!1)},children:"Done"})})]})]}):null},UnloadableSensorDialog=function(){var e=(0,M.a)(nP).data;return e?(null==e?void 0:e.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(UnloadableSensors,{sensorStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,r.jsx)(J.T9,{error:null==e?void 0:e.unloadableInstigationStatesOrError}):(0,r.jsx)(g.$,{purpose:"section"})},OverviewSensorsRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,x=p.sensors,m=(0,eM.kQ)(v,l.name);x.length>0&&t.push({repoAddress:m,sensors:x})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return sortRepoBuckets(t)},nN=(0,D.Ps)(OverviewSensorsRoot_templateObject(),nO.i,V.B,Q.O),nP=(0,D.Ps)(OverviewSensorsRoot_templateObject1(),nu.ai,V.B),OverviewRoot=function(){return(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,{path:"/overview/activity",children:(0,r.jsx)(OverviewActivityRoot,{})}),(0,r.jsx)(s.AW,{path:"/overview/jobs",children:(0,r.jsx)(OverviewJobsRoot,{})}),(0,r.jsx)(s.AW,{path:"/overview/schedules",children:(0,r.jsx)(OverviewSchedulesRoot,{})}),(0,r.jsx)(s.AW,{path:"/overview/sensors",children:(0,r.jsx)(OverviewSensorsRoot,{})}),(0,r.jsx)(s.AW,{path:"/overview/automaterialize",children:(0,r.jsx)(AutomaterializationRoot,{})}),(0,r.jsx)(s.AW,{path:"/overview/backfills/:backfillId",children:(0,r.jsx)(BackfillPage,{})}),(0,r.jsx)(s.AW,{path:"/overview/backfills",exact:!0,children:(0,r.jsx)(InstanceBackfills,{})}),(0,r.jsx)(s.AW,{path:"/overview/resources",children:(0,r.jsx)(OverviewResourcesRoot,{})}),(0,r.jsx)(s.AW,{path:"*",render:function(){return(0,r.jsx)(s.l_,{to:"/overview/activity"})}})]})},nL=OverviewRoot}}]);
//# sourceMappingURL=258.a325301256088472.js.map