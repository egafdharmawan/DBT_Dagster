"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{28888:function(e,t,n){n.d(t,{T:function(){return r}});var i=n(73235);function _templateObject(){var e=(0,i._)(["\n  height: 100%;\n  overflow-y: auto;\n  padding-bottom: 64px;\n  width: 100%;\n"]);return _templateObject=function(){return e},e}var r=n(35505).ZP.div.withConfig({componentId:"sc-2cf5acf-0"})(_templateObject())},17131:function(e,t,n){n.d(t,{m:function(){return PageHeader}});var i=n(73235),r=n(52322);n(2784);var s=n(35505),a=n(25195),o=n(22139);function _templateObject(){var e=(0,i._)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"]);return _templateObject=function(){return e},e}var PageHeader=function(e){var t=e.title,n=e.tags,i=e.right,s=e.tabs;return(0,r.jsxs)(l,{background:(0,a.gJ)(),padding:{top:16,left:24,right:12},border:"bottom",children:[(0,r.jsxs)(o.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,r.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:12,wrap:"wrap"},children:[t,n]}),i]}),s]})},l=(0,s.ZP)(o.x).withConfig({componentId:"sc-c36fe779-0"})(_templateObject())},41222:function(e,t,n){n.d(t,{K:function(){return AssetPageHeader},w:function(){return AssetGlobalLineageLink}});var i=n(81862),r=n(85333),s=n(2281),a=n(58467),o=n(73235),l=n(22970),c=n(52322),d=n(38058),u=n(17131),p=n(22139),x=n(81308),m=n(43180),h=n(34e3),f=n(25195),g=n(2784),j=n(47933),v=n(35505),y=n(19211),b=n(47544);function _templateObject(){var e=(0,o._)(["\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  padding: 3px;\n  margin-top: 2px;\n\n  :focus {\n    outline: none;\n  }\n\n  "," {\n    transition: background-color 100ms linear;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  & li:not(:first-child)::after {\n    background: none;\n    font-size: 20px;\n    font-weight: bold;\n    color: ",";\n    content: '/';\n    width: 8px;\n    line-height: 16px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,o._)(["\n  color: ",";\n\n  :hover,\n  :active {\n    color: ",";\n  }\n"]);return _templateObject2=function(){return e},e}var AssetPageHeader=function(e){var t=e.assetKey,n=(0,s._)(e,["assetKey"]),o=(0,b.m)(),d=t.path.join("/"),j=(0,a._)(g.useState(!1),2),v=j[0],E=j[1],O=g.useRef(),C=g.useCallback((0,i._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return O.current&&clearTimeout(O.current),o(d),E(!0),[4,(0,y.B7)({icon:"done",intent:"primary",message:"Copied asset key!"})];case 1:return e.sent(),O.current=setTimeout(function(){E(!1)},2e3),[2]}})}),[o,d]),z=g.useMemo(function(){var e=[{text:"Assets",href:"/assets"}];return t.path.reduce(function(t,n){var i="".concat(t,"/").concat(encodeURIComponent(n));return e.push({text:n,href:i}),i},"/assets"),e},[t.path]);return(0,c.jsx)(u.m,(0,r._)({title:(0,c.jsxs)(p.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,c.jsx)(_,{items:z,currentBreadcrumbRenderer:function(e){var t=e.text;return(0,c.jsx)(x.X6,{children:t})},breadcrumbRenderer:function(e){var t=e.text,n=e.href;return(0,c.jsx)(x.X6,{children:(0,c.jsx)(w,{to:n||"#",children:t})})}}),(0,c.jsx)(m.u,{placement:"bottom",content:"Copy asset key",children:(0,c.jsx)(A,{onClick:C,children:(0,c.jsx)(h.JO,{name:v?"copy_to_clipboard_done":"copy_to_clipboard",color:(0,f.md)()})})})]})},n))},A=v.ZP.button.withConfig({componentId:"sc-139359d3-0"})(_templateObject(),h.a1,h.a1,(0,f.$l)()),AssetGlobalLineageLink=function(){return(0,c.jsx)(j.rU,{to:"/asset-groups",children:(0,c.jsxs)(p.x,{flex:{gap:4},children:[(0,c.jsx)(h.JO,{color:(0,f.Es)(),name:"schema"}),"View global asset lineage"]})})},_=(0,v.ZP)(d.Oo).withConfig({componentId:"sc-139359d3-1"})(_templateObject1(),(0,f.Aw)()),w=(0,v.ZP)(j.rU).withConfig({componentId:"sc-139359d3-2"})(_templateObject2(),(0,f.$)(),(0,f.$)())},15144:function(e,t,n){n.r(t),n.d(t,{AssetsCatalogRoot:function(){return AssetsCatalogRoot},default:function(){return nx}});var i,r,s,a,o=n(73235),l=n(52322),c=n(40794),d=n(60138),u=n(28888),p=n(22139),x=n(63832),m=n(25195),h=n(2784),f=n(7267),g=n(68028),j=n(35157),v=n(28252),y=n(83568),b=n(39852),A=n(41222),_=n(85333),w=n(6692),E=n(58467),O=n(64595),C=n(92364),z=n(9676),N=n(57830),P=n(47933),k=n(58701),I=n(69643),S=n(24601),K=n(14952),R=n(76129),D=n(71277),M=n(63386),L=n(37160),T=n(38153),F=n(82550),V=n(81308),$=n(99596),U=n(37783),q=n(44678),W=n(82585),J=n(9001),H=n(34e3),B=n(15282),Z=n(59692),G=n(67913),Q=n(90818),Y=n(21485),X=n(38917),ee=n(51969),et=n(28879),en=n.n(et),ei=n(84636),er=n.n(ei),es=n(35505),ea=n(36031);function _templateObject(){var e=(0,o._)(["\n  width: 100%;\n  overflow-x: auto;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  width: 100%;\n  border-spacing: 0;\n  border-collapse: collapse;\n  tr td:first-child {\n    max-width: 300px;\n    word-wrap: break-word;\n    width: 25%;\n  }\n  tr td {\n    border: 1px solid ",";\n    padding: 8px 12px;\n    font-size: 14px;\n    vertical-align: top;\n  }\n"]);return _templateObject1=function(){return e},e}var AssetEventMetadataEntriesTable=function(e){var t=e.event,n=e.observations;if(!t||!t.metadataEntries.length&&!(null==n?void 0:n.length))return(0,l.jsx)(V.YS,{color:(0,m.$)(),children:"No metadata entries"});var i=t.metadataEntries,r=t.timestamp,s=er()((n||[]).flatMap(function(e){return e.metadataEntries.map(function(t){return{timestamp:e.timestamp,runId:e.runId,entry:t}})}),function(e){return e.entry.label});return(0,l.jsx)(eo,{children:(0,l.jsx)(el,{children:(0,l.jsxs)("tbody",{children:[i.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)(V.fv,{children:e.label})}),(0,l.jsx)("td",{children:(0,l.jsx)(V.fv,{children:(0,l.jsx)(ea.BL,{entry:e,expandSmallValues:!0})})}),(0,l.jsx)("td",{style:{opacity:.7},children:e.description})]},"metadata-".concat(e.label))}),s.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)(V.fv,{children:e.entry.label})}),(0,l.jsx)("td",{children:(0,l.jsx)(V.fv,{children:(0,l.jsx)(ea.BL,{entry:e.entry,expandSmallValues:!0})})}),(0,l.jsxs)("td",{style:{opacity:.7},children:[(0,l.jsxs)(p.x,{children:["Observed in run ",(0,l.jsx)(P.rU,{to:"/runs/".concat(e.runId,"?timestamp=").concat(r),children:(0,l.jsx)(V.fv,{children:(0,X.EI)({id:e.runId})})})]}),(0,l.jsx)(V.YS,{children:"(".concat(en()(Number(e.timestamp)).from(Number(r),!0)," later)")}),e.entry.description]})]},"metadata-".concat(e.timestamp,"-").concat(e.entry.label))})]})})})},eo=es.ZP.div.withConfig({componentId:"sc-6202d801-0"})(_templateObject()),el=es.ZP.table.withConfig({componentId:"sc-6202d801-1"})(_templateObject1(),(0,m.wL)()),ec=n(71235),ed=n(98073),eu=n(80528),ep=n(81367),ex=n(49086),AssetEventDetail=function(e){var t,n=e.event,i=e.assetKey,r=(null===(t=n.runOrError)||void 0===t?void 0:t.__typename)==="Run"?n.runOrError:null,s=null==r?void 0:r.repositoryOrigin,a=s?(0,L.kQ)(s.repositoryName,s.repositoryLocationName):null,o=(0,ee.Ux)(a),c="MaterializationEvent"===n.__typename?n.assetLineage:[];return(0,l.jsxs)(p.x,{padding:{horizontal:24,bottom:24},style:{flex:1},children:[(0,l.jsxs)(p.x,{padding:{vertical:24},border:"bottom",flex:{alignItems:"center",gap:12},children:[(0,l.jsx)(V.X6,{children:(0,l.jsx)(k.E,{timestamp:{ms:Number(n.timestamp)}})}),(0,ex.C)(n)?(0,l.jsx)(ep.U,{tags:n.tags}):void 0]}),(0,l.jsxs)(p.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16},border:"bottom",padding:{vertical:16},children:[(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"Event"}),"MaterializationEvent"===n.__typename?(0,l.jsxs)(p.x,{flex:{gap:4},children:[(0,l.jsx)(H.JO,{name:"materialization"}),"Materialization"]}):(0,l.jsxs)(p.x,{flex:{gap:4},children:[(0,l.jsx)(H.JO,{name:"observation"}),"Observation"]})]}),n.partition&&(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"Partition"}),(0,l.jsx)(P.rU,{to:"?view=partitions&partition=".concat(n.partition),children:n.partition})]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},style:{minHeight:64},children:[(0,l.jsx)(V.pm,{children:"Run"}),r?(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(Y.hk,{runId:r.id,status:r.status}),(0,l.jsx)(P.rU,{to:(0,X.tA)(r,n),children:(0,l.jsx)(V.fv,{children:(0,X.EI)(r)})})]}):"—"]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"Job"}),r&&!(0,j.pv)(r.pipelineName)?(0,l.jsxs)(p.x,{children:[(0,l.jsx)(p.x,{children:(0,l.jsx)(Q.h,{showIcon:!0,pipelineName:r.pipelineName,pipelineHrefContext:a||"repo-unknown",snapshotId:r.pipelineSnapshotId,isJob:(0,ee.E8)(o,r.pipelineName)})}),(0,l.jsxs)(Z.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,l.jsx)(H.JO,{name:"linear_scale",color:(0,m.md)()}),(0,l.jsx)(P.rU,{to:(0,X.tA)(r,n),children:n.stepKey})]})]}):"—"]})]}),n.description&&(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"Description"}),(0,l.jsx)(G.d,{description:n.description})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"Metadata"}),(0,l.jsx)(AssetEventMetadataEntriesTable,{event:n})]}),"MaterializationEvent"===n.__typename&&(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"Source data"}),(0,l.jsx)(eu.EA,{timestamp:n.timestamp,assetKey:i})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"System tags"}),(0,l.jsx)(ec.M,{event:n,collapsible:!0})]}),c.length>0&&(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"Parent materializations"}),(0,l.jsx)(ed.i,{elements:c,timestamp:n.timestamp})]})]})},AssetEventDetailEmpty=function(){return(0,l.jsxs)(p.x,{padding:{horizontal:24},style:{flex:1},children:[(0,l.jsx)(p.x,{padding:{vertical:24},border:"bottom",flex:{alignItems:"center",justifyContent:"space-between"},children:(0,l.jsx)(V.X6,{color:(0,m.$)(),children:"No event selected"})}),(0,l.jsxs)(p.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16},border:"bottom",padding:{vertical:16},children:[(0,l.jsx)(p.x,{flex:{gap:4,direction:"column"},children:(0,l.jsx)(V.pm,{children:"Event"})}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},style:{minHeight:64},children:[(0,l.jsx)(V.pm,{children:"Run"}),"—"]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"Job"}),"—"]})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"Metadata"}),(0,l.jsx)(AssetEventMetadataEntriesTable,{event:null})]})]})},em=n(18017),eh=n(16861),ef=n(61935),eg=n(54266),ej=n(10952);function AllIndividualEventsButton_templateObject(){var e=(0,o._)(["\n  &:hover {\n    background: ",";\n  }\n"]);return AllIndividualEventsButton_templateObject=function(){return e},e}function AllIndividualEventsButton_templateObject1(){var e=(0,o._)(["\n  width: 100%;\n  margin: -2px -2px -3px;\n  tr td {\n    font-size: 14px;\n  }\n"]);return AllIndividualEventsButton_templateObject1=function(){return e},e}function _templateObject2(){var e=(0,o._)(["\n  padding: 4px;\n  margin: -4px;\n  cursor: pointer;\n  border: 0;\n  background: transparent;\n  outline: none;\n\n  "," {\n    margin: -2px -5px;\n    transform: ",";\n    opacity: 0.25;\n  }\n\n  :focus {\n    outline: none;\n\n    "," {\n      background: ",";\n      opacity: 0.5;\n    }\n  }\n"]);return _templateObject2=function(){return e},e}var AssetEventsTable=function(e){var t=e.hasPartitions,n=e.hasLineage,i=e.groups,r=e.focused,s=e.setFocused;return(0,l.jsxs)(eg.i,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[t&&(0,l.jsx)("th",{style:{minWidth:100},children:"Partition"}),(0,l.jsx)("th",{style:{minWidth:150},children:"Timestamp"}),(0,l.jsx)("th",{style:{minWidth:150},children:"Job"}),(0,l.jsx)("th",{style:{width:100},children:"Run"})]})}),(0,l.jsx)("tbody",{children:i.map(function(e){return(0,l.jsxs)(h.Fragment,{children:[(0,l.jsx)(eb,{onClick:function(t){t.target instanceof HTMLElement&&t.target.closest("a")||null==s||s(r!==e?e:void 0)},children:(0,l.jsx)(ey,{group:e,hasPartitions:t,hasLineage:n,isFocused:r===e})}),r===e?(0,l.jsx)(ev,{hasLineage:n,group:e}):void 0]},e.timestamp||e.partition)})})]})},NoneSpan=function(){return(0,l.jsx)("span",{style:{color:(0,m.$)()},children:"None"})},ev=h.memo(function(e){var t=e.group,n=e.hasLineage,i=t.latest,r=t.timestamp;if(!i)return(0,l.jsx)("tr",{});var s="MaterializationEvent"===i.__typename?i.assetLineage:[],a="MaterializationEvent"===i.__typename?t.all.filter(function(e){return"ObservationEvent"===e.__typename&&Number(e.timestamp)>Number(i.timestamp)}):[];return(0,l.jsx)("tr",{style:{background:(0,m.gJ)()},children:(0,l.jsxs)("td",{colSpan:6,style:{fontSize:14,padding:0},children:[i.description&&(0,l.jsx)(p.x,{padding:{horizontal:24,vertical:12},children:i.description}),i.metadataEntries.length||n?(0,l.jsx)(eA,{children:(0,l.jsxs)("tbody",{children:[i.metadataEntries.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:{maxWidth:300},children:e.label}),(0,l.jsx)("td",{children:(0,l.jsx)(ea.BL,{entry:e,expandSmallValues:!0})}),(0,l.jsx)("td",{style:{opacity:.7},children:e.description})]},"metadata-".concat(e.label))}),a.map(function(e){return(0,l.jsx)(h.Fragment,{children:e.metadataEntries.map(function(t){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:t.label}),(0,l.jsx)("td",{children:(0,l.jsx)(ea.BL,{entry:t,expandSmallValues:!0})}),(0,l.jsxs)("td",{style:{opacity:.7},children:[(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},children:[(0,l.jsx)(H.JO,{name:"observation",size:16}),(0,l.jsxs)("span",{children:["".concat(e.stepKey," in "),(0,l.jsx)(P.rU,{to:"/runs/".concat(e.runId,"?timestamp=").concat(e.timestamp),children:(0,l.jsx)(V.fv,{children:(0,X.EI)({id:e.runId})})})," (".concat(en()(Number(e.timestamp)).from(Number(r),!0)," later)")]})]}),t.description]})]},"metadata-".concat(e.timestamp,"-").concat(t.label))})},e.timestamp)}),n&&r?(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Parent Materializations"}),(0,l.jsx)("td",{children:(0,l.jsx)(ed.i,{elements:s,timestamp:r})})]}):null]})}):(0,l.jsx)(p.x,{padding:{horizontal:24,vertical:12},children:"No materialization event metadata"})]})})}),ey=h.memo(function(e){var t=e.group,n=e.hasPartitions,i=e.hasLineage,r=e.isFocused,s=t.latest,a=t.partition,o=t.timestamp,c=t.all,d=r?{paddingLeft:4,borderLeft:"4px solid ".concat((0,m.yM)())}:{paddingLeft:8},u=(null==s?void 0:s.runOrError.__typename)==="Run"?s.runOrError:void 0,x=null==u?void 0:u.repositoryOrigin,h=x?(0,L.kQ)(x.repositoryName,x.repositoryLocationName):null,f=(0,ee.Ux)(h);return s?u?(0,l.jsxs)(l.Fragment,{children:[n&&(0,l.jsx)("td",{style:(0,_._)({whiteSpace:"nowrap"},d),children:(0,l.jsxs)(Z.Z,{direction:"row",spacing:2,children:[(0,l.jsx)(DisclosureTriangle,{open:r}),a||(0,l.jsx)(NoneSpan,{})]})}),(0,l.jsx)("td",{style:n?{}:d,children:(0,l.jsxs)(Z.Z,{direction:"row",spacing:4,children:[!n&&(0,l.jsx)(DisclosureTriangle,{open:r}),(0,l.jsxs)(Z.Z,{direction:"column",spacing:4,children:[(0,l.jsx)(k.E,{timestamp:{ms:Number(o)}}),(null==c?void 0:c.length)>1?(0,l.jsx)(AllIndividualEventsButton,{hasPartitions:n,hasLineage:i,events:c,children:"View ".concat(c.length," events")}):"MaterializationEvent"===s.__typename?(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},style:{color:(0,m.$)()},children:[(0,l.jsx)(H.JO,{name:"materialization",size:16,color:(0,m.$)()}),"Materialization"]}):(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},style:{color:(0,m.$)()},children:[(0,l.jsx)(H.JO,{name:"observation",size:16,color:(0,m.$)()})," Observation"]})]})]})}),(0,l.jsx)("td",{children:!(0,j.pv)(u.pipelineName)&&(0,l.jsxs)(p.x,{margin:{bottom:4},children:[(0,l.jsx)(p.x,{padding:{left:8},children:(0,l.jsx)(Q.h,{showIcon:!0,pipelineName:u.pipelineName,pipelineHrefContext:h||"repo-unknown",snapshotId:u.pipelineSnapshotId,isJob:(0,ee.E8)(f,u.pipelineName)})}),(0,l.jsxs)(Z.Z,{direction:"row",padding:{left:8},spacing:8,alignItems:"center",children:[(0,l.jsx)(H.JO,{name:"linear_scale",color:(0,m.$)()}),(0,l.jsx)(P.rU,{to:(0,X.tA)(u,s),children:s.stepKey})]})]})}),(0,l.jsx)("td",{children:(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(Y.hk,{runId:u.id,status:u.status}),(0,l.jsx)(P.rU,{to:"/runs/".concat(u.id,"?timestamp=").concat(o),children:(0,l.jsx)(V.fv,{children:(0,X.EI)(u)})})]})})]}):(0,l.jsx)("span",{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{style:{whiteSpace:"nowrap",paddingLeft:24},children:a||(0,l.jsx)(NoneSpan,{})}),(0,l.jsx)("td",{colSpan:3})]})}),eb=es.ZP.tr.withConfig({componentId:"sc-f5a3f755-0"})(AllIndividualEventsButton_templateObject(),(0,m._c)()),eA=es.ZP.table.withConfig({componentId:"sc-f5a3f755-1"})(AllIndividualEventsButton_templateObject1()),AllIndividualEventsButton=function(e){var t=e.disabled,n=e.hasLineage,i=e.hasPartitions,r=e.events,s=e.children,a=(0,E._)(h.useState(!1),2),o=a[0],c=a[1],d=(0,E._)(h.useState(),2),u=d[0],x=d[1],m=h.useMemo(function(){return r.map(function(e){return{latest:e,partition:e.partition||void 0,timestamp:e.timestamp,all:[]}})},[r]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(J.zx,{disabled:t,onClick:function(){return c(!0)},children:s}),(0,l.jsxs)(ej.Vq,{isOpen:o,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return c(!1)},style:{width:"80%",minWidth:"800px"},title:function(){if(i&&r[0]){var e=r[0].partition;if(e)return"Materialization and observation events for ".concat(e)}return"Materialization and observation events"}(),children:[o&&(0,l.jsx)(p.x,{padding:{bottom:8},onClick:function(e){return e.stopPropagation()},children:(0,l.jsx)(AssetEventsTable,{hasLineage:n,hasPartitions:i,focused:u,setFocused:x,groups:m})}),(0,l.jsx)(ej.cN,{children:(0,l.jsx)(J.zx,{intent:"primary",onClick:function(){return c(!1)},children:"OK"})})]})]})},DisclosureTriangle=function(e){var t=e.open,n=e.onClick;return(0,l.jsx)(e_,{onClick:n,$open:t,children:(0,l.jsx)(H.JO,{name:"arrow_drop_down",size:24})})},e_=es.ZP.button.withConfig({componentId:"sc-f5a3f755-2"})(_templateObject2(),H.a1,function(e){return e.$open?"rotate(0deg)":"rotate(-90deg)"},H.a1,(0,m.Ep)()),ew=n(26480),eE=n(79998);function AssetPartitionDetail_templateObject(){var e=(0,o._)(["\n  query AssetPartitionDetailQuery($assetKey: AssetKeyInput!, $partitionKey: String!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        opNames\n        latestRunForPartition(partition: $partitionKey) {\n          id\n          ...AssetPartitionLatestRunFragment\n        }\n        assetMaterializations(partitions: [$partitionKey]) {\n          ... on MaterializationEvent {\n            runId\n            ...AssetMaterializationFragment\n          }\n        }\n        assetObservations(partitions: [$partitionKey]) {\n          ... on ObservationEvent {\n            runId\n            ...AssetObservationFragment\n          }\n        }\n      }\n    }\n  }\n  fragment AssetPartitionLatestRunFragment on Run {\n    id\n    status\n    endTime\n  }\n\n  ","\n  ","\n"]);return AssetPartitionDetail_templateObject=function(){return e},e}function AssetPartitionDetail_templateObject1(){var e=(0,o._)(["\n  query AssetPartitionStaleQuery($assetKey: AssetKeyInput!, $partitionKey: String!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        staleStatus(partition: $partitionKey)\n        staleCauses(partition: $partitionKey) {\n          key {\n            path\n          }\n          reason\n          category\n          dependency {\n            path\n          }\n        }\n      }\n    }\n  }\n"]);return AssetPartitionDetail_templateObject1=function(){return e},e}var AssetPartitionDetailLoader=function(e){var t=(0,c.a)(eO,{variables:{assetKey:e.assetKey,partitionKey:e.partitionKey}}),n=(0,c.a)(eC,{variables:{assetKey:e.assetKey,partitionKey:e.partitionKey}}),i=h.useMemo(function(){var e,n;return(null===(n=t.data)||void 0===n?void 0:null===(e=n.assetNodeOrError)||void 0===e?void 0:e.__typename)!=="AssetNode"?{materializations:[],observations:[],hasLineage:!1,latestRunForPartition:null}:{stepKey:(0,j.Ec)(t.data.assetNodeOrError),latestRunForPartition:t.data.assetNodeOrError.latestRunForPartition,materializations:(0,F._)(t.data.assetNodeOrError.assetMaterializations).sort(function(e,t){return Number(t.timestamp)-Number(e.timestamp)}),observations:(0,F._)(t.data.assetNodeOrError.assetObservations).sort(function(e,t){return Number(t.timestamp)-Number(e.timestamp)}),hasLineage:t.data.assetNodeOrError.assetMaterializations.some(function(e){return e.assetLineage.length>0})}},[t.data]),r=i.materializations,s=i.observations,a=i.hasLineage,o=i.latestRunForPartition,d=h.useMemo(function(){var e,t;return(null===(t=n.data)||void 0===t?void 0:null===(e=t.assetNodeOrError)||void 0===e?void 0:e.__typename)!=="AssetNode"?{staleCauses:[],staleStatus:ef.D9X.FRESH}:{staleStatus:n.data.assetNodeOrError.staleStatus,staleCauses:n.data.assetNodeOrError.staleCauses}},[n.data]),u=d.staleStatus,p=d.staleCauses,x=r[0];return t.loading||!t.data?(0,l.jsx)(AssetPartitionDetailEmpty,{partitionKey:e.partitionKey}):(0,l.jsx)(AssetPartitionDetail,{hasLineage:a,hasStaleLoadingState:n.loading,latestRunForPartition:o,staleStatus:u,staleCauses:p,assetKey:e.assetKey,group:{latest:x||null,timestamp:null==x?void 0:x.timestamp,partition:e.partitionKey,all:(0,F._)(r).concat((0,F._)(s)).sort(function(e,t){return Number(t.timestamp)-Number(e.timestamp)})}})},eO=(0,d.Ps)(AssetPartitionDetail_templateObject(),eE.ZC,eE.T8),eC=(0,d.Ps)(AssetPartitionDetail_templateObject1()),AssetPartitionDetail=function(e){var t,n=e.assetKey,i=e.stepKey,r=e.group,s=e.hasLineage,a=e.hasLoadingState,o=e.hasStaleLoadingState,c=e.latestRunForPartition,d=e.staleCauses,u=e.staleStatus,h=r.latest,f=r.partition,g=r.all,v=(null==h?void 0:null===(t=h.runOrError)||void 0===t?void 0:t.__typename)==="Run"?h.runOrError:null,y=(null==c?void 0:c.id)!==(null==v?void 0:v.id)?c:null,b=(null==y?void 0:y.status)===ef.VOA.STARTED?"has started and is refreshing this partition.":(null==y?void 0:y.status)===ef.VOA.STARTING?"is starting and will refresh this partition.":(null==y?void 0:y.status)===ef.VOA.QUEUED?"is queued and is refreshing this partition.":void 0,A=null==v?void 0:v.repositoryOrigin,_=A?(0,L.kQ)(A.repositoryName,A.repositoryLocationName):null,w=(0,ee.Ux)(_),E=(null==h?void 0:h.__typename)==="MaterializationEvent"?r.all.filter(function(e){return"ObservationEvent"===e.__typename&&Number(e.timestamp)>Number(h.timestamp)}):[];return(0,l.jsxs)(p.x,{padding:{horizontal:24,bottom:24},style:{flex:1},children:[(0,l.jsxs)(p.x,{padding:{vertical:24},border:"bottom",flex:{alignItems:"center"},children:[f?(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) auto auto",gap:12,alignItems:"center"},"data-tooltip":f,"data-tooltip-style":ez,children:[(0,l.jsx)(V.X6,{children:(0,l.jsx)(eh.g,{text:f})}),a?(0,l.jsx)(x.$,{purpose:"body-text"}):h?(0,l.jsx)(N.V,{intent:"success",children:"Materialized"}):void 0,o?(0,l.jsx)(x.$,{purpose:"body-text"}):d&&u?(0,l.jsx)(K.d9,{liveData:{staleCauses:d,staleStatus:u},assetKey:n,include:"all"}):void 0]}):(0,l.jsx)(V.X6,{color:(0,m.$)(),children:"No partition selected"}),(0,l.jsx)("div",{style:{flex:1}})]}),(null==y?void 0:y.status)===ef.VOA.FAILURE&&(0,l.jsx)(ew.Z,{run:y,stepKey:i,padding:{horizontal:0,vertical:16},border:"bottom"}),y&&b&&(0,l.jsx)(z.b,{intent:"info",icon:(0,l.jsx)(x.$,{purpose:"body-text"}),title:(0,l.jsxs)("div",{style:{fontWeight:400},children:["Run ",(0,l.jsx)(P.rU,{to:"/runs/".concat(y.id),children:(0,X.EI)(y)})," ",b]})}),(0,l.jsxs)(p.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16,minHeight:76},border:"bottom",padding:{vertical:16},children:[h?(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"MaterializationEvent"===h.__typename?"Latest materialization":"Latest observation"}),(0,l.jsxs)(p.x,{flex:{gap:4},style:{whiteSpace:"nowrap"},children:["MaterializationEvent"===h.__typename?(0,l.jsx)(H.JO,{name:"materialization"}):(0,l.jsx)(H.JO,{name:"observation"}),(0,l.jsx)(k.E,{timestamp:{ms:Number(h.timestamp)}})]})]}):(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"Latest materialization"}),(0,l.jsxs)(p.x,{flex:{gap:4},children:[(0,l.jsx)(H.JO,{name:"materialization"}),"None"]})]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"Run"}),v&&h?(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(Y.hk,{runId:v.id,status:v.status}),(0,l.jsx)(P.rU,{to:(0,X.tA)(v,h),children:(0,l.jsx)(V.fv,{children:(0,X.EI)(v)})})]}):"None"]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(V.pm,{children:"Job"}),h&&v&&!(0,j.pv)(v.pipelineName)?(0,l.jsxs)(p.x,{children:[(0,l.jsx)(p.x,{children:(0,l.jsx)(Q.h,{showIcon:!0,pipelineName:v.pipelineName,pipelineHrefContext:_||"repo-unknown",snapshotId:v.pipelineSnapshotId,isJob:(0,ee.E8)(w,v.pipelineName)})}),(0,l.jsxs)(Z.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,l.jsx)(H.JO,{name:"linear_scale",color:(0,m.md)()}),(0,l.jsx)(P.rU,{to:(0,X.tA)(v,h),children:h.stepKey})]})]}):"None"]}),(0,l.jsx)(p.x,{style:{textAlign:"right"},children:(0,l.jsx)(AllIndividualEventsButton,{hasPartitions:!0,hasLineage:s,events:g,disabled:0===g.length,children:"View all historical events (".concat(g.length,")")})})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"Metadata"}),(0,l.jsx)(AssetEventMetadataEntriesTable,{event:h,observations:E})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"Source data"}),(0,l.jsx)(eu.EA,{timestamp:null==h?void 0:h.timestamp,assetKey:n})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(V.pm,{children:"System tags"}),(0,l.jsx)(ec.M,{event:h,collapsible:!0})]})]})},AssetPartitionDetailEmpty=function(e){var t=e.partitionKey;return(0,l.jsx)(AssetPartitionDetail,{assetKey:{path:[""]},group:{all:[],latest:null,timestamp:"0",partition:t},latestRunForPartition:null,hasLineage:!1,hasLoadingState:!0})},ez=JSON.stringify({background:(0,m.gJ)(),border:"1px solid ".concat((0,m.im)()),fontSize:"18px",fontWeight:"600",color:(0,m.Ep)()}),eN=n(49155),eP=n(37361),AssetEvents=function(e){var t=e.assetKey,n=e.assetNode,i=e.params,r=e.setParams,s=e.liveData,a=e.dataRefreshHint,o=(0,eE.fE)(t,i,{assetHasDefinedPartitions:!1}),c=o.xAxis,d=o.materializations,u=o.observations,f=o.loadedPartitionKeys,g=o.refetch,v=o.loading;h.useEffect(function(){i.asOf||g()},[i.asOf,a,g]);var y=(0,E._)((0,B.U)("asset-event-filters",function(e){return{types:(null==e?void 0:e.types)||ek}}),2),b=y[0],A=y[1],C=null==n?void 0:n.isSource,z=(0,eP.L)(c,C||b.types.includes("materialization")?d:[],C||b.types.includes("observation")?u:[],f),onSetFocused=function(e){var t="time"===c?{time:(null==e?void 0:e.timestamp)!==i.time&&(null==e?void 0:e.timestamp)||""}:{partition:(null==e?void 0:e.partition)!==i.partition&&(null==e?void 0:e.partition)||""};r((0,_._)({},i,t))},N=z.find(function(e){return i.time?Number(e.timestamp)<=Number(i.time):!!i.partition&&e.partition===i.partition})||z[0],P=!(null==n?void 0:n.partitionDefinition)&&z.some(function(e){return e.partition}),k=d.some(function(e){return e.assetLineage.length>0});return(0,l.jsxs)(l.Fragment,{children:[P&&(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},style:{marginBottom:-1},children:[(0,l.jsx)(V.pm,{children:"Asset Events"}),(0,l.jsx)("div",{style:{margin:"-6px 0 "},children:(0,l.jsx)($.h,{activeItems:new Set([c]),buttons:[{id:"partition",label:"By partition"},{id:"time",label:"By timestamp"}],onClick:function(e){return r("time"===e?(0,w._)((0,_._)({},i),{partition:void 0,time:(null==N?void 0:N.timestamp)||""}):(0,w._)((0,_._)({},i),{partition:(null==N?void 0:N.partition)||"",time:void 0}))}})})]}),n&&!n.partitionDefinition&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ew.Z,{stepKey:(0,j.Ec)(n),border:"bottom",run:(null==s?void 0:s.runWhichFailedToMaterialize)||null}),(0,l.jsx)(eN.j,{stepKey:(0,j.Ec)(n),border:"bottom",liveData:s})]}),(0,l.jsxs)(p.x,{style:{flex:1,minHeight:0,outline:"none"},flex:{direction:"row"},onKeyDown:function(e){var t={ArrowDown:1,ArrowUp:-1}[e.key];if(!(!t||!N||e.isDefaultPrevented())){var n=z[z.indexOf(N)+t];n&&(e.preventDefault(),onSetFocused(n))}},tabIndex:-1,children:[(0,l.jsxs)(p.x,{style:{display:"flex",flex:1,minWidth:200},flex:{direction:"column"},background:(0,m.gJ)(),children:[C?void 0:(0,l.jsx)(p.x,{flex:{alignItems:"center",gap:16},padding:{vertical:12,horizontal:24},border:"bottom",children:(0,l.jsx)(EventTypeSelect,{value:b.types,onChange:function(e){return A((0,w._)((0,_._)({},b),{types:e}))}})}),v?(0,l.jsx)(p.x,{flex:{alignItems:"center",justifyContent:"center"},style:{flex:1},children:(0,l.jsx)(x.$,{purpose:"section"})}):(0,l.jsx)(em.cJ,{xAxis:c,groups:z,focused:N,setFocused:onSetFocused,assetKey:t})]}),(0,l.jsx)(p.x,{flex:{direction:"column"},style:{flex:3,minWidth:0,overflowY:"auto"},border:"left",children:(0,l.jsx)(O.S,{region:"event",resetErrorOnChange:[N],children:"partition"===c?N?(0,l.jsx)(AssetPartitionDetail,{group:N,hasLineage:k,assetKey:t,stepKey:n?(0,j.Ec)(n):void 0,latestRunForPartition:null}):(0,l.jsx)(AssetPartitionDetailEmpty,{}):(null==N?void 0:N.latest)?(0,l.jsx)(AssetEventDetail,{assetKey:t,event:N.latest}):(0,l.jsx)(AssetEventDetailEmpty,{})})})]})]})},ek=["observation","materialization"],EventTypeSelect=function(e){var t=e.value,n=e.onChange,i=(0,E._)(h.useState(!1),2),r=i[0],s=i[1],onToggle=function(e){t.includes(e)?n(t.filter(function(t){return t!==e})):n((0,F._)(t).concat([e]))};return(0,l.jsx)(U.J,{isOpen:r,placement:"bottom-start",canEscapeKeyClose:!0,onInteraction:function(e){return s(e)},content:(0,l.jsxs)(q.v2,{style:{width:140},"aria-label":"filter-options",children:[(0,l.jsx)(q.sN,{shouldDismissPopover:!1,onClick:function(){return onToggle("materialization")},text:(0,l.jsx)(p.x,{padding:{horizontal:2},flex:{direction:"row",alignItems:"center"},children:(0,l.jsx)(W.X,{size:"small",checked:t.includes("materialization"),onChange:function(){},label:"Materialization"})})}),(0,l.jsx)(q.sN,{shouldDismissPopover:!1,onClick:function(){return onToggle("observation")},text:(0,l.jsx)(p.x,{padding:{horizontal:2},flex:{direction:"row",alignItems:"center"},children:(0,l.jsx)(W.X,{size:"small",checked:t.includes("observation"),onChange:function(){},label:"Observation"})})})]}),children:(0,l.jsxs)(J.zx,{onClick:function(){return s(function(e){return!e})},icon:(0,l.jsx)(H.JO,{name:"filter_alt"}),rightIcon:(0,l.jsx)(H.JO,{name:"expand_more"}),children:["Type (",t.length,")"]})})},eI=n(24490),eS=n(25793),eK=n(46032),eR=n(87084),eD=n(17094),eM=n(63916),eL=n(37936),eT=n(5171),eF=n(10424),eV=n(74711);function AssetNodeList_templateObject(){var e=(0,o._)(["\n  height: 195px;\n  overflow-x: auto;\n  width: 100%;\n  white-space: nowrap;\n"]);return AssetNodeList_templateObject=function(){return e},e}function AssetNodeList_templateObject1(){var e=(0,o._)(["\n  cursor: pointer;\n  width: 260px;\n  flex-shrink: 0;\n  position: relative;\n"]);return AssetNodeList_templateObject1=function(){return e},e}var AssetNodeList=function(e){var t=e.items,n=(0,f.k6)();return null===t?(0,l.jsx)(e$,{flex:{alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(x.$,{purpose:"section"})}):(0,l.jsx)(e$,{flex:{gap:4},padding:{horizontal:12},children:t.map(function(e){return(0,l.jsx)(eU,{onClick:function(t){t.stopPropagation(),n.push((0,eV.p)(e.assetKey,{view:"definition"}))},children:(0,l.jsx)(eR.p4,{definition:e,selected:!1})},e.id)})})},e$=(0,es.ZP)(p.x).withConfig({componentId:"sc-684ff908-0"})(AssetNodeList_templateObject()),eU=es.ZP.div.withConfig({componentId:"sc-684ff908-1"})(AssetNodeList_templateObject1()),eq=n(34557),eW=n(16570),eJ=n(51887),eH=n(85613),eB=n(98454);function AssetNodeDefinition_templateObject(){var e=(0,o._)(["\n  fragment AssetNodeDefinitionFragment on AssetNode {\n    id\n    description\n    graphName\n    opNames\n    opVersion\n    jobNames\n    isSource\n    isExecutable\n    autoMaterializePolicy {\n      policyType\n      rules {\n        className\n        description\n        decisionType\n      }\n    }\n    freshnessPolicy {\n      maximumLagMinutes\n      cronSchedule\n      cronScheduleTimezone\n    }\n    backfillPolicy {\n      description\n    }\n    partitionDefinition {\n      description\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n\n    ...AssetNodeConfigFragment\n    ...AssetNodeFragment\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return AssetNodeDefinition_templateObject=function(){return e},e}var AssetNodeDefinition=function(e){var t,n=e.assetNode,i=e.upstream,r=e.downstream,s=e.dependsOnSelf,a=(0,eF.U6)(n),o=a.assetMetadata,c=a.assetType,d=null===(t=n.configField)||void 0===t?void 0:t.configType,u=d&&"Any"!==d.key?d:null,x=(0,L.kQ)(n.repository.name,n.repository.location.name);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eT.N,{assetKey:n.assetKey,loadedFromRepo:x,padded:!0}),(0,l.jsxs)(p.x,{flex:{direction:"row"},style:{flex:1},children:[(0,l.jsxs)(p.x,{style:{flex:1,minWidth:0},flex:{direction:"column"},border:"right",children:[(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",flex:{justifyContent:"space-between",gap:8},children:[(0,l.jsx)(V.pm,{children:"Description"}),(0,l.jsx)(DescriptionAnnotations,{assetNode:n,repoAddress:x})]}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},style:{flex:1,flexBasis:"content",flexGrow:0,minHeight:123},children:n.description?(0,l.jsx)(G.d,{description:n.description,maxHeight:260}):(0,l.jsx)(V.uT,{children:"No description provided"})}),n.opVersion&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(V.pm,{children:"Code version"})}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"center"},children:(0,l.jsx)(eB.G,{children:n.opVersion})})]}),n.freshnessPolicy&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(V.pm,{children:"Freshness policy"})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:[(0,l.jsx)(V.uT,{style:{flex:1},children:(0,eJ.jY)(n.freshnessPolicy)}),(0,l.jsx)(eJ.CW,{policy:n.freshnessPolicy,assetKey:n.assetKey})]})]}),n.autoMaterializePolicy&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(V.pm,{children:"Auto-materialize policy"})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:[(0,l.jsx)(V.uT,{style:{flex:1},children:(0,eq.r)(n.autoMaterializePolicy)}),(0,l.jsx)(eq.W,{policy:n.autoMaterializePolicy})]})]}),n.backfillPolicy&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(V.pm,{children:"Backfill policy"})}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:(0,l.jsx)(V.uT,{style:{flex:1},children:n.backfillPolicy.description})})]}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",flex:{justifyContent:"space-between",gap:8},children:[(0,l.jsxs)(V.pm,{children:["Upstream assets",(null==i?void 0:i.length)?" (".concat(i.length,")"):""]}),(0,l.jsx)(P.rU,{to:"?view=lineage&lineageScope=upstream",children:(0,l.jsxs)(p.x,{flex:{gap:4,alignItems:"center"},children:["View upstream graph",(0,l.jsx)(H.JO,{name:"open_in_new",color:(0,m.Es)()})]})})]}),s&&(0,l.jsx)(eW.x,{}),(0,l.jsx)(AssetNodeList,{items:i}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",flex:{justifyContent:"space-between",gap:8},children:[(0,l.jsxs)(V.pm,{children:["Downstream assets",(null==r?void 0:r.length)?" (".concat(r.length,")"):""]}),(0,l.jsx)(P.rU,{to:"?view=lineage&lineageScope=downstream",children:(0,l.jsxs)(p.x,{flex:{gap:4,alignItems:"center"},children:["View downstream graph",(0,l.jsx)(H.JO,{name:"open_in_new",color:(0,m.Es)()})]})})]}),(0,l.jsx)(AssetNodeList,{items:r}),(0,l.jsx)("div",{style:{flex:1}})]}),(0,l.jsxs)(p.x,{border:"left-and-right",style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(V.pm,{children:"Required resources"})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:[(0,F._)(n.requiredResources).sort(function(e,t){return eK.Bl.compare(e.resourceKey,t.resourceKey)}).map(function(e){return(0,l.jsxs)(eM.b1,{children:[(0,l.jsx)(H.JO,{name:"resource",color:(0,m.md)()}),x?(0,l.jsx)(P.rU,{to:(0,T.$U)(x,"/resources/".concat(e.resourceKey)),children:(0,l.jsx)(eM.bZ,{children:e.resourceKey})}):(0,l.jsx)(eM.bZ,{children:e.resourceKey})]},e.resourceKey)}),0===n.requiredResources.length&&(0,l.jsxs)(V.uT,{children:["No required resources to display",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/resources#using-software-defined-assets",children:"View documentation"})})]})]})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(V.pm,{children:"Config"})}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:u?(0,l.jsx)(eS.L,{type:u,typesInScope:u.recursiveConfigTypes}):(0,l.jsxs)(V.uT,{children:["No config schema defined",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#asset-configuration",children:"View documentation"})})]})})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(V.pm,{children:"Type"})}),c&&"Any"!==c.displayName?(0,l.jsx)(eD.Ot,{type:c}):(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},children:(0,l.jsxs)(V.uT,{children:["No input and output type data defined",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/types#overview",children:"View documentation"})})]})})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",flex:{justifyContent:"space-between",gap:8},children:(0,l.jsx)(V.pm,{children:"Metadata"})}),(0,l.jsx)(p.x,{style:{flex:1},children:o.length>0?(0,l.jsx)(eF.mQ,{assetMetadata:o,repoLocation:null==x?void 0:x.location}):(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},children:(0,l.jsxs)(V.uT,{children:["No asset definition metadata defined",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#attaching-definition-metadata",children:"View documentation"})})]})})})]})]})]})]})},DescriptionAnnotations=function(e){var t=e.assetNode,n=e.repoAddress;return(0,l.jsxs)(p.x,{flex:{alignItems:"center",gap:16,wrap:"wrap"},style:{lineHeight:0},children:[t.jobNames.filter(function(e){return!(0,j.pv)(e)}).map(function(e){return(0,l.jsx)(V.fv,{children:(0,l.jsx)(Q.h,{isJob:!0,showIcon:!0,pipelineName:e,pipelineHrefContext:n})},e)}),(0,l.jsx)(eH.d,{assetNode:t,repoAddress:n}),t.isSource?(0,l.jsx)(V.YS,{style:{lineHeight:"16px"},children:"Source Asset"}):t.isExecutable?void 0:(0,l.jsx)(V.YS,{style:{lineHeight:"16px"},children:"External Asset"})]})},eZ=(0,d.Ps)(AssetNodeDefinition_templateObject(),eL.r,eR.zU,eF.Ws),eG=n(35838),eQ=n.n(eG),eY=n(12518),eX=n(66207),e0=n(23054),e1=n(36495);function AssetNodeInstigatorTag_templateObject(){var e=(0,o._)(["\n  fragment AssetNodeInstigatorsFragment on AssetNode {\n    id\n    jobs {\n      id\n      name\n      schedules {\n        id\n        ...ScheduleSwitchFragment\n      }\n      sensors {\n        id\n        ...SensorSwitchFragment\n      }\n    }\n    automationPolicySensor {\n      id\n      ...SensorSwitchFragment\n    }\n  }\n\n  ","\n  ","\n"]);return AssetNodeInstigatorTag_templateObject=function(){return e},e}var AssetNodeInstigatorTag=function(e){var t=e.assetNode,n=e.repoAddress,i=(0,e1.e)(),r=h.useMemo(function(){var e=er()(eQ()(t.jobs,function(e){return e.schedules}),"id"),n=er()(eQ()(t.jobs,function(e){return e.sensors}),"id");if("has-sensor-amp"===i){var r=t.automationPolicySensor;r&&n.push(r)}return{schedules:e,sensors:n}},[t,i]),s=r.schedules,a=r.sensors;return(0,l.jsx)(eY.I,{repoAddress:n,schedules:s,sensors:a,showSwitch:!1})},e2=(0,d.Ps)(AssetNodeInstigatorTag_templateObject(),eX.J,e0.U),e4=n(34822),e8=n(87405),e6=n(47888),e3=n(91282),e5=n(32858),e7=n(15989),e9=n(33161),te=n(76861);function AssetNodeLineageGraph_templateObject(){var e=(0,o._)(["\n  overflow: visible;\n  border-radius: 0;\n"]);return AssetNodeLineageGraph_templateObject=function(){return e},e}var tt="lineageGraphZoomLevel",AssetNodeLineageGraph=function(e){var t=e.assetKey,n=e.assetGraphData,i=e.params,r=(0,j.Wu)(t),s=h.useMemo(function(){var e={};return Object.values(n.nodes).forEach(function(t){var n=(0,j.e6)(t);e[n]=e[n]||[],e[n].push(t)}),{allGroups:Object.keys(e),groupedAssets:e}},[n]),a=s.allGroups,o=s.groupedAssets,c=(0,E._)(h.useState(null),2),d=c[0],u=c[1],m=(0,e9.oJ)(n,a),g=m.layout,v=m.loading,y=h.useRef(),b=(0,f.k6)(),onClickAsset=function(e){b.push((0,eV.p)(e,(0,w._)((0,_._)({},i),{lineageScope:"neighbors"})))};return(h.useEffect(function(){if(y.current&&g){var e=Number((0,B.n)(tt));y.current.autocenter(!1,e),y.current.focus()}},[y,g,r]),!g||v)?(0,l.jsx)(p.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(x.$,{purpose:"page"})}):(0,l.jsx)(e7.lM,{ref:function(e){return y.current=e||void 0},interactor:e7.lM.Interactors.PanAndZoom,defaultZoom:"zoom-to-fit",graphWidth:g.width,graphHeight:g.height,onDoubleClick:function(e){var t;null===(t=y.current)||void 0===t||t.autocenter(!0),e.stopPropagation()},maxZoom:e7.eW,maxAutocenterZoom:e7.eW,children:function(e,t){var i=e.scale;return(0,l.jsxs)(tn,{width:g.width,height:g.height,children:[y.current&&(0,l.jsx)(SVGSaveZoomLevel,{scale:i}),Object.values(g.groups).filter(function(e){return!(0,te.we)(e.bounds,t)}).sort(function(e,t){return e.id.length-t.id.length}).map(function(e){return(0,h.createElement)("foreignObject",(0,w._)((0,_._)({},e.bounds),{key:e.id}),(0,l.jsx)(e3.Z,{group:(0,w._)((0,_._)({},e),{assets:o[e.id]}),minimal:i<e6.CZ}))}),(0,l.jsx)(e8.i,{selected:null,highlighted:d,edges:g.edges,viewportRect:t}),Object.values(g.nodes).filter(function(e){return!(0,te.we)(e.bounds,t)}).map(function(e){var t=e.id,s=e.bounds,a=n.nodes[t],o=JSON.parse(t),c={graphData:n,node:a};return(0,h.createElement)("foreignObject",(0,w._)((0,_._)({},s),{key:t,style:{overflow:"visible"},onMouseEnter:function(){return u(t)},onMouseLeave:function(){return u(null)},onClick:function(){return onClickAsset({path:o})},onDoubleClick:function(e){var t;null===(t=y.current)||void 0===t||t.zoomToSVGBox(s,!0,1.2),e.stopPropagation()}}),a?i<e6.CZ?(0,l.jsx)(eR.ef,(0,w._)((0,_._)({},c),{children:(0,l.jsx)(eR.t$,{definition:a.definition,selected:a.id===r,height:s.height})})):(0,l.jsx)(eR.ef,(0,w._)((0,_._)({},c),{children:(0,l.jsx)(eR.p4,{definition:a.definition,selected:a.id===r})})):(0,l.jsx)(e5.w,{assetKey:{path:o}}))})]})}})},SVGSaveZoomLevel=function(e){var t=e.scale;return h.useEffect(function(){try{window.localStorage.setItem(tt,JSON.stringify(t))}catch(e){}},[t]),(0,l.jsx)(l.Fragment,{})},tn=es.ZP.svg.withConfig({componentId:"sc-bfebcf92-0"})(AssetNodeLineageGraph_templateObject()),ti=n(185);function AssetNodeLineage_templateObject(){var e=(0,o._)(["\n  background: ",";\n  border-radius: 8px;\n  color: ",";\n  align-items: center;\n  display: flex;\n  padding: 4px 8px;\n  gap: 4px;\n  position: absolute;\n  right: 12px;\n  top: 70px;\n  z-index: 2;\n"]);return AssetNodeLineage_templateObject=function(){return e},e}var AssetNodeLineage=function(e){var t=e.params,n=e.setParams,i=e.assetKey,r=e.assetGraphData,s=e.graphQueryItems,a=e.requestedDepth,o=h.useMemo(function(){return(0,S.BK)(s,i)},[s,i]),c="upstream"===t.lineageScope?o.upstream:"downstream"===t.lineageScope?o.downstream:Math.max(o.upstream,o.downstream),d=Math.max(1,Math.min(c,a));return(0,l.jsxs)(p.x,{style:{width:"100%",flex:1,minHeight:0,position:"relative"},flex:{direction:"column"},children:[(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",alignItems:"center",gap:12},padding:{left:24,right:12,vertical:12},border:"bottom",children:[(0,l.jsx)($.h,{activeItems:new Set([t.lineageScope||"neighbors"]),buttons:[{id:"neighbors",label:"Nearest Neighbors",icon:"graph_neighbors"},{id:"upstream",label:"Upstream",icon:"graph_upstream"},{id:"downstream",label:"Downstream",icon:"graph_downstream"}],onClick:function(e){return n((0,w._)((0,_._)({},t),{lineageScope:e,lineageDepth:void 0}))}}),(0,l.jsx)(LineageDepthControl,{value:d,onChange:function(e){return n((0,w._)((0,_._)({},t),{lineageDepth:e}))},max:c}),(0,l.jsx)("div",{style:{flex:1}}),Object.values(r.nodes).length>1?(0,l.jsx)(ti.XE,{intent:"none",scope:{all:Object.values(r.nodes).map(function(e){return e.definition})}}):(0,l.jsx)(J.zx,{icon:(0,l.jsx)(H.JO,{name:"materialization"}),disabled:!0,children:"Materialize all"})]}),d<c&&(0,l.jsx)(tr,{children:"Not all upstream/downstream assets shown. Increase the depth to show more."}),(0,l.jsx)(AssetNodeLineageGraph,{assetKey:i,assetGraphData:r,params:t})]})},tr=es.ZP.div.withConfig({componentId:"sc-d2685f41-0"})(AssetNodeLineage_templateObject(),(0,m.gJ)(),(0,m.$)()),LineageDepthControl=function(e){var t=e.value,n=e.max,i=e.onChange,r=(0,E._)(h.useState("".concat(t)),2),s=r[0],a=r[1];h.useEffect(function(){a("".concat(t))},[t]);var commitText=function(){i(Number(s)?Math.min(n,Number(s)):t)};return(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},children:["Graph depth",(0,l.jsxs)(J.zH,{children:[(0,l.jsx)(J.zx,{disabled:t<=1,onClick:function(){return i(t-1)},icon:(0,l.jsx)(H.JO,{name:"subtract"})}),(0,l.jsx)(e4.oi,{min:1,max:n,disabled:n<=1,inputMode:"numeric",style:{width:40,marginLeft:-1,textAlign:"center",height:32,padding:6,borderRadius:0,boxShadow:"none",border:"1px solid ".concat((0,m.im)())},value:s,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){return"Enter"===e.key||"Return"===e.key?commitText():void 0},onBlur:function(){return commitText()}},t),(0,l.jsx)(J.zx,{disabled:t>=n,onClick:function(){return i(t+1)},icon:(0,l.jsx)(H.JO,{name:"add"})}),(0,l.jsx)(J.zx,{disabled:t>=n,onClick:function(){return i(n)},children:"All"})]})]})},ts=n(43180),ta=n(18149),to=n.n(ta),tl=n(75652),tc=n.n(tl),td=n(55113),tu=n(3979),tp=n(68052),tx=n(77516),tm=n(7872),AssetPartitionStatusCheckboxes=function(e){var t=e.counts,n=e.value,i=e.onChange,r=e.allowed,s=e.disabled;return(0,l.jsx)(p.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:r.map(function(e){return(0,l.jsx)(W.X,{"data-testid":(0,tp.N)("partition-status-".concat(e,"-checkbox")),disabled:s,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:n.includes(e)&&!s,label:"".concat((0,tm.be)(e)," (").concat(t[e],")"),onChange:function(){return i(n.includes(e)?n.filter(function(t){return t!==e}):(0,F._)(n).concat([e]))}},e)})})},th=n(311),tf=n(1976),tg=n(54877),tj=[tm.yo.MISSING,tm.yo.MATERIALIZING,tm.yo.MATERIALIZED,tm.yo.FAILED].sort();(i=s||(s={}))[i.CREATION=0]="CREATION",i[i.REVERSE_CREATION=1]="REVERSE_CREATION",i[i.ALPHABETICAL=2]="ALPHABETICAL",i[i.REVERSE_ALPHABETICAL=3]="REVERSE_ALPHABETICAL";var AssetPartitions=function(e){var t,n,i,r,s,a,o=e.assetKey,c=e.assetPartitionDimensions,d=e.params,u=e.setParams,f=e.dataRefreshHint,g=(0,tg.mR)([o],f)[0],j=(0,E._)((0,tf.q)({knownDimensionNames:c,modifyQueryString:!0,assetHealth:g,shouldReadPartitionQueryStringParam:!1}),2),v=j[0],y=j[1],b=(0,E._)(h.useState([]),2),A=b[0],O=b[1],C=(0,E._)((0,D.q)({defaults:{status:(0,F._)(tj).sort().join(",")},encode:function(e){return{status:(0,F._)(e).sort().join(",")}},decode:function(e){return(e.status||"").split(",").filter(function(e){return tj.includes(e)})}}),2),z=C[0],N=C[1],P=v.findIndex(function(e){return(0,th.nv)(e.dimension)}),k=(0,E._)((n=(t={params:d,setParams:u,dimensionCount:v.length,defaultKeyInDimension:function(e){return dimensionKeysInSelection(e)[0]}}).params,i=t.setParams,r=t.dimensionCount,s=t.defaultKeyInDimension,[a=h.useMemo(function(){return n.partition?r>1?n.partition.split("|").filter(Boolean):[n.partition]:[]},[r,n.partition]),function(e,t){for(var r=[],o=0;o<e;o++)r.push(a[o]||s(o));t&&r.push(t),i((0,w._)((0,_._)({},n),{partition:r.join("|")}))}]),2),I=k[0],S=k[1],K=h.useMemo(function(){return g?v.map(function(e,t){return g.rangesForSingleDimension(t,1===t&&I[0]?[(0,tg.mC)(I[0],v[0].dimension)]:-1!==P&&t!==P?v[P].selectedRanges:void 0)}):v.map(function(){return[]})},[g,v,P,I]),dimensionKeysInSelection=function(e){if(!v[e]||-1!==P&&0===v[P].selectedRanges.length)return[];var t,n,i=v[e],r=i.dimension,s=i.selectedRanges,a=r.partitionKeys,o=getSort(A,e,v[e].dimension.type),getSelectionKeys=function(){return tc()(s.flatMap(function(e){var t=e.start,n=e.end;return a.slice(t.idx,n.idx+1)}))};if(to()(tj,z))return sortResults(getSelectionKeys(),o);var l=(0,tg.tP)(K[e],s),c=tc()((t=z.filter(function(e){return e!==tm.yo.MISSING}),l.flatMap(function(e){return t.some(function(t){return e.value.includes(t)})?a.slice(e.start.idx,e.end.idx+1):[]})));if(z.includes(tm.yo.MISSING)){var d=getSelectionKeys();n=a.filter(function(e,t){return d.includes(e)&&(c.includes(e)||!l.some(function(e){return e.start.idx<=t&&e.end.idx>=t&&!e.value.includes(tm.yo.MISSING)}))})}else n=c;return sortResults(n,o)},R=(0,tg.CA)(g,v),M=z.reduce(function(e,t){return e+R[t]},0);return(0,l.jsxs)(l.Fragment,{children:[-1!==P&&(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(tu.x,{partitionKeys:v[P].dimension.partitionKeys,health:{ranges:K[P]},selected:v[P].selectedKeys,setSelected:function(e){return y(v.map(function(t,n){return n===P?(0,w._)((0,_._)({},t),{selectedKeys:e}):t}))},dimensionType:v[P].dimension.type})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between"},border:"bottom",children:[(0,l.jsxs)("div",{"data-testid":(0,tp.N)("partitions-selected"),children:[M.toLocaleString()," Partitions Selected"]}),(0,l.jsx)(AssetPartitionStatusCheckboxes,{counts:R,allowed:tj,value:z,onChange:N})]}),(0,l.jsxs)(p.x,{style:{flex:1,minHeight:0,outline:"none"},flex:{direction:"row"},tabIndex:-1,children:[v.map(function(e,t){var n=getSort(A,t,e.dimension.type);return(0,l.jsxs)(p.x,{style:{display:"flex",flex:1,paddingRight:1,minWidth:200},flex:{direction:"column"},border:"right",background:(0,m.gJ)(),"data-testid":(0,tp.N)("partitions-".concat(e.dimension.name)),children:[(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},background:(0,m.v8)(),border:"bottom",padding:{horizontal:24,vertical:8},children:[(0,l.jsx)("div",{children:"default"!==e.dimension.name&&(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},children:[(0,l.jsx)(H.JO,{name:"partition"}),(0,l.jsx)(V.pm,{children:e.dimension.name})]})}),(0,l.jsx)(U.J,{content:(0,l.jsxs)(q.v2,{children:[(0,l.jsx)(q.sN,{text:(0,l.jsx)(ts.u,{content:"The order in which partitions were created",children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Creation sort"}),(0,l.jsx)(H.JO,{name:"info"})]})}),active:0===n,onClick:function(){O(function(e){var n=(0,F._)(e);return n[t]=0,n})},"data-testId":(0,tp.N)("sort-creation")}),(0,l.jsx)(q.sN,{text:(0,l.jsx)(ts.u,{content:"The order in which partitions were created, reversed",children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Reverse creation sort"}),(0,l.jsx)(H.JO,{name:"info"})]})}),active:1===n,onClick:function(){O(function(e){var n=(0,F._)(e);return n[t]=1,n})},"data-testId":(0,tp.N)("sort-reverse-creation")}),(0,l.jsx)(q.sN,{text:"Alphabetical sort",active:2===n,onClick:function(){O(function(e){var n=(0,F._)(e);return n[t]=2,n})},"data-testId":(0,tp.N)("sort-alphabetical")}),(0,l.jsx)(q.sN,{text:"Reverse alphabetical sort",active:3===n,onClick:function(){O(function(e){var n=(0,F._)(e);return n[t]=3,(0,F._)(n)})},"data-testId":(0,tp.N)("sort-reverse-alphabetical")})]}),position:"bottom-left",children:(0,l.jsx)(td.Kz,{style:{marginRight:"-16px"},"data-testid":"sort-".concat(t),children:(0,l.jsx)(H.JO,{name:"sort_by_alpha",color:(0,m.md)()})})})]}),g?(0,l.jsx)(tx.k,{partitions:dimensionKeysInSelection(t),statusForPartition:function(n){if(1===t&&I[0])return[g.stateForKey([I[0],n])];var i=e.dimension.partitionKeys.indexOf(n);return(0,tg.h1)(K[t],i).filter(function(e){return z.includes(e)})},focusedDimensionKey:I[t],setFocusedDimensionKey:function(e){S(t,e)}}):(0,l.jsx)(p.x,{flex:{alignItems:"center",justifyContent:"center"},style:{flex:1},children:(0,l.jsx)(x.$,{purpose:"section"})})]},e.dimension.name)}),(0,l.jsx)(p.x,{style:{flex:3,minWidth:0,overflowY:"auto"},flex:{direction:"column"},children:d.partition&&I.length===v.length?(0,l.jsx)(AssetPartitionDetailLoader,{assetKey:o,partitionKey:d.partition}):(0,l.jsx)(AssetPartitionDetailEmpty,{})})]})]})},tv=new Intl.Collator(navigator.language,{sensitivity:"base"});function sortResults(e,t){switch(t){case 0:return e;case 1:return(0,F._)(e).reverse();case 2:return(0,F._)(e).sort(tv.compare);case 3:return(0,F._)(e).sort(function(e,t){return-tv.compare(e,t)})}}function getSort(e,t,n){return void 0===e[t]?n===ef.iVC.TIME_WINDOW?1:0:e[t]}var ty=n(35770),AssetPlots=function(e){var t=e.assetKey,n=e.assetHasDefinedPartitions,i=e.params,r=e.setParams,s=(0,eE.fE)(t,i,{assetHasDefinedPartitions:n}),a=s.materializations,o=s.observations,c=s.loadedPartitionKeys,d=s.loading,u=s.xAxis,m=(0,eP.L)(u,a,o,c),f=h.useMemo(function(){return new Set([u])},[u]);return d?(0,l.jsxs)(p.x,{children:[(0,l.jsx)(p.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:"bottom",padding:{vertical:16,left:24,right:12},style:{marginBottom:-1},children:(0,l.jsx)(V.pm,{children:"Asset plots"})}),(0,l.jsx)(p.x,{padding:{vertical:48},children:(0,l.jsx)(x.$,{purpose:"page"})})]}):(0,l.jsxs)(p.x,{children:[(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:"bottom",padding:{vertical:16,left:24,right:12},style:{marginBottom:-1},children:[(0,l.jsx)(V.pm,{children:"Asset plots"}),n?(0,l.jsx)("div",{style:{margin:"-6px 0 "},children:(0,l.jsx)($.h,{activeItems:f,buttons:[{id:"partition",label:"Partitions",icon:"partition"},{id:"time",label:"Events",icon:"materialization"}],onClick:function(e){return r("time"===e?(0,w._)((0,_._)({},i),{partition:void 0,time:""}):(0,w._)((0,_._)({},i),{partition:"",time:void 0}))}})}):null]}),(0,l.jsx)(ty.l,{xAxis:u,groups:m})]})},tb=n(7504),tA=n(55237),t_=n(98655),tw=n(83302),tE=n(30301),tO=n(63626),tC=h.memo(function(e){var t=e.numRequested,n=e.numSkipped,i=e.numDiscarded,r=e.isPartitionedAsset,s=e.selected,a=[t||r?(0,l.jsx)(V.YS,{color:s?(0,m.Ne)():t?(0,m.Ap)():(0,m.$)(),children:r?"".concat((0,tO.J)(t)," launched"):"Launched"},"requested"):null,n||r?(0,l.jsx)(V.YS,{color:s?(0,m.Ne)():n?(0,m.n8)():(0,m.$)(),children:r?"".concat((0,tO.J)(n)," skipped"):"Skipped"},"skipped"):null,i||r?(0,l.jsx)(V.YS,{color:s?(0,m.Ne)():i?(0,m.Yn)():(0,m.$)(),children:r?"".concat((0,tO.J)(i)," discarded"):"Discarded"},"discarded"):null].filter(function(e){return!!e});return(0,l.jsx)(p.x,{flex:{direction:"row",gap:2,alignItems:"center"},style:{whiteSpace:"nowrap"},children:a.map(function(e,t){return[e,(0,l.jsx)(V.YS,{color:s?(0,m.Ne)():(0,m.Aw)(),children:"/"},"spacer-".concat(t))]}).flat().slice(0,-1)})});function AutomaterializeLeftPanel_templateObject(){var e=(0,o._)(["\n  position: sticky;\n  bottom: 0;\n  background: ",";\n  border-right: 1px solid ",";\n  box-shadow: inset 0 1px ",";\n  margin-top: -1px;\n  padding-bottom: 16px;\n  padding-top: 16px;\n  > * {\n    margin-top: 0;\n  }\n"]);return AutomaterializeLeftPanel_templateObject=function(){return e},e}function AutomaterializeLeftPanel_templateObject1(){var e=(0,o._)(["\n  background-color: ",";\n  border: none;\n  border-radius: 8px;\n  color: ",";\n  cursor: pointer;\n  margin: 2px 0;\n  text-align: left;\n  transition:\n    100ms background-color linear,\n    100ms color linear;\n  user-select: none;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:focus,\n  &:active {\n    outline: none;\n  }\n\n  padding: 8px 12px;\n"]);return AutomaterializeLeftPanel_templateObject1=function(){return e},e}var AutomaterializeLeftPanel=function(e){var t=e.assetHasDefinedPartitions,n=e.evaluations,i=e.paginationProps,r=e.onSelectEvaluation,s=e.selectedEvaluation;return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},style:{overflowY:"auto"},children:[(0,l.jsx)(AutomaterializeLeftList,{assetHasDefinedPartitions:t,evaluations:n,onSelectEvaluation:r,selectedEvaluation:s}),n.length?(0,l.jsx)(tz,{children:(0,l.jsx)(tw.b$,(0,_._)({},i))}):null]})},AutomaterializeLeftList=function(e){var t=e.assetHasDefinedPartitions,n=e.evaluations,i=e.onSelectEvaluation,r=e.selectedEvaluation;return(0,l.jsxs)(p.x,{padding:{vertical:8,horizontal:12},style:{flex:1,minHeight:0,overflowY:"auto"},flex:{grow:1,direction:"column"},children:[n.map(function(e){var n=(null==r?void 0:r.evaluationId)===e.evaluationId,s=e.numRequested,a=e.numSkipped,o=e.numDiscarded;return(0,l.jsx)(tN,{onClick:function(){i(e)},$selected:n,children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsx)(tE.v,{timestamp:e.timestamp}),(0,l.jsx)(tC,{numRequested:s,numSkipped:a,numDiscarded:o,isPartitionedAsset:t,selected:n})]})},"skip-".concat(e.timestamp))}),(0,l.jsx)(p.x,{border:"top",padding:{vertical:20,horizontal:12},margin:{top:12},children:(0,l.jsx)(V.YS,{children:"Evaluations are retained for 30 days"})})]})},tz=es.ZP.div.withConfig({componentId:"sc-ab4fa43b-0"})(AutomaterializeLeftPanel_templateObject(),(0,m.gJ)(),(0,m.wL)(),(0,m.wL)()),tN=es.ZP.button.withConfig({componentId:"sc-ab4fa43b-1"})(AutomaterializeLeftPanel_templateObject1(),function(e){return e.$selected?(0,m.Dd)():(0,m.v8)()},function(e){return e.$selected?(0,m.Ne)():(0,m.Ep)()},function(e){return e.$selected?(0,m.i3)():(0,m.Z$)()}),tP=n(56266),tk=n(12084),tI=n(88510),tS=n(66904),tK=n(91195),tR=n(87424),tD=n(84495),tM=n(55658);function AutomaterializeRequestedPartitionsLink_templateObject(){var e=(0,o._)(["\n  query RunStatusAndPartitionKey($filter: RunsFilter) {\n    runsOrError(filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunStatusAndTagsFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment RunStatusAndTagsFragment on Run {\n    id\n    status\n    tags {\n      key\n      value\n    }\n  }\n\n  ","\n"]);return AutomaterializeRequestedPartitionsLink_templateObject=function(){return e},e}function AutomaterializeRequestedPartitionsLink_templateObject1(){var e=(0,o._)(["\n  :focus {\n    outline: none;\n  }\n"]);return AutomaterializeRequestedPartitionsLink_templateObject1=function(){return e},e}var AutomaterializeRequestedPartitionsLink=function(e){var t=e.runIds,n=e.partitionKeys,i=e.intent,r=(0,E._)(h.useState(!1),2),s=r[0],a=r[1],o=(0,E._)(h.useState(""),2),c=o[0],d=o[1],u=c.toLocaleLowerCase(),x=n.length,m=h.useMemo(function(){return""===u?n:n.filter(function(e){return e.toLocaleLowerCase().includes(u)})},[n,u]),f=h.useMemo(function(){return t?1===x?"1 partition launched":"".concat(x," partitions launched"):1===x?"1 partition":"".concat(x," partitions")},[x,t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(N.V,{intent:i,children:f}),(0,l.jsx)(tk.Z,{onClick:function(){return a(!0)},children:(0,l.jsx)(V.YS,{children:"View details"})})]}),(0,l.jsxs)(ej.Vq,{isOpen:s,onClose:function(){return a(!1)},style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,l.jsxs)(p.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:"bottom",children:[(0,l.jsx)("div",{style:{fontSize:"16px"},children:1===x?"1 partition":"".concat(x," partitions")}),x>0?(0,l.jsx)(e4.oi,{icon:"search",value:c,onChange:function(e){return d(e.target.value)},placeholder:"Filter by partition…",style:{width:"252px"}}):null]}),(0,l.jsx)("div",{style:{height:"272px",overflow:"hidden"},children:c&&!m.length?(0,l.jsx)(NoMatchesEmptyState,{queryString:c}):t?(0,l.jsx)(PartitionAndRunList,{runIds:t,partitionKeys:m,intent:i}):(0,l.jsx)(VirtualizedPartitionList,{partitionKeys:n})}),(0,l.jsx)(ej.cN,{topBorder:!0,children:(0,l.jsx)(J.zx,{onClick:function(){return a(!1)},children:"Close"})})]})]})},PartitionAndRunList=function(e){var t=e.runIds,n=e.partitionKeys,i=(0,c.a)(tL,{variables:{filter:{runIds:t}}}),r=i.data,s=i.loading,a=null==r?void 0:r.runsOrError;if(!a)return s?(0,l.jsxs)(p.x,{padding:32,flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,l.jsx)(x.$,{purpose:"body-text"}),(0,l.jsx)("div",{children:"Loading partitions and runs…"})]}):(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(C.t,{icon:"error",title:"Unexpected error",description:"An unexpected error occurred"})});if("PythonError"===a.__typename)return(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(C.t,{icon:"error",title:"Python error",description:(0,l.jsx)(J.zx,{onClick:function(){(0,tS._)({title:"Python error",body:(0,l.jsx)(tP.T9,{error:a})})},children:"View error"})})});if("InvalidPipelineRunsFilterError"===a.__typename||!a.results.length)return(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(C.t,{icon:"error",title:"Runs not found",description:"No runs found for these partitions"})});var o=Object.fromEntries(a.results.map(function(e){var t=e.tags.find(function(e){return e.key===tD.H.Partition});return t?[t.value,e]:null}).filter(function(e){return!!e}));return(0,l.jsx)(VirtualizedPartitionList,{partitionKeys:n,runsByPartitionKey:o})},NoMatchesEmptyState=function(e){var t=e.queryString;return(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(C.t,{icon:"search",title:"No matching partitions",description:(0,l.jsxs)(l.Fragment,{children:["No matching partitions for ",(0,l.jsx)("strong",{children:t})]})})})},VirtualizedPartitionList=function(e){var t=e.partitionKeys,n=e.runsByPartitionKey,i=h.useRef(null),r=(0,tI.MG)({count:t.length,getScrollElement:function(){return i.current},estimateSize:function(){return 40},overscan:10}),s=r.getTotalSize(),a=r.getVirtualItems(),o=!!n;return(0,l.jsx)(tM.W2,{ref:i,style:{padding:"8px 24px"},children:(0,l.jsx)(tM.Nh,{$totalHeight:s,children:a.map(function(e){var i=e.index,r=e.key,s=e.size,a=e.start,c=t[i],d=n?n[c]:null;return(0,l.jsx)(tM.X2,{$height:s,$start:a,children:(0,l.jsxs)(p.x,{style:{height:"100%"},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:i<t.length-1?"bottom":null,children:[(0,l.jsx)("div",{children:t[i]}),o?(0,l.jsx)("div",{children:d?(0,l.jsx)(tT,{to:"/runs/".concat(d.id),children:(0,l.jsx)(tR.Zr,{runId:d.id,status:d.status})}):(0,l.jsx)(N.V,{children:"Run not found"})}):null]})},r)})})})},tL=(0,d.Ps)(AutomaterializeRequestedPartitionsLink_templateObject(),tK.B),tT=(0,es.ZP)(P.rU).withConfig({componentId:"sc-878e49dd-0"})(AutomaterializeRequestedPartitionsLink_templateObject1());function AutomaterializeRunTag_templateObject(){var e=(0,o._)(["\n  query RunStatusOnlyQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n      }\n    }\n  }\n"]);return AutomaterializeRunTag_templateObject=function(){return e},e}var AutomaterializeRunTag=function(e){var t=e.runId,n=(0,c.a)(tF,{variables:{runId:t}}),i=n.data;if(n.loading&&!i)return(0,l.jsx)(N.V,{icon:"spinner",children:"Loading"});var r=null==i?void 0:i.runOrError;return(null==r?void 0:r.__typename)!=="Run"?(0,l.jsx)(N.V,{icon:"error",intent:"danger",children:"Run not found"}):(0,l.jsx)(P.rU,{to:"/runs/".concat(t),children:(0,l.jsx)(tR.Zr,{runId:t,status:r.status})})},tF=(0,d.Ps)(AutomaterializeRunTag_templateObject());function GetEvaluationsQuery_templateObject(){var e=(0,o._)(["\n  query GetEvaluationsQuery($assetKey: AssetKeyInput!, $limit: Int!, $cursor: String) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        autoMaterializePolicy {\n          rules {\n            description\n            decisionType\n            className\n          }\n        }\n        currentAutoMaterializeEvaluationId\n      }\n    }\n\n    autoMaterializeAssetEvaluationsOrError(assetKey: $assetKey, limit: $limit, cursor: $cursor) {\n      ... on AutoMaterializeAssetEvaluationRecords {\n        records {\n          id\n          ...AutoMaterializeEvaluationRecordItem\n        }\n      }\n      ... on AutoMaterializeAssetEvaluationNeedsMigrationError {\n        message\n      }\n    }\n  }\n\n  fragment AutoMaterializeEvaluationRecordItem on AutoMaterializeAssetEvaluationRecord {\n    id\n    evaluationId\n    numRequested\n    numSkipped\n    numDiscarded\n    timestamp\n    runIds\n    rulesWithRuleEvaluations {\n      ...RuleWithEvaluationsFragment\n    }\n    rules {\n      description\n      decisionType\n      className\n    }\n  }\n\n  fragment RuleWithEvaluationsFragment on AutoMaterializeRuleWithRuleEvaluations {\n    rule {\n      description\n      decisionType\n      className\n    }\n    ruleEvaluations {\n      evaluationData {\n        ... on TextRuleEvaluationData {\n          text\n        }\n        ... on ParentMaterializedRuleEvaluationData {\n          updatedAssetKeys {\n            path\n          }\n          willUpdateAssetKeys {\n            path\n          }\n        }\n        ... on WaitingOnKeysRuleEvaluationData {\n          waitingOnAssetKeys {\n            path\n          }\n        }\n      }\n      partitionKeysOrError {\n        ... on PartitionKeys {\n          partitionKeys\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n"]);return GetEvaluationsQuery_templateObject=function(){return e},e}var tV=(0,d.Ps)(GetEvaluationsQuery_templateObject()),t$=n(3440),tU=n.n(t$);function CollapsibleSection_templateObject(){var e=(0,o._)(["\n  background-color: ",";\n  border: 0;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n\n  :focus {\n    outline: none;\n  }\n"]);return CollapsibleSection_templateObject=function(){return e},e}var CollapsibleSection=function(e){var t=e.header,n=e.details,i=e.headerRightSide,r=e.children;return(0,l.jsx)(Collapsible,{header:(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",gap:12,grow:1},children:[(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8,grow:1},children:[(0,l.jsx)(V.pm,{children:t}),n?(0,l.jsx)(ts.u,{content:n,placement:"top",children:(0,l.jsx)(H.JO,{color:(0,m.md)(),name:"info"})}):null]}),i]}),children:(0,l.jsx)(p.x,{padding:{vertical:12,left:32,right:16},children:r})})},Collapsible=function(e){var t=e.header,n=e.children,i=(0,E._)(h.useState(!1),2),r=i[0],s=i[1];return(0,l.jsxs)(p.x,{flex:{direction:"column"},border:"bottom",children:[(0,l.jsx)(tq,{onClick:function(){return s(!r)},children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:6},padding:{vertical:8,horizontal:12},border:"bottom",children:[(0,l.jsx)(H.JO,{name:"arrow_drop_down",style:{transform:r?"rotate(-90deg)":"rotate(0deg)"}}),(0,l.jsx)("div",{children:t})]})}),r?null:n]})},tq=es.ZP.button.withConfig({componentId:"sc-ebdd14eb-0"})(CollapsibleSection_templateObject(),(0,m.gJ)()),tW=n(75375),tJ=n(28090),tH=n(55798);(r=a||(a={}))[r.Updated=0]="Updated",r[r.WillUpdate=1]="WillUpdate";var detailTypeToLabel=function(e){switch(e){case 0:return"Updated";case 1:return"Will update"}},useFilterAssetKeys=function(e,t){var n=t.toLocaleLowerCase();return h.useMemo(function(){return""===n?e:e.filter(function(e){return e.path.some(function(e){return e.toLowerCase().includes(n)})}).sort(j._v)},[e,n])},useFilterPartitionNames=function(e,t){var n=t.toLocaleLowerCase();return h.useMemo(function(){return""===n?e:e.filter(function(e){return e.toLowerCase().includes(n)})},[e,n])},ParentUpdatedLink=function(e){var t=e.updatedAssetKeys,n=e.willUpdateAssetKeys,i=(0,E._)(h.useState(!1),2),r=i[0],s=i[1],o=(0,E._)(h.useState(""),2),c=o[0],d=o[1],u=t.length+n.length,x=useFilterAssetKeys(t,c),m=useFilterAssetKeys(n,c),f=x.length+m.length,g=h.useMemo(function(){return(0,F._)((0,F._)(x).sort(j._v).map(function(e){return{assetKey:e,detailType:a.Updated}})).concat((0,F._)((0,F._)(m).sort(j._v).map(function(e){return{assetKey:e,detailType:a.WillUpdate}})))},[x,m]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tk.Z,{onClick:function(){return s(!0)},children:1===u?"1 parent updated":"".concat(u," parents updated")}),(0,l.jsx)(tH.Vm,{isOpen:r,setIsOpen:s,header:(0,l.jsx)(tH.Lv,{title:1===u?"1 asset":"".concat(u," assets"),showSearch:u>0,placeholder:"Filter by asset key…",queryString:c,setQueryString:d}),content:c&&!f?(0,l.jsx)(tH.LS,{title:"No matching asset keys",description:(0,l.jsxs)(l.Fragment,{children:["No matching asset keys for ",(0,l.jsx)("strong",{children:c})]})}):(0,l.jsx)(tW.Y,{items:g,renderItem:function(e){return(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)(tJ.R,{path:e.assetKey.path,icon:"asset"}),(0,l.jsxs)("span",{children:["(",detailTypeToLabel(e.detailType),")"]})]})}})})]})};function VirtualizedAssetPartitionListForDialog_templateObject(){var e=(0,o._)(["\n  background-color: transparent;\n  cursor: pointer;\n  padding: 0;\n  border: 0;\n  display: flex;\n  height: 100%;\n  width: 100%;\n  flex-direction: row;\n  align-items: center;\n  gap: 8px;\n\n  :focus {\n    outline: none;\n  }\n"]);return VirtualizedAssetPartitionListForDialog_templateObject=function(){return e},e}function VirtualizedAssetPartitionListForDialog(e){var t=e.assetKeysByPartition,n=e.renderPartitionDetail,i=e.renderItem,r=(0,E._)(h.useState(function(){return new Set([])}),2),s=r[0],a=r[1],o=h.useRef(null),c=h.useMemo(function(){var e=[];return Object.keys(t).sort(function(e,t){return eK.Bl.compare(e,t)}).forEach(function(n){var i=t[n],r=s.has(n);if(e.push({type:"partition-name",partitionName:n,expanded:r,assetCount:i.length}),r){var a=i.map(function(e){return{type:"asset-key",assetKey:e}});e.push.apply(e,(0,F._)(a))}}),e},[t,s]),d=(0,tI.MG)({count:c.length,getScrollElement:function(){return o.current},estimateSize:function(){return 40},overscan:10}),u=h.useCallback(function(e){a(function(t){var n=new Set(Array.from(t));return t.has(e)?n.delete(e):n.add(e),n})},[]),x=d.getTotalSize(),m=d.getVirtualItems();return(0,l.jsx)(tM.W2,{ref:o,style:{padding:"8px 24px"},children:(0,l.jsx)(tM.Nh,{$totalHeight:x,children:m.map(function(e){var t=e.index,r=e.key,s=e.size,a=e.start,o=c[t];return(0,l.jsx)(tM.X2,{$height:s,$start:a,children:(0,l.jsx)(p.x,{style:{height:"100%"},flex:{direction:"row",alignItems:"center"},border:t<c.length-1?"bottom":null,children:"partition-name"===o.type?(0,l.jsx)(ExpandablePartitionName,{partitionName:o.partitionName,expanded:o.expanded,detail:n(o),onToggle:u}):(0,l.jsx)(p.x,{padding:{left:24},children:i(o.assetKey)})})},r)})})})}var ExpandablePartitionName=function(e){var t=e.partitionName,n=e.detail,i=e.expanded,r=e.onToggle;return(0,l.jsxs)(tB,{onClick:function(){return r(t)},children:[(0,l.jsx)(H.JO,{name:"arrow_drop_down",style:{transform:i?"rotate(0deg)":"rotate(-90deg)"}}),(0,l.jsx)("div",{children:t}),(0,l.jsx)("div",{children:n})]})},tB=es.ZP.button.withConfig({componentId:"sc-cbda4ec8-0"})(VirtualizedAssetPartitionListForDialog_templateObject()),ParentUpdatedPartitionLink=function(e){var t=e.updatedAssetKeys,n=e.willUpdateAssetKeys,i=(0,E._)(h.useState(!1),2),r=i[0],s=i[1],o=(0,E._)(h.useState(""),2),c=o[0],d=o[1],u=h.useMemo(function(){return Array.from(new Set((0,F._)(Object.keys(t)).concat((0,F._)(Object.keys(n)))))},[t,n]),x=u.length,m=useFilterPartitionNames(u,c),f=h.useMemo(function(){return Object.fromEntries(m.map(function(e){return[e,(0,F._)((t[e]||[]).sort(j._v).map(function(e){return{assetKey:e,detailType:a.Updated}})).concat((0,F._)((n[e]||[]).sort(j._v).map(function(e){return{assetKey:e,detailType:a.WillUpdate}})))]}))},[t,n,m]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(N.V,{children:1===x?"1 partition":"".concat(x," partitions")}),(0,l.jsx)(tk.Z,{onClick:function(){return s(!0)},children:(0,l.jsx)(V.YS,{children:"View details"})})]}),(0,l.jsx)(tH.Vm,{isOpen:r,setIsOpen:s,header:(0,l.jsx)(tH.Lv,{title:1===x?"1 partition":"".concat(x," partitions"),placeholder:"Filter by partition…",queryString:c,setQueryString:d,showSearch:x>0}),content:c&&!m.length?(0,l.jsx)(tH.LS,{title:"No matching partitions",description:(0,l.jsxs)(l.Fragment,{children:["No matching partitions for ",(0,l.jsx)("strong",{children:c})]})}):(0,l.jsx)(VirtualizedAssetPartitionListForDialog,{assetKeysByPartition:f,renderPartitionDetail:function(e){var t=e.assetCount;return 1===t?"(1 parent updated)":"(".concat(t," parents updated)")},renderItem:function(e){return(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)(tJ.R,{path:e.assetKey.path,icon:"asset"}),(0,l.jsxs)("span",{children:["(",detailTypeToLabel(e.detailType),")"]})]})}})})]})},WaitingOnAssetKeysLink=function(e){var t=e.assetKeys,n=(0,E._)(h.useState(!1),2),i=n[0],r=n[1],s=(0,E._)(h.useState(""),2),a=s[0],o=s[1],c=t.length,d=useFilterAssetKeys(t,a);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tk.Z,{onClick:function(){return r(!0)},children:1===c?"Waiting on 1 asset":"Waiting on ".concat(c," assets")}),(0,l.jsx)(tH.Vm,{isOpen:i,setIsOpen:r,header:(0,l.jsx)(tH.Lv,{title:1===c?"1 asset":"".concat(c," assets"),queryString:a,setQueryString:o,showSearch:c>0,placeholder:"Filter by asset key…"}),content:a&&!d.length?(0,l.jsx)(tH.LS,{title:"No matching asset keys",description:(0,l.jsxs)(l.Fragment,{children:["No matching asset keys for ",(0,l.jsx)("strong",{children:a})]})}):(0,l.jsx)(tW.Y,{items:d,renderItem:function(e){return(0,l.jsx)(tJ.R,{path:e.path,icon:"asset"})}})})]})},WaitingOnAssetKeysPartitionLink=function(e){var t=e.assetKeysByPartition,n=(0,E._)(h.useState(!1),2),i=n[0],r=n[1],s=(0,E._)(h.useState(""),2),a=s[0],o=s[1],c=Object.keys(t),d=c.length,u=useFilterPartitionNames(c,a),x=h.useMemo(function(){return Object.fromEntries(u.map(function(e){return[e,(0,F._)(t[e]).sort(j._v)]}))},[t,u]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(N.V,{intent:"warning",children:1===d?"1 partition":"".concat(d," partitions")}),(0,l.jsx)(tk.Z,{onClick:function(){return r(!0)},children:(0,l.jsx)(V.YS,{children:"View details"})})]}),(0,l.jsx)(tH.Vm,{isOpen:i,setIsOpen:r,header:(0,l.jsx)(tH.Lv,{title:1===d?"1 partition":"".concat(d," partitions"),queryString:a,setQueryString:o,showSearch:d>0,placeholder:"Filter by partition…"}),content:a&&!u.length?(0,l.jsx)(tH.LS,{title:"No matching partitions",description:(0,l.jsxs)(l.Fragment,{children:["No matching partitions for ",(0,l.jsx)("strong",{children:a})]})}):(0,l.jsx)(VirtualizedAssetPartitionListForDialog,{assetKeysByPartition:x,renderPartitionDetail:function(e){var t=e.assetCount;return 1===t?"(Waiting on 1 asset)":"(Waiting on ".concat(t," assets)")},renderItem:function(e){return(0,l.jsx)(tJ.R,{path:e.path,icon:"asset"})}})})]})},RuleEvaluationOutcome=function(e){var t=e.text,n=e.met,i=e.rightElement;return(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},style:{height:24},children:[(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)(H.JO,{name:n?"done":"close",color:n?(0,m.Ep)():(0,m.$)()}),(0,l.jsxs)("div",{style:{color:n?(0,m.Ep)():(0,m.$)()},children:[t.slice(0,1).toUpperCase(),t.slice(1)]})]}),i]})},tZ=[{decisionType:ef.tpz.MATERIALIZE,header:"Materialization conditions met",details:"These conditions trigger a materialization, unless they are blocked by a skip or discard condition."},{decisionType:ef.tpz.SKIP,header:"Skip conditions met",details:"Skips will materialize in a future evaluation, once the skip condition is resolved."},{decisionType:ef.tpz.DISCARD,header:"Discard conditions met",details:"Discarded partitions will not be materialized unless new materialization conditions occur. You may want to run a manual backfill to respond to the materialize conditions.",intent:"danger",partitionedOnly:!0}],RuleEvaluationOutcomes=function(e){var t=e.rules,n=e.ruleEvaluations,i=e.assetHasDefinedPartitions,r=tU()(t,function(e){return e.decisionType});return(0,l.jsx)(l.Fragment,{children:tZ.filter(function(e){return r[e.decisionType]&&(i||!e.partitionedOnly)}).map(function(e){return(0,l.jsx)(CollapsibleSection,{header:e.header,details:e.details,children:(0,l.jsx)(p.x,{flex:{direction:"column",gap:8},children:(r[e.decisionType]||[]).map(function(t,r){var s,a=t.description,o=(null===(s=n.find(function(e){var t;return(null===(t=e.rule)||void 0===t?void 0:t.description)===a}))||void 0===s?void 0:s.ruleEvaluations)||[];return(0,l.jsx)(RuleEvaluationOutcome,{text:a,met:o.length>0,rightElement:i?(0,l.jsx)(RightElementForPartitionedEvaluations,{evaluations:o,intent:e.intent}):(0,l.jsx)(RightElementForEvaluations,{evaluations:o,intent:e.intent})},r)})})},e.decisionType)})})},RightElementForEvaluations=function(e){var t=e.evaluations.map(function(e){return e.evaluationData}).find(Boolean);if(!t)return(0,l.jsx)("div",{style:{color:(0,m.Aw)()},children:"–"});switch(t.__typename){case"ParentMaterializedRuleEvaluationData":return(0,l.jsx)(ParentUpdatedLink,{updatedAssetKeys:t.updatedAssetKeys||[],willUpdateAssetKeys:t.willUpdateAssetKeys||[]});case"WaitingOnKeysRuleEvaluationData":return(0,l.jsx)(WaitingOnAssetKeysLink,{assetKeys:t.waitingOnAssetKeys||[]});case"TextRuleEvaluationData":return(0,l.jsx)("span",{children:t.text});default:(0,eK.UT)(t)}return(0,l.jsx)("span",{})},partitionKeysOf=function(e){var t;return(null===(t=e.partitionKeysOrError)||void 0===t?void 0:t.__typename)==="PartitionKeys"?e.partitionKeysOrError.partitionKeys:[]},RightElementForPartitionedEvaluations=function(e){var t,n=e.evaluations,i=e.intent,r=n.filter(function(e){return!!e.evaluationData}),s=null===(t=r[0])||void 0===t?void 0:t.evaluationData;if(!s){var a=n.flatMap(partitionKeysOf);return a.length?(0,l.jsx)(AutomaterializeRequestedPartitionsLink,{partitionKeys:a,intent:i}):(0,l.jsx)("div",{style:{color:(0,m.Aw)()},children:"–"})}var o=s.__typename;switch(o){case"ParentMaterializedRuleEvaluationData":var c=Object.fromEntries(r.flatMap(function(e){return partitionKeysOf(e).map(function(t){var n;return[t,(null===(n=e.evaluationData)||void 0===n?void 0:n.__typename)==="ParentMaterializedRuleEvaluationData"&&e.evaluationData.updatedAssetKeys||[]]})})),d=Object.fromEntries(r.flatMap(function(e){return partitionKeysOf(e).map(function(t){var n;return[t,(null===(n=e.evaluationData)||void 0===n?void 0:n.__typename)==="ParentMaterializedRuleEvaluationData"&&e.evaluationData.willUpdateAssetKeys||[]]})}));return(0,l.jsx)(ParentUpdatedPartitionLink,{updatedAssetKeys:c,willUpdateAssetKeys:d});case"WaitingOnKeysRuleEvaluationData":var u=Object.fromEntries(r.flatMap(function(e){return partitionKeysOf(e).map(function(t){var n;return[t,(null===(n=e.evaluationData)||void 0===n?void 0:n.__typename)==="WaitingOnKeysRuleEvaluationData"&&e.evaluationData.waitingOnAssetKeys||[]]})}));return(0,l.jsx)(WaitingOnAssetKeysPartitionLink,{assetKeysByPartition:u});case"TextRuleEvaluationData":return(0,l.jsx)("span",{children:s.text});default:(0,eK.UT)(o)}},tG={__typename:"no_conditions_met",evaluationId:0,amount:0,endTimestamp:0,startTimestamp:0},extractRequestedPartitionKeys=function(e){var t=[],n=[];e.forEach(function(e){var i=e.rule,r=e.ruleEvaluations.flatMap(function(e){var t;return(null===(t=e.partitionKeysOrError)||void 0===t?void 0:t.__typename)==="PartitionKeys"?e.partitionKeysOrError.partitionKeys:[]});i.decisionType===ef.tpz.MATERIALIZE?t=t.concat(r):n=n.concat(r)});var i=new Set(n);return new Set(t.filter(function(e){return!i.has(e)}))},AutomaterializeMiddlePanel=function(e){var t,n,i,r=e.assetKey,s=e.assetHasDefinedPartitions,a=e.selectedEvaluationId,o=(0,c.a)(tV,{variables:{assetKey:r,cursor:a?"".concat(a+1):void 0,limit:2}}),d=o.data,u=o.loading,x=o.error;if(u&&!d)return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{style:{flex:"0 0 48px"},border:"bottom",padding:{horizontal:16},flex:{alignItems:"center",justifyContent:"space-between"},children:(0,l.jsx)(V.pm,{children:"Result"})})});if(x)return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:24,children:(0,l.jsx)(tP.Vx,{children:JSON.stringify(x)})})});if((null==d?void 0:null===(t=d.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)==="AutoMaterializeAssetEvaluationNeedsMigrationError")return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,l.jsx)(C.t,{icon:"error",title:"Error",description:d.autoMaterializeAssetEvaluationsOrError.message})})});var m=(null==d?void 0:d.assetNodeOrError.__typename)==="AssetNode"&&(null===(n=d.assetNodeOrError.autoMaterializePolicy)||void 0===n?void 0:n.rules)||[],h=((null==d?void 0:null===(i=d.autoMaterializeAssetEvaluationsOrError)||void 0===i?void 0:i.records)||[]).find(function(e){return e.evaluationId===a})||tG;return(0,l.jsx)(AutomaterializeMiddlePanelWithData,{currentRules:m,assetHasDefinedPartitions:s,selectedEvaluation:h})},AutomaterializeMiddlePanelWithData=function(e){var t=e.currentRules,n=e.selectedEvaluation,i=e.assetHasDefinedPartitions,r=(null==n?void 0:n.__typename)==="AutoMaterializeAssetEvaluationRecord"?n.runIds:[],s=(null==n?void 0:n.__typename)==="AutoMaterializeAssetEvaluationRecord"?n.rulesWithRuleEvaluations:[],a=(null==n?void 0:n.__typename)==="AutoMaterializeAssetEvaluationRecord"&&n.rules?n.rules:t;return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},children:[(0,l.jsxs)(p.x,{style:{flex:"0 0 48px"},padding:{horizontal:16},border:"bottom",flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)(V.pm,{children:"Result"}),(0,l.jsx)("div",{children:0===r.length?null:i?(0,l.jsx)(AutomaterializeRequestedPartitionsLink,{runIds:r,partitionKeys:Array.from(extractRequestedPartitionKeys(s)),intent:"success"}):(0,l.jsx)(AutomaterializeRunTag,{runId:r[0]})})]}),(0,l.jsx)(RuleEvaluationOutcomes,{rules:a,ruleEvaluations:s,assetHasDefinedPartitions:i})]})};function AutomaterializeRightPanel_templateObject(){var e=(0,o._)(["\n  query GetPolicyInfoQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        freshnessPolicy {\n          maximumLagMinutes\n          cronSchedule\n          cronScheduleTimezone\n        }\n        autoMaterializePolicy {\n          policyType\n          maxMaterializationsPerMinute\n          rules {\n            description\n            decisionType\n          }\n        }\n      }\n    }\n  }\n"]);return AutomaterializeRightPanel_templateObject=function(){return e},e}var AutomaterializeRightPanel=function(e){var t=e.assetKey,n=(0,c.a)(tQ,{variables:{assetKey:t}});(0,tA.C4)(n,tA.dT);var i=n.data,r=n.error;return(0,l.jsxs)(p.x,{flex:{direction:"column"},style:{width:"294px",height:"100%"},border:"left",children:[(0,l.jsx)(p.x,{padding:16,border:"bottom",children:(0,l.jsx)(V.pm,{children:"Overview"})}),(0,l.jsx)("div",{style:{overflowY:"auto"},children:r?(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(tP.Vx,{children:JSON.stringify(r)})}):i?"AssetNotFoundError"===i.assetNodeOrError.__typename?(0,l.jsx)(f.l_,{to:"/assets"}):(0,l.jsxs)(l.Fragment,{children:[i.assetNodeOrError.autoMaterializePolicy?(0,l.jsx)(RightPanelSection,{title:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:["Auto-materialize policy",(0,l.jsx)(eq.W,{policy:i.assetNodeOrError.autoMaterializePolicy})]}),children:(0,l.jsx)(V.uT,{style:{flex:1},children:"This asset will be automatically materialized when at least one of the conditions to the left is met and no skip conditions are met."})}):(0,l.jsx)(p.x,{padding:8,children:(0,l.jsx)(C.t,{title:"No auto-materialize policy found",shrinkable:!0,description:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[(0,l.jsx)("div",{children:"An auto-materialize policy specifies how Dagster should attempt to keep an asset up-to-date."}),(0,l.jsx)("div",{children:(0,l.jsx)(J.fr,{href:"https://docs.dagster.io/_apidocs/assets#dagster.AutoMaterializePolicy",target:"_blank",rel:"noreferrer",icon:(0,l.jsx)(H.JO,{name:"open_in_new"}),children:"View documentation"})})]})})}),i.assetNodeOrError.freshnessPolicy?(0,l.jsxs)(RightPanelSection,{title:"Freshness policy",children:[(0,l.jsx)(RightPanelDetail,{title:"Maximum lag minutes",value:i.assetNodeOrError.freshnessPolicy.maximumLagMinutes}),(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:["This asset will be considered late if it is not materialized within"," ",i.assetNodeOrError.freshnessPolicy.maximumLagMinutes," minutes of it’s upstream dependencies.",(0,l.jsx)(P.rU,{to:(0,eV.p)(t,{view:"lineage",lineageScope:"upstream"}),children:"View upstream assets"})]})]}):(0,l.jsx)(p.x,{padding:8,children:(0,l.jsx)(C.t,{title:"No freshness policy found",shrinkable:!0,description:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[(0,l.jsx)("div",{children:"A FreshnessPolicy specifies how up-to-date you want a given asset to be."}),(0,l.jsx)("div",{children:(0,l.jsx)(J.fr,{href:"https://docs.dagster.io/_apidocs/assets#dagster.FreshnessPolicy",target:"_blank",rel:"noreferrer",icon:(0,l.jsx)(H.JO,{name:"open_in_new"}),children:"View documentation"})})]})})})]}):(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,l.jsx)(x.$,{purpose:"section"})})})]})},RightPanelSection=function(e){var t=e.title,n=e.children;return(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},border:"bottom",padding:{vertical:12,horizontal:16},children:[(0,l.jsx)(V.pm,{children:t}),n]})},RightPanelDetail=function(e){var t=e.title,n=e.value;return(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsx)("div",{children:t}),(0,l.jsx)(V.fv,{style:{fontSize:"16px",fontWeight:500},children:n})]})},tQ=(0,d.Ps)(AutomaterializeRightPanel_templateObject()),tY=n(65767);function AssetAutomaterializePolicyPage_templateObject(){var e=(0,o._)(["\n  a span {\n    white-space: normal;\n  }\n"]);return AssetAutomaterializePolicyPage_templateObject=function(){return e},e}var AssetAutomaterializePolicyPage=function(e){var t,n,i=e.assetKey,r=e.assetHasDefinedPartitions,s=(0,tY.l)({nextCursorForResult:function(e){var t,n;if((null===(t=e.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)==="AutoMaterializeAssetEvaluationRecords")return null===(n=e.autoMaterializeAssetEvaluationsOrError.records[29])||void 0===n?void 0:n.evaluationId.toString()},getResultArray:function(e){var t;return(null==e?void 0:null===(t=e.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)==="AutoMaterializeAssetEvaluationRecords"?e.autoMaterializeAssetEvaluationsOrError.records:[]},variables:{assetKey:i},query:tV,pageSize:30}),a=s.queryResult,o=s.paginationProps;(0,tA.C4)(a,tA.dT);var c=h.useMemo(function(){var e,t,n,i,r;return(null===(t=a.data)||void 0===t?void 0:null===(e=t.autoMaterializeAssetEvaluationsOrError)||void 0===e?void 0:e.__typename)==="AutoMaterializeAssetEvaluationRecords"&&(null===(i=a.data)||void 0===i?void 0:null===(n=i.assetNodeOrError)||void 0===n?void 0:n.__typename)==="AssetNode"?{evaluations:null===(r=a.data)||void 0===r?void 0:r.autoMaterializeAssetEvaluationsOrError.records,currentAutoMaterializeEvaluationId:a.data.assetNodeOrError.currentAutoMaterializeEvaluationId}:{evaluations:[],currentAutoMaterializeEvaluationId:null}},[null===(t=a.data)||void 0===t?void 0:t.autoMaterializeAssetEvaluationsOrError,null===(n=a.data)||void 0===n?void 0:n.assetNodeOrError]).evaluations,d=!o.hasPrevCursor,u=(0,E._)((0,D.q)({queryKey:"evaluation",decode:function(e){var t=parseInt(e.evaluation);return isNaN(t)?void 0:t}}),2),x=u[0],f=u[1],g=h.useMemo(function(){return void 0===x&&d?c[0]:c.find(function(e){return e.evaluationId===x})},[x,d,c]);return(0,l.jsxs)(tX,{style:{flex:1,minHeight:0,color:(0,m.$)(),overflow:"hidden"},flex:{direction:"column"},children:[(0,l.jsx)(p.x,{padding:{horizontal:24,vertical:12},border:"bottom",children:(0,l.jsx)(t_.$,{})}),(0,l.jsxs)(p.x,{flex:{direction:"row"},style:{minHeight:0,flex:1},children:[(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},children:[(0,l.jsx)(p.x,{flex:{alignItems:"center"},padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(V.pm,{children:"Evaluation history"})}),(0,l.jsxs)(p.x,{flex:{direction:"row"},style:{flex:1,minHeight:0},children:[(0,l.jsx)(p.x,{border:"right",flex:{grow:0,direction:"column"},style:{flex:"0 0 296px"},children:(0,l.jsx)(AutomaterializeLeftPanel,{assetHasDefinedPartitions:r,evaluations:c,paginationProps:o,onSelectEvaluation:function(e){f(e.evaluationId)},selectedEvaluation:g})}),(0,l.jsx)(p.x,{flex:{grow:1},style:{minHeight:0,overflowY:"auto"},children:(0,l.jsx)(AutomaterializeMiddlePanel,{assetKey:i,assetHasDefinedPartitions:r,selectedEvaluationId:(null==g?void 0:g.evaluationId)||x})})]})]}),(0,l.jsx)(p.x,{border:"left",children:(0,l.jsx)(AutomaterializeRightPanel,{assetKey:i})})]})]})},tX=(0,es.ZP)(p.x).withConfig({componentId:"sc-128272d1-0"})(AssetAutomaterializePolicyPage_templateObject()),t0=n(87631),t1=n(6411),t2=n(90894),t4=n(55782);function AssetCheckDetailModal_templateObject(){var e=(0,o._)(["\n  fragment AssetCheckExecutionFragment on AssetCheckExecution {\n    id\n    runId\n    status\n    stepKey\n    timestamp\n    evaluation {\n      severity\n      timestamp\n      targetMaterialization {\n        timestamp\n        runId\n      }\n      metadataEntries {\n        ...MetadataEntryFragment\n      }\n    }\n  }\n  ","\n"]);return AssetCheckDetailModal_templateObject=function(){return e},e}function AssetCheckDetailModal_templateObject1(){var e=(0,o._)(["\n  query AssetCheckDetailsQuery(\n    $assetKey: AssetKeyInput!\n    $checkName: String!\n    $limit: Int!\n    $cursor: String\n  ) {\n    assetCheckExecutions(\n      assetKey: $assetKey\n      checkName: $checkName\n      limit: $limit\n      cursor: $cursor\n    ) {\n      id\n      ...AssetCheckExecutionFragment\n    }\n  }\n  ","\n"]);return AssetCheckDetailModal_templateObject1=function(){return e},e}var AssetCheckDetailModal=function(e){var t=e.assetKey,n=e.checkName,i=e.onClose;return(0,l.jsx)(ej.Vq,{isOpen:!!n,canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:i,icon:"asset_check",title:"".concat(n," run history"),style:{width:"80%",minWidth:"800px"},children:n?(0,l.jsx)(AssetCheckDetailModalImpl,{checkName:n,assetKey:t}):null})},AssetCheckDetailModalImpl=function(e){var t,n=e.assetKey,i=e.checkName;(0,g.Px)(),(0,v.j)("Asset Check | ".concat(i));var r=(0,tY.l)({query:t6,variables:{assetKey:n,checkName:i},nextCursorForResult:function(e){var t;if(e)return null===(t=e.assetCheckExecutions[4])||void 0===t?void 0:t.id.toString()},getResultArray:function(e){return e&&e.assetCheckExecutions||[]},pageSize:5}),s=r.queryResult,a=r.paginationProps;(0,tA.C4)(s,tA.dT);var o=null===(t=s.data)||void 0===t?void 0:t.assetCheckExecutions;return o?(0,l.jsx)(p.x,{flex:{direction:"column"},children:o?o.length?(0,l.jsxs)("div",{children:[(0,l.jsxs)(eg.i,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:"200px"},children:"Timestamp"}),(0,l.jsx)("th",{style:{width:"200px"},children:"Target materialization"}),(0,l.jsx)("th",{style:{width:"160px"},children:"Result"}),(0,l.jsx)("th",{children:"Evaluation metadata"})]})}),(0,l.jsx)("tbody",{children:o.map(function(e){var t,n,i;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(null===(t=e.evaluation)||void 0===t?void 0:t.timestamp)?(0,l.jsx)(P.rU,{to:(0,X.tA)({id:e.runId},{stepKey:e.stepKey,timestamp:e.timestamp}),children:(0,l.jsx)(tE.v,{timestamp:e.evaluation.timestamp})}):(0,l.jsx)(tE.v,{timestamp:e.timestamp})}),(0,l.jsx)("td",{children:(null===(n=e.evaluation)||void 0===n?void 0:n.targetMaterialization)?(0,l.jsx)(P.rU,{to:"/runs/".concat(e.evaluation.targetMaterialization.runId),children:(0,l.jsx)(tE.v,{timestamp:e.evaluation.targetMaterialization.timestamp})}):" - "}),(0,l.jsx)("td",{children:(0,l.jsx)(t4.q,{execution:e})}),(0,l.jsx)("td",{children:(0,l.jsx)(MetadataCell,{metadataEntries:null===(i=e.evaluation)||void 0===i?void 0:i.metadataEntries})})]},e.id)})})]}),(0,l.jsx)("div",{style:{paddingBottom:"16px"},children:(0,l.jsx)(tw.pI,(0,_._)({},a))})]}):(0,l.jsx)(NoExecutions,{}):(0,l.jsx)(p.x,{padding:48,children:(0,l.jsx)(x.$,{purpose:"section"})})}):(0,l.jsx)(p.x,{flex:{direction:"column"},padding:24,children:(0,l.jsx)(x.$,{purpose:"section"})})};function MetadataCell(e){var t,n,i=e.metadataEntries,r=(0,E._)(h.useState(!1),2),s=r[0],a=r[1];return i&&i.length?!(i.length>1)&&(t3.includes(null===(t=i[0])||void 0===t?void 0:t.__typename)||(null===(n=i[0])||void 0===n?void 0:n.__typename)==="TableMetadataEntry"&&i[0].table.records.length<=1)?(0,l.jsx)(ea.gD,{entries:i}):(0,l.jsxs)("div",{children:[(0,l.jsx)(J.zx,{onClick:function(){return a(!0)},children:"View metadata"}),(0,l.jsxs)(ej.Vq,{title:"Metadata",isOpen:s,onClose:function(){return a(!1)},canOutsideClickClose:!0,canEscapeKeyClose:!0,style:{width:"80%",minWidth:"800px"},children:[(0,l.jsx)(ej.a7,{children:(0,l.jsx)(ea.gD,{entries:i})}),(0,l.jsx)(ej.cN,{topBorder:!0,children:(0,l.jsx)(J.zx,{onClick:function(){return a(!1)},intent:"primary",children:"Close"})})]})]}):(0,l.jsx)("span",{children:" - "})}var t8=(0,d.Ps)(AssetCheckDetailModal_templateObject(),ea.it),t6=(0,d.Ps)(AssetCheckDetailModal_templateObject1(),t8);function MigrationRequired(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(C.t,{icon:"warning",title:"Migration required",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsxs)(V.pN,{color:(0,m.$)(),style:{padding:"6px 0"},children:["A database schema migration is required to use asset checks. Run"," ",(0,l.jsx)(V.fv,{children:"dagster instance migrate"}),"."]})})})})}function AgentUpgradeRequired(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(C.t,{icon:"warning",title:"Agent upgrade required",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsx)(V.pN,{color:(0,m.$)(),style:{padding:"6px 0"},children:"Checks require Dagster Cloud Agent version 1.5 or higher. Upgrade your agent(s) to use checks."})})})})}function NeedsUserCodeUpgrade(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(C.t,{icon:"warning",title:"Upgrade required",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsx)(V.pN,{color:(0,m.$)(),style:{padding:"6px 0"},children:"Checks aren't supported with dagster versions before 1.5. Upgrade the dagster library in this code location to use them."})})})})}function NoChecks(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(C.t,{icon:"asset_check",title:"No checks found for this asset",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsx)(V.pN,{color:(0,m.$)(),style:{padding:"6px 0"},children:"Asset Checks run after a materialization and can verify a particular property of a data asset. Checks can help ensure that the contents of each data asset is correct."})})})})}function NoExecutions(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(C.t,{icon:"asset_check",title:"No executions found for this check",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsx)(V.pN,{color:(0,m.$)(),style:{padding:"6px 0"},children:"No executions found. Materialize this asset and the check will run automatically."})})})})}var t3=["BoolMetadataEntry","FloatMetadataEntry","IntMetadataEntry","TextMetadataEntry","UrlMetadataEntry","PathMetadataEntry","NullMetadataEntry","TableSchemaMetadataEntry"],t5=n(73172);function VirtualizedAssetCheckTable_templateObject(){var e=(0,o._)(["\n  text-overflow: ellipsis;\n  max-width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n"]);return VirtualizedAssetCheckTable_templateObject=function(){return e},e}function VirtualizedAssetCheckTable_templateObject1(){var e=(0,o._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return VirtualizedAssetCheckTable_templateObject1=function(){return e},e}function VirtualizedAssetCheckTable_templateObject2(){var e=(0,o._)(["\n  fragment AssetCheckTableFragment on AssetCheck {\n    name\n    description\n    canExecuteIndividually\n    executionForLatestMaterialization {\n      ...AssetCheckExecutionFragment\n    }\n  }\n  ","\n"]);return VirtualizedAssetCheckTable_templateObject2=function(){return e},e}var VirtualizedAssetCheckTable=function(e){var t=e.assetNode,n=e.rows,i=h.useRef(null),r=n.length,s=(0,tI.MG)({count:r,getScrollElement:function(){return i.current},estimateSize:function(){return 64},overscan:5}),a=s.getTotalSize(),o=s.getVirtualItems();return(0,l.jsx)("div",{style:{overflow:"hidden"},children:(0,l.jsxs)(tM.W2,{ref:i,children:[(0,l.jsx)(VirtualizedAssetCheckHeader,{}),(0,l.jsx)(tM.Nh,{$totalHeight:a,children:o.map(function(e){var i=e.index,r=e.key,s=e.size,a=e.start,o=n[i];return(0,l.jsx)(VirtualizedAssetCheckRow,{assetNode:t,height:s,start:a,row:o},r)})})]})})},t7="2fr 150px 1fr 1.5fr 120px",VirtualizedAssetCheckRow=function(e){var t,n,i=e.assetNode,r=e.height,s=e.start,a=e.row,o=a.executionForLatestMaterialization,c=null==o?void 0:null===(t=o.evaluation)||void 0===t?void 0:t.timestamp;return(0,l.jsx)(tM.X2,{$height:r,$start:s,"data-testid":(0,tp.N)("row-#TODO_USE_CHECK_ID"),children:(0,l.jsxs)(ne,{border:"bottom",children:[(0,l.jsx)(tM.E5,{style:{flexDirection:"row",alignItems:"center"},children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsx)(P.rU,{to:(0,eV.A)({assetKey:i.assetKey,name:a.name}),children:(0,l.jsx)(V.pN,{children:a.name})}),(0,l.jsx)(t9,{children:a.description})]})}),(0,l.jsx)(tM.E5,{style:{flexDirection:"row",alignItems:"center"},children:(0,l.jsx)("div",{children:(0,l.jsx)(t4.q,{execution:o})})}),(0,l.jsx)(tM.E5,{style:{flexDirection:"row",alignItems:"center"},children:c?(0,l.jsx)(P.rU,{to:(0,X.tA)({id:o.runId},{stepKey:o.stepKey,timestamp:o.timestamp}),children:(0,l.jsx)(tE.v,{timestamp:c})}):" - "}),(0,l.jsx)(tM.E5,{children:(0,l.jsx)(MetadataCell,{metadataEntries:null==o?void 0:null===(n=o.evaluation)||void 0===n?void 0:n.metadataEntries})}),(0,l.jsx)(tM.E5,{children:(0,l.jsx)(p.x,{flex:{justifyContent:"flex-end"},children:(0,l.jsx)(t5.$$,{assetNode:i,checks:[a],label:"Execute",icon:!1})})})]})})},t9=(0,es.ZP)(V.YS).withConfig({componentId:"sc-f024d775-0"})(VirtualizedAssetCheckTable_templateObject()),VirtualizedAssetCheckHeader=function(){return(0,l.jsxs)(p.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:t7,height:"32px",fontSize:"12px",color:(0,m.$)()},children:[(0,l.jsx)(tM.qN,{children:"Check name"}),(0,l.jsx)(tM.qN,{children:"Status"}),(0,l.jsx)(tM.qN,{children:"Evaluation timestamp"}),(0,l.jsx)(tM.qN,{children:"Evaluation metadata"}),(0,l.jsx)(tM.qN,{children:"Actions"})]})},ne=(0,es.ZP)(p.x).withConfig({componentId:"sc-f024d775-1"})(VirtualizedAssetCheckTable_templateObject1(),t7),nt=(0,d.Ps)(VirtualizedAssetCheckTable_templateObject2(),t8);function AssetChecks_templateObject(){var e=(0,o._)(["\n  query AssetChecksQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        ...ExecuteChecksButtonAssetNodeFragment\n\n        assetChecksOrError {\n          ... on AssetCheckNeedsMigrationError {\n            message\n          }\n          ... on AssetChecks {\n            checks {\n              ...AssetCheckTableFragment\n              ...ExecuteChecksButtonCheckFragment\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return AssetChecks_templateObject=function(){return e},e}var AssetChecks=function(e){var t=e.lastMaterializationTimestamp,n=e.assetKey,i=(0,c.a)(nn,{variables:{assetKey:n}}),r=i.data;(0,tA.C4)(i,tA.dT);var s=(0,E._)((0,D.q)({queryKey:"checkDetail"}),2),a=s[0],o=s[1],d=(0,h.useContext)(eI.G).AssetChecksBanner;return(0,l.jsxs)("div",{children:[(0,l.jsx)(p.x,{padding:{horizontal:24,vertical:12},border:"bottom",children:(0,l.jsx)(d,{})}),(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center",gap:32},padding:{horizontal:24,vertical:16},border:"bottom",children:[(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,l.jsx)(V.pN,{children:"Latest materialization:"}),t?(0,l.jsx)(P.rU,{to:(0,eV.p)(n,{time:t,view:"events"}),children:(0,l.jsx)(N.V,{icon:"materialization",children:(0,l.jsx)(k.E,{timestamp:{ms:Number(t)}})})}):(0,l.jsx)(N.V,{icon:"materialization",children:"None "})]}),function(){var e=null==r?void 0:r.assetNodeOrError;if((null==e?void 0:e.__typename)!=="AssetNode")return(0,l.jsx)("span",{});var t=e.assetChecksOrError;return(null==t?void 0:t.__typename)!=="AssetChecks"?(0,l.jsx)("span",{}):(0,l.jsx)(t5.$$,{assetNode:e,checks:t.checks})}()]}),function(){if(!r)return(0,l.jsx)(t2.T,{purpose:"page"});var e=r.assetNodeOrError;if((null==e?void 0:e.__typename)!=="AssetNode")return(0,l.jsx)("span",{});var t=e.assetChecksOrError;if("AssetCheckNeedsMigrationError"===t.__typename)return(0,l.jsx)(MigrationRequired,{});if("AssetCheckNeedsUserCodeUpgrade"===t.__typename)return(0,l.jsx)(NeedsUserCodeUpgrade,{});if("AssetCheckNeedsAgentUpgradeError"===t.__typename)return(0,l.jsx)(AgentUpgradeRequired,{});var i=t.checks;return i.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(AssetCheckDetailModal,{assetKey:n,checkName:a,onClose:function(){return o(void 0)}}),(0,l.jsx)(VirtualizedAssetCheckTable,{assetNode:e,rows:i})]}):(0,l.jsx)(NoChecks,{})}()]})},nn=(0,d.Ps)(AssetChecks_templateObject(),t5.M4,t5.rR,nt),ni=n(81862),nr=n(22970),ns=n(33379),na=n(19211),no=n(54949),nl=n(21044),nc=n(58885);function useReportEventsModal_templateObject(){var e=(0,o._)(["\n  mutation ReportEventMutation($eventParams: ReportRunlessAssetEventsParams!) {\n    reportRunlessAssetEvents(eventParams: $eventParams) {\n      ...PythonErrorFragment\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ReportRunlessAssetEventsSuccess {\n        assetKey {\n          path\n        }\n      }\n    }\n  }\n  ","\n"]);return useReportEventsModal_templateObject=function(){return e},e}var ReportEventDialogBody=function(e){var t,n=e.asset,i=e.repoAddress,r=e.isOpen,s=e.setIsOpen,a=e.onEventReported,o=(0,E._)(h.useState(""),2),c=o[0],d=o[1],u=(0,no.xz)(i.location),x=u.permissions.canReportRunlessAssetEvents,m=u.disabledReasons,f=(0,E._)((0,ns.D)(nd),1)[0],g=(0,E._)(h.useState(Date.now()),2),j=g[0],v=g[1],y=(0,th.$G)((0,tg.mR)(n.isPartitioned?[n.assetKey]:[],j.toString(),"background")),b=y.dimensions.some(function(e){return e.type===ef.iVC.DYNAMIC}),A=(0,E._)((0,tf.q)({assetHealth:y,modifyQueryString:!1,skipPartitionKeyValidation:b,shouldReadPartitionQueryStringParam:!0}),2),O=A[0],C=A[1],z=h.useMemo(function(){return(0,th.ju)(O,function(){return!0})},[O]),N=(t=(0,ni._)(function(){var e,t;return(0,nr.Jh)(this,function(i){switch(i.label){case 0:return[4,f({variables:{eventParams:{eventType:ef.RWz.ASSET_MATERIALIZATION,partitionKeys:n.isPartitioned?z:void 0,assetKey:{path:n.assetKey.path},description:c}}})];case 1:if(!(!(t=null===(e=i.sent().data)||void 0===e?void 0:e.reportRunlessAssetEvents)||"PythonError"===t.__typename))return[3,3];return[4,(0,na.B7)({message:(0,l.jsx)("div",{children:"An unexpected error occurred. This event was not reported."}),icon:"error",intent:"danger",action:t?{text:"View error",onClick:function(){return(0,tS._)({body:(0,l.jsx)(tP.T9,{error:t})})}}:void 0})];case 2:case 4:return i.sent(),[3,7];case 3:if("UnauthorizedError"!==t.__typename)return[3,5];return[4,(0,na.B7)({message:(0,l.jsx)("div",{children:t.message}),icon:"error",intent:"danger"})];case 5:return[4,(0,na.B7)({message:z.length>1?(0,l.jsx)("div",{children:"Your events have been reported."}):(0,l.jsx)("div",{children:"Your event has been reported."}),icon:"materialization",intent:"success"})];case 6:i.sent(),a(),s(!1),i.label=7;case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,l.jsxs)(ej.Vq,{style:{width:700},isOpen:r,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return s(!1)},children:[(0,l.jsx)(ej.fK,{icon:"info",label:n.isPartitioned?"Report materialization events":"Report materialization event"}),(0,l.jsx)(p.x,{padding:{horizontal:20,top:16,bottom:24},border:n.isPartitioned?{side:"bottom"}:void 0,children:(0,l.jsx)(V.pN,{children:"Let Dagster know about a materialization that happened outside of Dagster. Typically used for testing or for manually fixing incorrect information in the asset catalog, not for normal operations."})}),n.isPartitioned?(0,l.jsx)(nl.B,{isInitiallyOpen:!0,title:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,l.jsx)(V.pm,{children:"Partition selection"}),(0,l.jsx)("span",{children:(0,nc._e)((0,tg.xD)(O))})]}),children:O.map(function(e,t){return(0,l.jsxs)(p.x,{border:"bottom",padding:{vertical:12,horizontal:20},children:[(0,l.jsxs)(p.x,{as:V.pm,flex:{alignItems:"center",gap:8},children:[(0,l.jsx)(H.JO,{name:"partition"}),e.dimension.name]}),(0,l.jsxs)(p.x,{children:["Select partitions to materialize."," ",e.dimension.type===ef.iVC.TIME_WINDOW?"Click and drag to select a range on the timeline.":null]}),(0,l.jsx)(tu.x,{partitionKeys:e.dimension.partitionKeys,health:{ranges:y.rangesForSingleDimension(t,2===O.length?O[1-t].selectedRanges:void 0)},dimensionType:e.dimension.type,selected:e.selectedKeys,setSelected:function(t){return C(function(n){return n.map(function(n){return n.dimension===e.dimension?(0,w._)((0,_._)({},n),{selectedKeys:t}):n})})},partitionDefinitionName:e.dimension.name,repoAddress:i,refetch:(0,ni._)(function(){return(0,nr.Jh)(this,function(e){return[2,v(Date.now())]})})})]},e.dimension.name)})}):void 0,(0,l.jsx)(p.x,{padding:{horizontal:20,top:n.isPartitioned?16:0,bottom:16},flex:{direction:"column",gap:12},children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsx)(V.YS,{children:"Description"}),(0,l.jsx)(e4.oi,{value:c,onChange:function(e){return d(e.target.value)},placeholder:"Add a description"})]})}),(0,l.jsxs)(ej.cN,{topBorder:!0,children:[(0,l.jsx)(J.zx,{onClick:function(){return s(!1)},children:"Cancel"}),(0,l.jsx)(ts.u,{content:m.canReportRunlessAssetEvents,canShow:!x,children:(0,l.jsx)(J.zx,{intent:"primary",onClick:N,disabled:!x,children:z.length>1?"Report ".concat(z.length.toLocaleString()," events"):"Report event"})})]})]})},nd=(0,d.Ps)(useReportEventsModal_templateObject(),tK.B);function AssetView_templateObject(){var e=(0,o._)(["\n  query AssetViewDefinitionQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetMaterializations(limit: 1) {\n          timestamp\n          runId\n        }\n        definition {\n          id\n          ...AssetViewDefinitionNode\n        }\n      }\n    }\n  }\n\n  fragment AssetViewDefinitionNode on AssetNode {\n    id\n    groupName\n    partitionDefinition {\n      description\n    }\n    partitionKeysByDimension {\n      name\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    hasAssetChecks\n\n    ...AssetNodeInstigatorsFragment\n    ...AssetNodeDefinitionFragment\n    ...UnderlyingOpsAssetNodeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return AssetView_templateObject=function(){return e},e}var AssetView=function(e){var t,n,i,r,s,a,o,c,d=e.assetKey,u=e.trace,m=(0,E._)((0,D.q)({}),2),f=m[0],g=m[1],v=h.useContext(eI.G),y=v.tabBuilder,b=v.renderFeatureView,C=useAssetViewAssetDefinition(d),z=C.definition,N=C.definitionQueryResult,P=C.lastMaterialization,k=h.useMemo(function(){return y({definition:z,params:f})},[z,f,y]),K=k.some(function(e){return"partitions"===e.id})?"partitions":"events",R=f.view||K,M=function(e,t){var n=(0,j.Je)(e);if("definition"===t.view)return{query:'+"'.concat(n,'"+'),requestedDepth:1};if("lineage"===t.view){var i="neighbors"===t.lineageScope?2:5,r=Number(t.lineageDepth)||i,s="+".repeat(r);return{query:"lineage"===t.view&&"upstream"===t.lineageScope?"".concat(s,'"').concat(n,'"'):"lineage"===t.view&&"downstream"===t.lineageScope?'"'.concat(n,'"').concat(s):"".concat(s,'"').concat(n,'"').concat(s),requestedDepth:r}}return{query:'"'.concat(n,'"'),requestedDepth:0}}(d,f),T=(0,S.uc)(M.query,{hideEdgesToNodesOutsideQuery:!0}),F=(t=T.assetGraphData,n=(0,j.Wu)(d),h.useMemo(function(){return t?{upstream:Object.values(t.nodes).filter(function(e){var i;return null===(i=t.upstream[n])||void 0===i?void 0:i[(0,j.Wu)(e.assetKey)]}).map(function(e){return e.definition}),downstream:Object.values(t.nodes).filter(function(e){var i;return null===(i=t.downstream[n])||void 0===i?void 0:i[(0,j.Wu)(e.assetKey)]}).map(function(e){return e.definition})}:{upstream:null,downstream:null}},[t,n])),V=F.upstream,$=F.downstream,U=null===(o=T.assetGraphData)||void 0===o?void 0:o.nodes[(0,j.Wu)(d)],q=(0,I.NG)(d),W=q.liveData,J=q.refresh,B=null===(c=(null==W?void 0:W.lastMaterialization)||P)||void 0===c?void 0:c.timestamp,Z=!f.asOf||Number(B)<=Number(f.asOf),G=W?(0,tg.em)(W):null==P?void 0:P.timestamp;h.useEffect(function(){!N.loading&&W&&(null==u||u.endTrace())},[N,W,u]);var Q=(i=z?{assetKey:z.assetKey,isPartitioned:z.isPartitioned,repository:z.repository}:null,s=(r=(0,E._)(h.useState(!1),2))[0],a=r[1],{dropdownOptions:h.useMemo(function(){return[{label:(null==i?void 0:i.isPartitioned)?"Report materialization events":"Report materialization event",icon:(0,l.jsx)(H.JO,{name:"asset_non_sda"}),onClick:function(){return a(!0)}}]},[null==i?void 0:i.isPartitioned]),element:i?(0,l.jsx)(ReportEventDialogBody,{asset:i,isOpen:s,setIsOpen:a,repoAddress:(0,L.kQ)(i.repository.name,i.repository.location.name),onEventReported:J}):void 0});return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},style:{height:"100%",width:"100%",overflowY:"auto"},children:[(0,l.jsx)(A.K,{assetKey:d,tags:(0,l.jsx)(AssetViewPageHeaderTags,{definition:z,liveData:W,onShowUpstream:function(){return g((0,w._)((0,_._)({},f),{view:"lineage",lineageScope:"upstream"}))}}),tabs:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,l.jsx)(tb.Sc,{selectedTab:R,tabs:k}),(0,l.jsx)(p.x,{padding:{bottom:8},children:(0,l.jsx)(I.GN,{})})]}),right:(0,l.jsxs)(p.x,{style:{margin:"-4px 0"},children:[z&&z.isObservable?(0,l.jsx)(t1.y,{intent:"primary",scope:{all:[z],skipAllTerm:!0}}):z&&z.jobNames.length>0&&V?(0,l.jsx)(ti.XE,{scope:{all:[z]},showChangedAndMissingOption:!1,additionalDropdownOptions:Q.dropdownOptions}):void 0,Q.element]})}),!Z&&f.asOf&&(0,l.jsx)(HistoricalViewAlert,{asOf:f.asOf,hasDefinition:!!z}),(0,l.jsx)(O.S,{region:"page",resetErrorOnChange:[d,f],children:function(){switch(R){case"definition":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):z?(0,l.jsx)(AssetNodeDefinition,{assetNode:z,upstream:V,downstream:$,dependsOnSelf:!!U&&(0,j.Pz)(U)}):(0,l.jsx)(AssetNoDefinitionState,{});case"lineage":return T.assetGraphData?(0,l.jsx)(AssetNodeLineage,{params:f,setParams:g,assetKey:d,requestedDepth:M.requestedDepth,assetGraphData:T.assetGraphData,graphQueryItems:T.graphQueryItems}):(0,l.jsx)(p.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(x.$,{purpose:"page"})});case"partitions":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetPartitions,{assetKey:d,assetPartitionDimensions:null==z?void 0:z.partitionKeysByDimension.map(function(e){return e.name}),dataRefreshHint:G,params:f,paramsTimeWindowOnly:!!f.asOf,setParams:g});case"events":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetEvents,{assetKey:d,assetNode:z,dataRefreshHint:G,params:f,paramsTimeWindowOnly:!!f.asOf,setParams:g,liveData:z?W:void 0});case"plots":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetPlots,{assetKey:d,assetHasDefinedPartitions:!!(null==z?void 0:z.partitionDefinition),params:f,setParams:g});case"auto-materialize-history":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetAutomaterializePolicyPage,{assetKey:d,assetHasDefinedPartitions:!!(null==z?void 0:z.partitionDefinition)});case"checks":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetChecks,{assetKey:d,lastMaterializationTimestamp:null==P?void 0:P.timestamp});default:return b({selectedTab:R,assetKey:d,definition:z})}}()})]})},AssetLoadingDefinitionState=function(){return(0,l.jsx)(p.x,{style:{height:390},flex:{direction:"row",justifyContent:"center",alignItems:"center"},children:(0,l.jsx)(x.$,{purpose:"page"})})},AssetNoDefinitionState=function(){return(0,l.jsx)(p.x,{padding:{vertical:32},children:(0,l.jsx)(C.t,{title:"No definition",description:"This asset doesn't have a software definition in any of your code locations.",icon:"materialization"})})},useAssetViewAssetDefinition=function(e){var t=(0,c.a)(nu,{variables:{assetKey:{path:e.path}},notifyOnNetworkStatusChange:!0}),n=(t.data||t.previousData||{}).assetOrError,i=n&&"Asset"===n.__typename?n:null;return{definitionQueryResult:t,definition:(null==i?void 0:i.definition)||null,lastMaterialization:null==i?void 0:i.assetMaterializations[0]}},nu=(0,d.Ps)(AssetView_templateObject(),e2,eZ,eH.D),HistoricalViewAlert=function(e){var t=e.asOf,n=e.hasDefinition,i=(0,f.TH)(),r=i.pathname,s=i.search,a=new URLSearchParams(s);return a.delete("asOf"),a.set("time",t),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(z.b,{intent:"info",title:(0,l.jsxs)("span",{children:["This is a historical view of materializations as of"," ",(0,l.jsx)("span",{style:{fontWeight:600},children:(0,l.jsx)(k.E,{timestamp:{ms:Number(t)},timeFormat:{showSeconds:!0,showTimezone:!0}})}),"."]}),description:(0,l.jsx)(P.rU,{to:"".concat(r,"?").concat(a.toString()),children:n?"Show definition and latest materializations":"Show latest materializations"})})})},AssetViewPageHeaderTags=function(e){var t=e.definition,n=e.liveData,i=e.onShowUpstream,r=(0,e1.e)(),s=t?(0,L.kQ)(t.repository.name,t.repository.location.name):null;return(0,l.jsxs)(l.Fragment,{children:[t&&s?(0,l.jsxs)(N.V,{icon:"asset",children:["Asset in ",(0,l.jsx)(M.b,{repoAddress:s})]}):(0,l.jsx)(N.V,{icon:"asset_non_sda",children:"Asset"}),t&&s&&(0,l.jsx)(AssetNodeInstigatorTag,{assetNode:t,repoAddress:s}),t&&s&&t.groupName&&(0,l.jsx)(N.V,{icon:"asset_group",children:(0,l.jsx)(P.rU,{to:(0,T.$U)(s,"/asset-groups/".concat(t.groupName)),children:t.groupName})}),"has-global-amp"===r&&(null==t?void 0:t.autoMaterializePolicy)?(0,l.jsx)(t0.m,{}):null,t&&t.freshnessPolicy&&(0,l.jsx)(eJ.CW,{policy:t.freshnessPolicy,assetKey:t.assetKey}),t&&(0,l.jsx)(K.d9,{liveData:n,assetKey:t.assetKey,onClick:i,include:"all"}),t&&(0,l.jsx)(R.hG,{style:{position:"relative"},definition:t,reduceColor:!0})]})},np=n(65885);function AssetsCatalogRoot_templateObject(){var e=(0,o._)(["\n  query AssetsCatalogRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n"]);return AssetsCatalogRoot_templateObject=function(){return e},e}var AssetsCatalogRoot=function(){(0,g.Px)();var e,t=(0,f.UO)(),n=(0,f.k6)(),i=(t["0"]||"").split("/").filter(function(e){return e}).map(decodeURIComponent),r=(0,c.a)(nm,{skip:0===i.length,variables:{assetKey:{path:i}}});(0,v.j)(i&&i.length?"Assets: ".concat((0,j.ll)({path:i})):"Assets");var s=(0,y.t)(i&&0===i.length?"AssetsCatalogRoot":"AssetCatalogAssetView");return r.loading?(0,l.jsxs)(u.T,{children:[(0,l.jsx)(A.K,{assetKey:{path:i}}),(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,l.jsx)(x.$,{purpose:"body-text"}),(0,l.jsx)("div",{style:{color:(0,m.$)()},children:"Loading assets…"})]})})]}):0===i.length||(null===(e=r.data)||void 0===e?void 0:e.assetOrError.__typename)==="AssetNotFoundError"?(0,l.jsxs)(p.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,l.jsx)(A.K,{assetKey:{path:i},right:(0,l.jsxs)(p.x,{flex:{gap:12,alignItems:"center"},children:[(0,l.jsx)(A.w,{}),(0,l.jsx)(b.i,{label:"Reload definitions"})]})}),(0,l.jsx)(np.fv,{prefixPath:i,setPrefixPath:function(e){return n.push((0,eV.p)({path:e}))},trace:s})]}):(0,l.jsx)(AssetView,{assetKey:{path:i},trace:s})},nx=AssetsCatalogRoot,nm=(0,d.Ps)(AssetsCatalogRoot_templateObject())},87631:function(e,t,n){n.d(t,{m:function(){return AutomaterializeDaemonStatusTag}});var i=n(52322),r=n(43180),s=n(57830);n(2784);var a=n(47933),o=n(81966),AutomaterializeDaemonStatusTag=function(){var e=(0,o.dx)().paused;return(0,i.jsx)(r.u,{content:e?"Auto-materializing is paused. New materializations will not be triggered by auto-materialization policies.":"",canShow:e,children:(0,i.jsx)(a.rU,{to:"/health",style:{outline:"none"},children:(0,i.jsx)(s.V,{icon:e?"toggle_off":"toggle_on",intent:e?"warning":"success",children:e?"Auto-materialize off":"Auto-materialize on"})})})}},73689:function(e,t,n){n.d(t,{a:function(){return useSelectionReducer}});var i=n(58467),r=n(2784),reducer=function(e,t){var n=new Set(Array.from(e.checkedIds));switch(t.type){case"toggle-one":var r=t.payload,s=r.checked,a=r.id;return s?n.add(a):n.delete(a),{lastCheckedId:a,checkedIds:n};case"toggle-slice":var o=t.payload,l=o.checked,c=o.id,d=o.allIds,u=e.lastCheckedId,p=u?d.indexOf(u):-1,x=d.indexOf(c);if(-1===p||-1===x)return e;var m=(0,i._)([p,x].sort(),2),h=m[0],f=m[1];return d.slice(h,f+1).forEach(function(e){l?n.add(e):n.delete(e)}),{lastCheckedId:c,checkedIds:n};case"toggle-all":var g=t.payload,j=g.checked,v=g.allIds;return{lastCheckedId:null,checkedIds:j?new Set(v):new Set}}},s={checkedIds:new Set,lastCheckedId:null};function useSelectionReducer(e){var t=(0,i._)(r.useReducer(reducer,s),2),n=t[0],a=t[1];return[n,{onToggleFactory:function(t){return function(i){var r=i.checked;i.shiftKey&&n.lastCheckedId?a({type:"toggle-slice",payload:{checked:r,id:t,allIds:e}}):a({type:"toggle-one",payload:{checked:r,id:t}})}},onToggleAll:function(t){a({type:"toggle-all",payload:{checked:t,allIds:e}})}}]}},5035:function(e,t,n){n.d(t,{U:function(){return MenuLink}});var i=n(85333),r=n(6692),s=n(2281),a=n(73235),o=n(52322),l=n(44678),c=n(22139),d=n(34e3),u=n(25195);n(2784);var p=n(47933),x=n(35505);function _templateObject(){var e=(0,a._)(["\n  text-decoration: none;\n\n  border-radius: 4px;\n  display: block;\n  line-height: 20px;\n  padding: 6px 8px 6px 12px;\n  transition:\n    background-color 50ms,\n    box-shadow 150ms;\n  align-items: flex-start;\n  user-select: none;\n\n  /**\n   * Use margin instead of align-items: center because the contents of the menu item may wrap \n   * in unusual circumstances.\n   */\n  "," {\n    margin-top: 2px;\n  }\n\n  ",":first-child {\n    margin-left: -4px;\n  }\n\n  &&&:link,\n  &&&:visited,\n  &&&:hover,\n  &&&:active {\n    color: ",";\n    text-decoration: none;\n  }\n\n  &&&:hover {\n    background: ",";\n  }\n"]);return _templateObject=function(){return e},e}var MenuLink=function(e){var t=e.icon,n=e.intent,a=e.text,d=e.disabled,u=(0,s._)(e,["icon","intent","text","disabled"]);return d?(0,o.jsx)(l.sN,{disabled:!0,icon:t,intent:n,text:a}):(0,o.jsx)(m,(0,r._)((0,i._)({},u),{children:(0,o.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.cR)(t,n),(0,o.jsx)("div",{children:a})]})}))},m=(0,x.ZP)(p.rU).withConfig({componentId:"sc-a97e684d-0"})(_templateObject(),d.a1,d.a1,(0,u.Ep)(),(0,u.fk)())},39852:function(e,t,n){n.d(t,{i:function(){return ReloadAllButton}});var i=n(58467),r=n(52322),s=n(43180),a=n(9001),o=n(34e3),l=n(10952),c=n(2784),d=n(54949),u=n(56266),p=n(40092),x=n(70958),ReloadAllButton=function(e){var t=e.label,n=void 0===t?"Reload all":t,m=(0,d.WB)(),h=m.permissions.canReloadWorkspace,f=m.disabledReasons,g=(0,p.Dc)({scope:"workspace",reloadFn:p.rL}),j=g.reloading,v=g.tryReload,y=g.error,b=g.errorLocationId,A=(0,i._)(c.useState(!!y),2),_=A[0],w=A[1];return(c.useEffect(function(){return w(!!y)},[y]),h)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.zx,{outlined:!0,onClick:v,icon:(0,r.jsx)(o.JO,{name:"refresh"}),loading:j,children:n}),b?(0,r.jsx)(x.V,{error:y,location:b,reloading:j,onTryReload:v,onDismiss:function(){return w(!1)},isOpen:_}):(0,r.jsxs)(l.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:_,children:[(0,r.jsx)(l.a7,{children:y&&(0,r.jsx)(u.T9,{error:y})}),(0,r.jsx)(l.cN,{children:(0,r.jsx)(a.zx,{onClick:function(){return w(!1)},children:"Dismiss"})})]})]}):(0,r.jsx)(s.u,{content:f.canReloadWorkspace,children:(0,r.jsx)(a.zx,{outlined:!0,icon:(0,r.jsx)(o.JO,{name:"refresh"}),disabled:!0,children:n})})}}}]);
//# sourceMappingURL=730.82c888c089a08a4b.js.map