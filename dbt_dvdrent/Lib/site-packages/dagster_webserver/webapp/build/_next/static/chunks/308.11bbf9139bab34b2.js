"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{41222:function(e,n,t){t.d(n,{K:function(){return AssetPageHeader},w:function(){return AssetGlobalLineageLink}});var r=t(81862),i=t(85333),o=t(2281),s=t(58467),a=t(73235),l=t(22970),c=t(52322),u=t(38058),d=t(17131),p=t(22139),h=t(81308),m=t(43180),f=t(34e3),x=t(25195),g=t(2784),j=t(47933),v=t(35505),S=t(19211),y=t(47544);function _templateObject(){var e=(0,a._)(["\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  padding: 3px;\n  margin-top: 2px;\n\n  :focus {\n    outline: none;\n  }\n\n  "," {\n    transition: background-color 100ms linear;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,a._)(["\n  & li:not(:first-child)::after {\n    background: none;\n    font-size: 20px;\n    font-weight: bold;\n    color: ",";\n    content: '/';\n    width: 8px;\n    line-height: 16px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,a._)(["\n  color: ",";\n\n  :hover,\n  :active {\n    color: ",";\n  }\n"]);return _templateObject2=function(){return e},e}var AssetPageHeader=function(e){var n=e.assetKey,t=(0,o._)(e,["assetKey"]),a=(0,y.m)(),u=n.path.join("/"),j=(0,s._)(g.useState(!1),2),v=j[0],R=j[1],P=g.useRef(),A=g.useCallback((0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return P.current&&clearTimeout(P.current),a(u),R(!0),[4,(0,S.B7)({icon:"done",intent:"primary",message:"Copied asset key!"})];case 1:return e.sent(),P.current=setTimeout(function(){R(!1)},2e3),[2]}})}),[a,u]),k=g.useMemo(function(){var e=[{text:"Assets",href:"/assets"}];return n.path.reduce(function(n,t){var r="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:r}),r},"/assets"),e},[n.path]);return(0,c.jsx)(d.m,(0,i._)({title:(0,c.jsxs)(p.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,c.jsx)(_,{items:k,currentBreadcrumbRenderer:function(e){var n=e.text;return(0,c.jsx)(h.X6,{children:n})},breadcrumbRenderer:function(e){var n=e.text,t=e.href;return(0,c.jsx)(h.X6,{children:(0,c.jsx)(O,{to:t||"#",children:n})})}}),(0,c.jsx)(m.u,{placement:"bottom",content:"Copy asset key",children:(0,c.jsx)(b,{onClick:A,children:(0,c.jsx)(f.JO,{name:v?"copy_to_clipboard_done":"copy_to_clipboard",color:(0,x.md)()})})})]})},t))},b=v.ZP.button.withConfig({componentId:"sc-139359d3-0"})(_templateObject(),f.a1,f.a1,(0,x.$l)()),AssetGlobalLineageLink=function(){return(0,c.jsx)(j.rU,{to:"/asset-groups",children:(0,c.jsxs)(p.x,{flex:{gap:4},children:[(0,c.jsx)(f.JO,{color:(0,x.Es)(),name:"schema"}),"View global asset lineage"]})})},_=(0,v.ZP)(u.Oo).withConfig({componentId:"sc-139359d3-1"})(_templateObject1(),(0,x.Aw)()),O=(0,v.ZP)(j.rU).withConfig({componentId:"sc-139359d3-2"})(_templateObject2(),(0,x.$)(),(0,x.$)())},87631:function(e,n,t){t.d(n,{m:function(){return AutomaterializeDaemonStatusTag}});var r=t(52322),i=t(43180),o=t(57830);t(2784);var s=t(47933),a=t(81966),AutomaterializeDaemonStatusTag=function(){var e=(0,a.dx)().paused;return(0,r.jsx)(i.u,{content:e?"Auto-materializing is paused. New materializations will not be triggered by auto-materialization policies.":"",canShow:e,children:(0,r.jsx)(s.rU,{to:"/health",style:{outline:"none"},children:(0,r.jsx)(o.V,{icon:e?"toggle_off":"toggle_on",intent:e?"warning":"success",children:e?"Auto-materialize off":"Auto-materialize on"})})})}},29211:function(e,n,t){t.d(n,{G:function(){return PipelineRunsRoot}});var r=t(85333),i=t(6692),o=t(58467),s=t(73235),a=t(82550),l=t(52322),c=t(60138),u=t(21221),d=t(28888),p=t(22139),h=t(92364),m=t(57830),f=t(12084),x=t(83302),g=t(34e3),j=t(2784),v=t(7267),S=t(91195),y=t(55237),b=t(68028),_=t(83568),O=t(12746),R=t(84495),P=t(38917),A=t(49313),k=t(65767),C=t(16148),E=t(90894),N=t(19358),w=t(51969),T=t(44254),F=t(38153),I=t(88286),$=t(14388);function _templateObject(){var e=(0,s._)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var D=["status","tag","id","created_date_before","created_date_after"],PipelineRunsRoot=function(e){(0,b.Px)();var n=(0,v.UO)().pipelinePath,t=e.repoAddress,s=void 0===t?null:t,c=(0,I.p3)(n),g=c.pipelineName,S=c.snapshotId,C=(0,w.Ux)(s),F=(0,w.E8)(C,g);(0,$.b)(c,F);var L=(0,_.t)("PipelineRunsRoot"),U=(0,o._)((0,A.oD)(D),2),J=U[0],V=U[1],q=j.useMemo(function(){return[F?{token:"job",value:g}:{token:"pipeline",value:g},S?{token:"snapshotId",value:S}:null].filter(Boolean)},[F,g,S]),M=(0,a._)(J).concat((0,a._)(q));if(s){var W={token:"tag",value:"".concat(R.H.RepositoryLabelTag,"=").concat((0,T.Wg)(s))};M.push(W)}var B=(0,k.l)({query:z,pageSize:25,variables:{filter:(0,i._)((0,r._)({},(0,A.VH)(M)),{pipelineName:g,snapshotId:S})},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]}}),H=B.queryResult,G=B.paginationProps,K=j.useCallback(function(e){var n=(0,u.HY)(e);J.some(function(e){return(0,u.HY)(e)===n})||V((0,a._)(J).concat([e]))},[J,V]),Q=(0,y.C4)(H,y.dT),Z=(0,A.Vv)({enabledFilters:D,tokens:J,onChange:V,loading:H.loading}),Y=Z.button,X=Z.activeFiltersJsx;return j.useEffect(function(){H.loading||L.endTrace()},[H.loading,L]),(0,l.jsx)(P.Lw.Provider,{value:{refetch:H.refetch},children:(0,l.jsx)(d.T,{children:(0,l.jsx)(E.g,{queryResult:H,allowStaleData:!0,children:function(e){var t=e.pipelineRunsOrError;if("Runs"!==t.__typename)return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"error",title:"Query Error",description:t.message})});var i=t.results.slice(0,25),o=G.hasNextCursor,a=G.hasPrevCursor;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N.Y,{$top:0,children:(0,l.jsx)(O.AL,{runs:i,onAddTag:K,actionBarComponents:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[Y,(0,l.jsx)(y.xi,{refreshState:Q})]}),belowActionBarComponents:(0,l.jsxs)(l.Fragment,{children:[q.map(function(e){var n=e.token,t=e.value;return(0,l.jsx)(m.V,{children:"".concat(n,":").concat(t)},n)}),X.length?(0,l.jsxs)(l.Fragment,{children:[X,(0,l.jsx)(f.Z,{onClick:function(){V([])},children:"Clear all"})]}):null]}),emptyState:function(){return(0,l.jsx)(EmptyState,{repoAddress:s,anyFilter:J.length>0,jobName:g,jobPath:n})}})}),o||a?(0,l.jsx)("div",{style:{marginTop:"20px"},children:(0,l.jsx)(x.pI,(0,r._)({},G))}):null]})}})})})},EmptyState=function(e){var n=e.repoAddress,t=e.anyFilter,r=e.jobName,i=e.jobPath,o=(0,w.Ux)(n),s=(0,w.Hb)(o,r);return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"run",title:"No runs found",description:n?s?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(C.A,{icon:(0,l.jsx)(g.JO,{name:"materialization"}),to:(0,F.$U)(n,"/jobs/".concat(i)),children:"Materialize an asset"})})]}):(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(C.A,{icon:(0,l.jsx)(g.JO,{name:"add_circle"}),to:(0,F.$U)(n,"/jobs/".concat(i,"/playground")),children:"Launch a run"})})]}):(0,l.jsx)("div",{children:"You have not launched any runs for this job."})})})},z=(0,c.Ps)(_templateObject(),O.ZZ,S.B)},39852:function(e,n,t){t.d(n,{i:function(){return ReloadAllButton}});var r=t(58467),i=t(52322),o=t(43180),s=t(9001),a=t(34e3),l=t(10952),c=t(2784),u=t(54949),d=t(56266),p=t(40092),h=t(70958),ReloadAllButton=function(e){var n=e.label,t=void 0===n?"Reload all":n,m=(0,u.WB)(),f=m.permissions.canReloadWorkspace,x=m.disabledReasons,g=(0,p.Dc)({scope:"workspace",reloadFn:p.rL}),j=g.reloading,v=g.tryReload,S=g.error,y=g.errorLocationId,b=(0,r._)(c.useState(!!S),2),_=b[0],O=b[1];return(c.useEffect(function(){return O(!!S)},[S]),f)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.zx,{outlined:!0,onClick:v,icon:(0,i.jsx)(a.JO,{name:"refresh"}),loading:j,children:t}),y?(0,i.jsx)(h.V,{error:S,location:y,reloading:j,onTryReload:v,onDismiss:function(){return O(!1)},isOpen:_}):(0,i.jsxs)(l.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:_,children:[(0,i.jsx)(l.a7,{children:S&&(0,i.jsx)(d.T9,{error:S})}),(0,i.jsx)(l.cN,{children:(0,i.jsx)(s.zx,{onClick:function(){return O(!1)},children:"Dismiss"})})]})]}):(0,i.jsx)(o.u,{content:x.canReloadWorkspace,children:(0,i.jsx)(s.zx,{outlined:!0,icon:(0,i.jsx)(a.JO,{name:"refresh"}),disabled:!0,children:t})})}},97308:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return WorkspaceRoot},default:function(){return t4}});var r,i,o=t(52322),s=t(22139),a=t(92364),l=t(82370),c=t(2784),u=t(7267),d=t(73235),p=t(60138),h=t(40794),m=t(28888),f=t(17131),x=t(81308),g=t(56024),j=t(57830),v=t(84636),S=t.n(v),y=t(68028),b=t(47888),_=t(28252),O=t(63386),R=t(12518),P=t(88286),A=t(23054),k=t(40049),C=t(39852),E=t(38153),N=t(41222),w=t(65885),T=t(87631),F=t(36495),I=t(74711);function _templateObject(){var e=(0,d._)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        policyType\n      }\n      automationPolicySensor {\n        id\n        ...SensorSwitchFragment\n      }\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var AssetGroupRoot=function(e){var n=e.repoAddress,t=e.tab;(0,y.Px)();var r=(0,u.UO)(),i=r.groupName,a=r[0],l=(0,u.k6)();(0,_.j)("Asset Group: ".concat(i));var d=(0,E.$U)(n,"/asset-groups/".concat(i)),p=c.useMemo(function(){return{groupName:i,repositoryLocationName:n.location,repositoryName:n.name}},[i,n]),h=c.useCallback(function(e,n){l[n]("".concat(d,"/").concat((0,P.gY)(e)))},[d,l]),j=c.useCallback(function(e){e.groupName&&e.repoAddress?l.push((0,E.$U)(e.repoAddress,"/asset-groups/".concat(e.groupName,"/lineage/").concat(e.assetKey.path.map(encodeURIComponent).join("/")))):l.push((0,I.p)(e.assetKey,{view:"definition"}))},[l]);return(0,o.jsxs)(m.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,o.jsx)(f.m,{title:(0,o.jsx)(x.X6,{children:i}),right:(0,o.jsx)(C.i,{label:"Reload definitions"}),tags:(0,o.jsx)(AssetGroupTags,{groupSelector:p,repoAddress:n}),tabs:(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,o.jsxs)(g.mQ,{selectedTabId:t,children:[(0,o.jsx)(k.f,{id:"lineage",title:"Lineage",to:"".concat(d,"/lineage")}),(0,o.jsx)(k.f,{id:"list",title:"List",to:"".concat(d,"/list")})]}),(0,o.jsx)(N.w,{})]})}),"lineage"===t?(0,o.jsx)(b.OK,{fetchOptions:{groupSelector:p},options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,P.p3)(a||"lineage/"),onChangeExplorerPath:h,onNavigateToSourceAssetNode:j}):(0,o.jsx)(w.fv,{groupSelector:p,prefixPath:a.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:function(e){return l.push("".concat(d,"/list/").concat(e.map(encodeURIComponent).join("/")))}})]})},$=(0,p.Ps)(_templateObject(),A.U),AssetGroupTags=function(e){var n=e.repoAddress,t=e.groupSelector,r=(0,F.e)(),i=(0,h.a)($,{variables:{selector:t}}).data;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.V,{icon:"asset_group",children:["Asset Group in ",(0,o.jsx)(O.b,{repoAddress:n})]}),function(){var e=null==i?void 0:i.assetNodes;if(!e||0===e.length)return null;if("has-global-amp"===r&&e.some(function(e){return!!e.autoMaterializePolicy}))return(0,o.jsx)(T.m,{});if("has-sensor-amp"===r){var t=e.map(function(e){return e.automationPolicySensor}).filter(function(e){return!!e}),s=S()(t,"id");if(t.length)return(0,o.jsx)(R.I,{repoAddress:n,sensors:s})}return null}()]})},D=t(1222),z=t(58467),L=t(78567),U=t(54949),J=t(91195),V=t(14388),q=t(51969),M=t(37563),W=t(25545);function LaunchpadSetupFromRunRoot_templateObject(){var e=(0,d._)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return LaunchpadSetupFromRunRoot_templateObject=function(){return e},e}var LaunchpadSetupFromRunRoot=function(e){var n=e.repoAddress,t=(0,U.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,s=r.pipelinePath,a=r.runId;return t?(0,o.jsx)(LaunchpadSetupFromRunAllowedRoot,{pipelinePath:s,repoAddress:n,runId:a}):(0,o.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(s)})},LaunchpadSetupFromRunAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,r=e.runId,i=(0,P.p3)(n),s=i.pipelineName,a=(0,q.Ux)(t),l=(0,q.E8)(a,s);(0,V.b)(i,l);var d=(0,z._)((0,L.aC)(t,s),2),p=d[0],m=d[1],f=(0,h.a)(B,{variables:{runId:r}}),x=f.data,g=f.loading,j=null==x?void 0:x.runOrError,v=(null==j?void 0:j.__typename)==="Run"?j:null;return(c.useEffect(function(){if(v){var e=v.runConfigYaml,n=v.mode,t=v.solidSelection;if(e||n||t){var r={name:"From run ".concat(v.id.slice(0,8))};"string"==typeof e&&(r.runConfigYaml=e),"string"==typeof n&&(r.mode=n),t instanceof Array&&t.length>0?r.solidSelection=t:"string"==typeof t&&t&&(r.solidSelection=[t]),m(function(e){return(0,L.f0)(e,r)})}}},[v,p,m]),g)?(0,o.jsx)(W.m,{}):j&&"RunNotFoundError"!==j.__typename?"PythonError"===j.__typename?(0,o.jsx)(M.U,{icon:"error",title:"Python error",description:j.message}):(0,o.jsx)(u.l_,{to:{pathname:(0,E.$U)(t,"/".concat(l?"jobs":"pipelines","/").concat(s,"/playground"))}}):(0,o.jsx)(M.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},B=(0,p.Ps)(LaunchpadSetupFromRunRoot_templateObject(),J.B),H=t(19126),G=t.n(H),LaunchpadSetupRoot=function(e){var n=e.repoAddress,t=(0,U.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,s=r.pipelinePath;return t?(0,o.jsx)(LaunchpadSetupAllowedRoot,{pipelinePath:s,repoAddress:n}):(0,o.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(s)})},LaunchpadSetupAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,r=(0,P.p3)(n),i=r.pipelineName,s=(0,q.Ux)(t),a=(0,q.E8)(s,i);(0,V.b)(r,a);var l=(0,z._)((0,L.aC)(t,i),2),d=(l[0],l[1]),p=G().parse(window.location.search,{ignoreQueryPrefix:!0});return c.useEffect(function(){if(p.config||p.mode||p.solidSelection||p.tags||p.assetSelection){var e={};"string"==typeof p.config&&(e.runConfigYaml=p.config),"string"==typeof p.mode&&(e.mode=p.mode),p.solidSelection instanceof Array&&p.solidSelection.length>0?e.solidSelection=p.solidSelection:"string"==typeof p.solidSelection&&p.solidSelection&&(e.solidSelection=[p.solidSelection]),"string"==typeof p.solidSelectionQuery&&(e.solidSelectionQuery=p.solidSelectionQuery),Array.isArray(p.tags)&&(e.tags=p.tags),Array.isArray(p.assetSelection)&&(e.assetSelection=p.assetSelection),d(function(n){return(0,L.f0)(n,e)})}}),(0,o.jsx)(u.l_,{to:{pathname:(0,E.$U)(t,"/".concat(a?"jobs":"pipelines","/").concat(i,"/playground"))}})},K=t(16057),Q=t(7575),Z=t(12084),Y=t(25195),X=t(10952),ee=t(9001),en=t(75652),et=t.n(en),er=t(47933),ei=t(35157),eo=t(84495),es=t(38917),ea=t(66207),el=t(44254),ec=t(43180),eu=t(95223),ed=t(55237),ep=t(61935),eh=t(21485),em=t(76487),ef=t(30301);function LatestRunTag_templateObject(){var e=(0,d._)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on Runs {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return LatestRunTag_templateObject=function(){return e},e}var ex={showSeconds:!0,showTimezone:!1},LatestRunTag=function(e){var n=e.pipelineName,t=e.repoAddress,r=(0,h.a)(eg,{variables:{runsFilter:{pipelineName:n,tags:[{key:eo.H.RepositoryLabelTag,value:(0,el.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,ed.C4)(r,ed.dT);var i=c.useMemo(function(){var e,n=null===(e=r.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null},[r]);if(!i)return null;var a={start:i.startTime,end:i.endTime,status:i.status};return(0,o.jsx)(j.V,{intent:function(){switch(i.status){case ep.VOA.SUCCESS:return"success";case ep.VOA.CANCELED:case ep.VOA.CANCELING:case ep.VOA.FAILURE:return"danger";default:return"none"}}(),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,o.jsx)(eh.K9,{status:i.status,size:10}),"Latest run:",a?(0,o.jsx)(ec.u,{placement:"bottom",content:(0,o.jsx)(eu.k6,{children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{color:(0,Y.Aw)()},children:(0,o.jsx)(s.x,{padding:{right:16},children:"Started"})}),(0,o.jsx)("td",{children:a.start?(0,o.jsx)(ef.v,{timestamp:a.start,timeFormat:ex}):(0,em.Z0)(a.status)})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{color:(0,Y.Aw)()},children:"Ended"}),(0,o.jsx)("td",{children:a.end?(0,o.jsx)(ef.v,{timestamp:a.end,timeFormat:ex}):(0,em.Z0)(a.status)})]})]})}),children:(0,o.jsx)(er.rU,{to:"/runs/".concat(i.id),children:(0,o.jsx)(es.Zr,{run:i})})}):null]})})},eg=(0,p.Ps)(LatestRunTag_templateObject(),es.$X);function JobMetadata_templateObject(){var e=(0,d._)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      policyType\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return JobMetadata_templateObject=function(){return e},e}var JobMetadata=function(e){var n,t=e.pipelineName,r=e.repoAddress,i=(n=(0,h.a)(ej,{variables:{runsFilter:{pipelineName:t,tags:[{key:eo.H.RepositoryLabelTag,value:(0,el.Wg)(r)}]},params:{pipelineName:t,repositoryName:r.name,repositoryLocationName:r.location}}}).data,c.useMemo(function(){return{assetNodes:(null==n?void 0:n.assetNodes)||null,job:(null==n?void 0:n.pipelineOrError)&&"Pipeline"===n.pipelineOrError.__typename?n.pipelineOrError:null,runsForAssetScan:(null==n?void 0:n.pipelineRunsOrError)&&"Runs"===n.pipelineRunsOrError.__typename?n.pipelineRunsOrError.results:[]}},[n]));return(0,o.jsxs)(o.Fragment,{children:[i.job?(0,o.jsx)(JobScheduleOrSensorTag,{job:i.job,repoAddress:r}):null,(0,o.jsx)(LatestRunTag,{pipelineName:t,repoAddress:r}),i.assetNodes&&i.assetNodes.some(function(e){return!!e.autoMaterializePolicy})&&(0,o.jsx)(T.m,{}),i.runsForAssetScan?(0,o.jsx)(RelatedAssetsTag,{relatedAssets:i.assetNodes?i.assetNodes.map(function(e){return(0,ei.Je)(e.assetKey)}):et()(i.runsForAssetScan.flatMap(function(e){return e.assets.map(function(e){return(0,ei.Je)(e.key)})}))}):null]})},JobScheduleOrSensorTag=function(e){var n=e.job,t=e.repoAddress,r=c.useMemo(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.schedules.length?n.schedules:[]},[n]),i=c.useMemo(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.sensors.length?n.sensors:[]},[n]);return(0,o.jsx)(R.I,{schedules:r,sensors:i,repoAddress:t})},RelatedAssetsTag=function(e){var n=e.relatedAssets,t=(0,z._)(c.useState(!1),2),r=t[0],i=t[1];if(0===n.length)return null;if(1===n.length){var a=n[0];return(0,o.jsxs)(j.V,{icon:"asset",children:["Asset: ",(0,o.jsx)(er.rU,{to:"/assets/".concat(a),children:a})]})}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.V,{icon:"asset",children:(0,o.jsx)(Z.Z,{color:(0,Y.Es)(),onClick:function(){return i(!0)},children:"View ".concat(n.length," assets")})}),(0,o.jsxs)(X.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:r,onClose:function(){return i(!1)},style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map(function(e,t){return(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?"bottom":null,children:(0,o.jsx)(er.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)}),(0,o.jsx)(X.cN,{topBorder:!0,children:(0,o.jsx)(ee.zx,{intent:"primary",onClick:function(){return i(!1)},children:"OK"})})]})]})},ej=(0,p.Ps)(JobMetadata_templateObject(),ea.J,A.U,es.$X),PipelineNav=function(e){var n=e.repoAddress,t=(0,U.xz)(n.location),r=c.useContext(K.v).tabBuilder,i=(0,u.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),a=(0,P.p3)(i.params.selector),l=a.pipelineName,d=a.snapshotId,p=(0,q.Ux)(n),h=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===l}),m=!!(null==h?void 0:h.isJob),g=r({hasLaunchpad:!(null==h?void 0:h.isAssetJob),hasPartitionSet:((null==p?void 0:p.repository.partitionSets)||[]).some(function(e){return e.pipelineName===l})});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(f.m,{title:(0,o.jsx)(x.X6,{children:l}),tags:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,o.jsxs)(j.V,{icon:"job",children:[m?"Job in ":"Pipeline in ",(0,o.jsx)(O.b,{repoAddress:n})]}),d?null:(0,o.jsx)(JobMetadata,{pipelineName:l,repoAddress:n})]}),tabs:(0,o.jsx)(Q.IJ,{repoAddress:n,isJob:m,explorerPath:a,permissions:t,matchingTab:i.params.tab,tabs:g})})})};function usePartitionNameForPipeline_templateObject(){var e=(0,d._)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return usePartitionNameForPipeline_templateObject=function(){return e},e}var ev=(0,p.Ps)(usePartitionNameForPipeline_templateObject(),J.B),eS=t(90894),ey=t(85333),eb=t(6692),e_=t(21106),eO=t(24601),eR=t(7872),eP=t(185),eA=t(311),ek=t(54877),eC=t(56121),eE=t(82550),eN=t(83302),ew=t(94611);function JobBackfillsTable_templateObject(){var e=(0,d._)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return JobBackfillsTable_templateObject=function(){return e},e}var JobBackfillsTable=function(e){var n=e.partitionSetName,t=e.partitionNames,r=e.repositorySelector,i=e.refetchCounter,l=(0,z._)(c.useState(function(){return[]}),2),u=l[0],d=l[1],p=(0,z._)(c.useState(),2),m=p[0],f=p[1],x=(0,h.a)(eT,{variables:{partitionSetName:n,repositorySelector:r,cursor:m,limit:10}}),g=x.refetch;return c.useEffect(function(){i&&g()},[g,i]),(0,o.jsx)(eS.g,{queryResult:x,children:function(e){var n=e.partitionSetOrError;if("PartitionSetNotFoundError"===n.__typename)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"An error occurred.",icon:"no-results"})});var r=n.backfills,i=n.pipelineName;if(!r.length)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"No backfills for ".concat(i),icon:"no-results"})});var l={hasPrevCursor:!!m,hasNextCursor:r&&10===r.length,popCursor:function(){var e=(0,eE._)(u);f(e.pop()),d(e)},advanceCursor:function(){m&&d(function(e){return(0,eE._)(e).concat([m])});var e=r&&r[r.length-1].id;e&&f(e)},reset:function(){d([]),f(void 0)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ew.G,{backfills:r,refetch:g,showBackfillTarget:!1,allPartitions:t}),(0,o.jsx)(eN.b$,(0,ey._)({},l))]})}})},eT=(0,p.Ps)(JobBackfillsTable_templateObject(),ew.b),eF=t(63832),eI=t(34e3),e$=t(56266),eD=t(81862),ez=t(22970),eL=t(33379),eU=t(82585),eJ=t(82329),eV=t(84692),eq=t(18190),eM=t(56101),eW=t(14877),eB=t(18970),eH=t(42982),eG=t(15848),eK=t(20093),eQ=t(62311),eZ=t(3979),eY=t(87612),eX=t(87424),e0=t(68052),PartitionRunStatusCheckboxes=function(e){var n=e.counts,t=e.value,r=e.onChange,i=e.allowed,a=e.disabled;return(0,o.jsx)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:i.map(function(e){return(0,o.jsx)(eU.X,{"data-testid":(0,e0.N)("run-status-".concat(e,"-checkbox")),disabled:a,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!a,label:"".concat((0,eX.fi)(e)," (").concat(n[e],")"),onChange:function(){return r(t.includes(e)?t.filter(function(n){return n!==e}):(0,eE._)(t).concat([e]))}},e)})})};function BackfillSelector_templateObject(){var e=(0,d._)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return BackfillSelector_templateObject=function(){return e},e}var BackfillPartitionSelector=function(e){var n=e.partitionSetName,t=e.onLaunch,r=e.onCancel,i=e.onSubmit,l=e.repoAddress,d=e.runStatusData,p=e.pipelineName,m=e.partitionNames,f=(0,u.k6)(),x=(0,z._)(c.useState(Object.keys(d).filter(function(e){return!d[e]||d[e]===ep.VOA.FAILURE})),2),g=x[0],j=x[1],v=(0,z._)(c.useState([ep.VOA.NOT_STARTED,ep.VOA.FAILURE]),2),S=v[0],y=v[1],b=c.useMemo(function(){return g.filter(function(e){return S.includes(d[e])})},[g,S,d]),_=(0,z._)(c.useState(!1),2),O=_[0],R=_[1],P=(0,z._)(c.useState([]),2),A=P[0],k=P[1],C=(0,z._)(c.useState(""),2),E=C[0],N=C[1],w=(0,z._)(c.useState({reexecute:!1,fromFailure:!1}),2),T=w[0],F=w[1],I=(0,eC.$)(l),$=(0,h.a)(e1,{variables:{pipelineSelector:(0,eb._)((0,ey._)({},I),{pipelineName:p})},fetchPolicy:"network-only"}).data,D=c.useRef(!0);if(c.useEffect(function(){return D.current=!0,function(){D.current=!1}},[t]),!$)return(0,o.jsx)(s.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(eF.$,{purpose:"section"})});if("PipelineSnapshot"!==$.pipelineSnapshotOrError.__typename)return(0,o.jsx)(s.x,{margin:20,children:(0,o.jsx)(a.t,{icon:"error",title:"Could not fetch job details"})});var L=$.pipelineSnapshotOrError,U=$.instance,J=(0,eH.i)(L.solidHandles).map(function(e){return e.solid}),V=(0,eJ.V)(J,E),q=(0,eq.tc)({nodes:V.all,mode:eV.hS.FLAT}).boxes.map(function(e){return{x:e.x,name:e.node.name}}),isFailed=function(e){return d[e]===ep.VOA.FAILURE},M=m.filter(isFailed),W=function(e){var n=(o={},(0,eY._)(o,ep.VOA.SUCCESS,0),(0,eY._)(o,ep.VOA.NOT_STARTED,0),(0,eY._)(o,ep.VOA.FAILURE,0),(0,eY._)(o,ep.VOA.QUEUED,0),(0,eY._)(o,ep.VOA.STARTED,0),o),t=!0,r=!1,i=void 0;try{for(var o,s,a=e[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;n[l.state]=(n[l.state]||0)+1}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(g.map(function(e){return{partitionKey:e,state:d[e]}}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X.a7,{children:(0,o.jsxs)(s.x,{flex:{direction:"column",gap:24},children:[(0,o.jsxs)(Section,{title:"Partitions",children:[(0,o.jsx)(s.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,o.jsx)(eZ.x,{selected:g,setSelected:function(e){var n=new Set(e);j(m.filter(function(e){return n.has(e)})),T.fromFailure&&e.filter(function(e){return!isFailed(e)}).length>0&&F((0,eb._)((0,ey._)({},T),{fromFailure:!1}))},health:{runStatusForPartitionKey:function(e){return d[e]}},partitionKeys:m,dimensionType:(0,eA.vH)(m[0])?ep.iVC.TIME_WINDOW:ep.iVC.STATIC}),(0,o.jsx)(PartitionRunStatusCheckboxes,{value:S,onChange:y,counts:W,allowed:T.fromFailure?[ep.VOA.FAILURE]:[ep.VOA.NOT_STARTED,ep.VOA.FAILURE,ep.VOA.QUEUED,ep.VOA.STARTED,ep.VOA.SUCCESS]})]}),M.length?(0,o.jsx)(Section,{title:"Reexecution",children:(0,o.jsx)(eU.X,{checked:T.fromFailure,disabled:!b.every(isFailed),onChange:function(){var e=(0,eb._)((0,ey._)({},T),{fromFailure:!T.fromFailure,reexecute:!T.reexecute});e.fromFailure&&y([ep.VOA.FAILURE]),N(""),F(e)},label:(0,o.jsxs)(s.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,o.jsx)(s.x,{margin:{right:4},children:"Re-execute from failures"}),(0,o.jsx)(ec.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,o.jsx)(eI.JO,{name:"info",color:(0,Y.md)()})})]})})}):null,(0,o.jsx)(Section,{title:(0,o.jsxs)(s.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,o.jsx)(s.x,{margin:{right:4},children:"Step subset"}),(0,o.jsx)(ec.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,o.jsx)(eI.JO,{name:"info",color:(0,Y.md)()})})]}),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(eK.j,{disabled:T.fromFailure,width:520,items:J,value:E,placeholder:"Type a step subset",onChange:N,autoApplyChanges:!0}),E?(0,o.jsxs)("div",{style:{color:(0,Y.$)()},children:[q.length," step",1===q.length?"":"s"," selected"]}):null]})}),(0,o.jsxs)(Section,{title:"Tags",children:[(0,o.jsx)(eB.U,{tagsFromSession:A,onChange:k,open:O,onRequestClose:function(){return R(!1)}}),A.length?(0,o.jsx)("div",{style:{border:"1px solid ".concat((0,Y.im)()),borderRadius:8,padding:3},children:(0,o.jsx)(eB.x,{tagsFromSession:A,onRequestEdit:function(){return R(!0)}})}):(0,o.jsx)("div",{children:(0,o.jsx)(ee.zx,{onClick:function(){return R(!0)},children:"Add tags to backfill runs"})})]}),(0,o.jsxs)(s.x,{flex:{direction:"column",gap:16},children:[(0,o.jsx)(eQ.So,{instance:U}),(0,o.jsx)(eQ.d,{instance:U})]})]})}),(0,o.jsxs)(X.cN,{children:[(0,o.jsx)(ee.zx,{intent:"none",onClick:r,children:"Cancel"}),(0,o.jsx)(LaunchBackfillButton,{partitionNames:b,partitionSetName:n,reexecutionSteps:!T.fromFailure&&V.all.length<J.length?q.map(function(e){return e.name}):void 0,fromFailure:T.fromFailure,tags:A,onSubmit:i,onSuccess:function(e){(0,eQ.Xd)(f,e,!1),null==t||t(e,E)},onError:function(e){(0,eQ.mv)(e)},repoAddress:l})]})]})},LaunchBackfillButton=function(e){var n,t=e.partitionSetName,r=e.partitionNames,i=e.reexecutionSteps,s=e.fromFailure,a=e.tags,l=e.onSuccess,u=e.onError,d=e.onSubmit,p=e.repoAddress,h=(0,eC.$)(p),m=c.useRef(!0),f=(0,z._)((0,eL.D)(eM.f),2),x=f[0],g=f[1].loading;c.useEffect(function(){return m.current=!0,function(){m.current=!1}},[l]);var j=(n=(0,eD._)(function(){var e;return(0,ez.Jh)(this,function(n){switch(n.label){case 0:return d(),[4,x({variables:{backfillParams:{selector:{partitionSetName:t,repositorySelector:h},partitionNames:r,reexecutionSteps:i,fromFailure:s,tags:a}}})];case 1:if(e=n.sent().data,!m.current)return[2];return e&&"LaunchBackfillSuccess"===e.launchPartitionBackfill.__typename?null==l||l(e.launchPartitionBackfill.backfillId,!1):null==u||u(e),[2]}})}),function(){return n.apply(this,arguments)}),v=r.length,S=null==i?void 0:i.length,y=[g?"Submitting ".concat(v," ").concat(1===v?"run":"runs","…"):v?"Submit ".concat(v," ").concat(1===v?"run":"runs"):"Select partitions to submit",!g&&S?"(".concat(S," selected ").concat(1===S?"step":"steps",")"):""].join(" ");return(0,o.jsx)(eW.C,{runCount:v,config:{title:y,icon:"open_in_new",disabled:!v||g,onClick:j}})},e1=(0,p.Ps)(BackfillSelector_templateObject(),eG.Q,eQ.op,eQ.EC),Section=function(e){var n=e.title,t=e.children;return(0,o.jsxs)(s.x,{flex:{direction:"column",gap:4},children:[(0,o.jsx)(x.pm,{children:n}),(0,o.jsx)(s.x,{flex:{direction:"column",gap:8},padding:{top:16},border:"top",children:t})]})},e2=t(343),e4=t(35505),e8=t(46032);function PartitionGraph_templateObject(){var e=(0,d._)(["\n  display: flex;\n  color: ",";\n  padding: 24px 12px;\n  text-decoration: none;\n"]);return PartitionGraph_templateObject=function(){return e},e}var PartitionGraph=function(e){var n,t,r=e.partitionNames,i=e.jobDataByPartition,s=e.stepDataByPartition,a=e.title,l=e.yLabel,u=e.isJob,d=e.hiddenStepKeys,p=(0,z._)(c.useState(function(){return{}}),2),h=p[0],m=p[1],f=c.useRef(null),x=c.useCallback(function(e){var n=f.current;if(n){var t=n.scales["x-axis-0"];if(t){var r=e.offsetX,i=e.offsetY;if("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top&&e.shiftKey){var o=t.getValueForPixel(r),s=n.data.labels[o];m(function(e){return(0,eb._)((0,ey._)({},e),(0,eY._)({},s,!e[s]))})}}}},[]),g=c.useMemo(function(){return{title:a?{display:!0,text:a}:void 0,animation:!1,scales:l?{y:{id:"y",title:{display:!0,text:l}},x:{id:"x",title:{display:!0,text:a}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,n){}}},onClick:x,maintainAspectRatio:!1}},[x,a,l]),j=(n=[],t={},r.forEach(function(e){var r=!!h[e];i&&n.push({x:e,y:r?void 0:i[e]}),s&&Object.entries(s[e]||{}).forEach(function(n){var i=(0,z._)(n,2),o=i[0],s=i[1];(null==d||!d.includes(o))&&s&&(t[o]=(0,eE._)(t[o]||[]).concat([{x:e,y:r?void 0:s}]))})}),Object.keys(t).forEach(function(e){t[e]=_fillPartitions(r,t[e])}),{jobData:n,stepData:t}),v=j.jobData,S=j.stepData,y=u?"Total job":"Total pipeline",b={labels:r,datasets:(0,eE._)(!i||d&&d.includes(y)?[]:[{label:y,data:v,borderColor:(0,Y.im)(),backgroundColor:(0,Y.Bj)()}]).concat((0,eE._)(Object.keys(S).map(function(e){return{label:e,data:S[e],borderColor:(0,e8.kU)(e),backgroundColor:(0,Y.Bj)()}})))};return(0,o.jsx)(e3,{children:(0,o.jsx)(e2.x1,{data:function(){return b},height:300,options:g,ref:f})})},_fillPartitions=function(e,n){var t={};return n.forEach(function(e){t[e.x]=e.y}),e.map(function(e){return{x:e,y:t[e]}})},e3=e4.ZP.div.withConfig({componentId:"sc-eba223fc-0"})(PartitionGraph_templateObject(),(0,Y.$)()),e6=t(52246),e5=t(79321),e7=t(6749),e9=t(6871);function OpJobPartitionsView_templateObject(){var e=(0,d._)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"]);return OpJobPartitionsView_templateObject=function(){return e},e}var OpJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,r=(0,eC.$)(t),i=(0,h.a)(ne,{variables:{partitionSetName:n,repositorySelector:r}}),l=i.data,c=i.loading;if(!l)return c?(0,o.jsx)(s.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{children:"Loading partitions…"})]})}):(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(a.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});var u=l.partitionSetOrError;if("PartitionSetNotFoundError"===u.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(a.t,{icon:"search",title:"Partition set not found",description:u.message})});if("PythonError"===u.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(e$.T9,{error:u})});if("PythonError"===u.partitionsOrError.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(e$.T9,{error:u.partitionsOrError})});var d=u.partitionsOrError.results.map(function(e){return e.name});return(0,o.jsx)(OpJobPartitionsViewContent,{partitionNames:d,partitionSet:u,repoAddress:t})};function usePartitionDurations(e){return c.useMemo(function(){var n={},t={};return e.forEach(function(e){if(e.runsLoaded&&0!==e.runs.length){var r=e.runs.sort(function(e,n){return e.startTime||0-(n.startTime||0)}),i=r[r.length-1];n[e.name]={},t[e.name]=(null==i?void 0:i.endTime)&&(null==i?void 0:i.startTime)?i.endTime-i.startTime:void 0,i.stepStats.forEach(function(t){n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]})}}),{runDurationData:t,stepDurationData:n}},[e])}var OpJobPartitionsViewContent=function(e){var n=e.partitionSet,t=e.partitionNames,r=e.repoAddress,i=(0,U.xz)(r.location),a=i.permissions.canLaunchPartitionBackfill,l=i.disabledReasons,u=(0,e_.S)(),d=u.viewport,p=u.containerProps,h=(0,z._)(c.useState(60),2),m=h[0],f=h[1],g=(0,z._)(c.useState(0),2),j=g[0],v=g[1],S=(0,z._)(c.useState(!1),2),y=S[0],b=S[1],_=(0,z._)(c.useState(!1),2),O=_[0],R=_[1],P=(0,z._)(c.useState(!1),2),A=P[0],k=P[1],C=(0,eC.$)(r),E=(0,z._)(c.useState(0),2),N=E[0],w=E[1],T=(0,e9.T)({partitionSetName:n.name,partitionTagName:eo.H.Partition,partitionNames:t,pageSize:m,runsFilter:[],repositorySelector:C,jobName:n.pipelineName,offset:j,skipQuery:!y});c.useEffect(function(){d.width&&!y&&f((0,e5.Rc)(d.width-e7.AQ))},[d.width,y,f]);var F=y?t.slice(Math.max(0,t.length-1-j-m),t.length-j):t,I=usePartitionDurations(T).stepDurationData,$=c.useCallback(function(){return k(!0)},[]),D=n.partitionStatusesOrError,L=c.useMemo(function(){return"PartitionStatuses"===D.__typename?D.results:[]},[D]),J=c.useMemo(function(){var e={},n={};return L.forEach(function(t){e[t.partitionName]=t.runStatus||ep.VOA.NOT_STARTED,F.includes(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)}),{runStatusData:e,runDurationData:n}},[L,F]),V=J.runStatusData,q=J.runDurationData,M=c.useMemo(function(){return{runStatusForPartitionKey:function(e){return V[e]}}},[V]);return(0,o.jsxs)("div",{children:[(0,o.jsx)(X.Vq,{canEscapeKeyClose:!A,canOutsideClickClose:!A,onClose:function(){return R(!1)},style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:O,children:O&&(0,o.jsx)(BackfillPartitionSelector,{partitionSetName:n.name,partitionNames:t,runStatusData:V,pipelineName:n.pipelineName,onCancel:function(){return R(!1)},onLaunch:function(e,n){w(N+1),R(!1)},onSubmit:$,repoAddress:r})}),(0,o.jsxs)(s.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,o.jsx)(x.pm,{children:"Status"}),(0,o.jsxs)(s.x,{flex:{gap:8},children:[(0,o.jsx)(ee.zx,{onClick:function(){return b(!y)},active:O,children:y?"Hide per-step status":"Show per-step status"}),a?(0,o.jsx)(ee.zx,{onClick:function(){return R(!O)},icon:(0,o.jsx)(eI.JO,{name:"add_circle"}),active:O,children:"Launch backfill…"}):(0,o.jsx)(ec.u,{content:l.canLaunchPartitionBackfill,children:(0,o.jsx)(ee.zx,{icon:(0,o.jsx)(eI.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill…"})})]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,o.jsx)(CountBox,{count:t.length,label:"Total partitions"}),(0,o.jsx)(CountBox,{count:t.filter(function(e){return V[e]===ep.VOA.FAILURE}).length,label:"Failed partitions"}),(0,o.jsx)(CountBox,{count:t.filter(function(e){return!V[e]||V[e]===ep.VOA.NOT_STARTED}).length,label:"Missing partitions"})]}),(0,o.jsxs)(s.x,{padding:{vertical:16,horizontal:24},children:[(0,o.jsx)("div",(0,eb._)((0,ey._)({},p),{children:(0,o.jsx)(e6.b,{partitionNames:t,health:M,selected:y?F:void 0,selectionWindowSize:m,onClick:function(e){var n=t.length-1;v(Math.min(n,Math.max(0,n-t.indexOf(e)-.5*m))),y||b(!0)},tooltipMessage:"Click to view per-step status"})})),y?(0,o.jsx)(s.x,{margin:{top:16},children:(0,o.jsx)(e5.ux,{partitionNames:t,partitions:T,pipelineName:n.pipelineName,repoAddress:r,setPageSize:f,offset:j,setOffset:v})}):null]}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(x.pm,{children:"Run duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:y?F:t,jobDataByPartition:q})}),y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(x.pm,{children:"Step duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:F,stepDataByPartition:I})})]}):null,(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,o.jsx)(x.pm,{children:"Backfill history"})}),(0,o.jsx)(s.x,{margin:{bottom:20},children:(0,o.jsx)(JobBackfillsTable,{partitionSetName:n.name,repositorySelector:C,partitionNames:t,refetchCounter:N})})]})},CountBox=function(e){var n=e.count,t=e.label;return(0,o.jsxs)(s.x,{padding:16,style:{flex:1},border:"right",children:[(0,o.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,o.jsx)("strong",{children:n})}),(0,o.jsx)("div",{children:t})]})},ne=(0,p.Ps)(OpJobPartitionsView_templateObject(),J.B),nn=t(49577),AssetJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,r=e.pipelineName,i=(0,e_.S)(),a=i.viewport,l=i.containerProps,u=(0,eC.$)(t),d=(0,eO.uc)("*",{pipelineSelector:{pipelineName:r,repositoryName:t.name,repositoryLocationName:t.location}}),p=(0,ek.mR)(d.graphAssetKeys),h=c.useMemo(function(){var e=(0,eA.$G)(p.filter(function(e){return e.dimensions.length>0})),n=e.dimensions.map(function(e){return{selectedKeys:e.partitionKeys,selectedRanges:[(0,nn.$0)(e)],dimension:e}}),t=(0,eA.ju)(n,function(n){return e.stateForKeyIdx(n).includes(eR.yo.MISSING)});return{merged:e,total:(0,ek.xD)(n),missing:t.length}},[p]),m=h.total,f=h.missing,g=h.merged,j=(0,z._)(c.useState(60),2),v=j[0],S=j[1],y=(0,z._)(c.useState(0),2),b=y[0],_=y[1],O=(0,z._)(c.useState(!1),2),R=O[0],P=O[1];c.useEffect(function(){a.width&&S((0,e5.Rc)(a.width-e7.AQ))},[a.width,S]);var A=g.dimensions.findIndex(eA.nv);-1===A&&(A=0);var k=g.dimensions[A]?g.dimensions[A]:null,C=(null==k?void 0:k.partitionKeys)||[],E=C.slice(Math.max(0,C.length-1-b-v),C.length-b);return(0,o.jsxs)("div",{children:[(0,o.jsxs)(s.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,o.jsx)(x.pm,{children:"Status"}),(0,o.jsxs)(s.x,{flex:{gap:8},children:[(0,o.jsx)(ee.zx,{onClick:function(){return P(!R)},children:R?"Hide per-asset status":"Show per-asset status"}),(0,o.jsx)(eP.XE,{scope:{all:d.graphQueryItems.map(function(e){return e.node}),skipAllTerm:!0},preferredJobName:r})]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,o.jsx)(CountBox,{count:m,label:"Total partitions"}),(0,o.jsx)(CountBox,{count:f,label:"Missing partitions"})]}),(0,o.jsxs)(s.x,{padding:{vertical:16,horizontal:24},children:[(0,o.jsx)("div",(0,eb._)((0,ey._)({},l),{children:(0,o.jsx)(e6.b,{partitionNames:C,splitPartitions:!!k&&!(0,eA.nv)(k),health:{ranges:g.rangesForSingleDimension(A)},selected:E,selectionWindowSize:v,tooltipMessage:"Click to view per-asset status",onClick:function(e){var n=C.length-1;_(Math.min(n,Math.max(0,n-C.indexOf(e)-.5*v)))}})})),R&&k&&(0,o.jsx)(s.x,{margin:{top:16},children:(0,o.jsx)(e5.ac,{rangeDimensionIdx:A,rangeDimension:k,assetHealth:p,assetQueryItems:d.graphQueryItems,pipelineName:r,setPageSize:S,offset:b,setOffset:_})})]}),R&&(0,o.jsx)(AssetJobPartitionGraphs,{repositorySelector:u,pipelineName:r,partitionSetName:n,multidimensional:((null==g?void 0:g.dimensions.length)||0)>1,dimensionName:k?k.name:null,dimensionKeys:C,selected:E,offset:b,pageSize:v}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,o.jsx)(x.pm,{children:"Backfill history"})}),(0,o.jsx)(s.x,{margin:{bottom:20},children:(0,o.jsx)(JobBackfillsTable,{partitionSetName:n,repositorySelector:u,partitionNames:C,refetchCounter:1})})]})},AssetJobPartitionGraphs=function(e){var n=e.repositorySelector,t=e.dimensionKeys,r=e.dimensionName,i=e.selected,a=e.pageSize,l=e.partitionSetName,c=e.multidimensional,u=e.pipelineName,d=e.offset,p=usePartitionDurations((0,e9.T)({partitionSetName:l,partitionTagName:c?"".concat(eo.H.Partition,"/").concat(r):eo.H.Partition,partitionNames:t,repositorySelector:n,pageSize:a,runsFilter:[],jobName:u,offset:d,skipQuery:!r})),h=p.stepDurationData,m=p.runDurationData;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(x.pm,{children:"Run duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,jobDataByPartition:m})}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(x.pm,{children:"Step durations"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,stepDataByPartition:h})})]})},PipelinePartitionsRoot=function(e){var n,t=e.repoAddress,r=(0,u.UO)(),i=r.pipelinePath,l=(0,P.p3)(i),d=l.pipelineName,p=(0,q.Ux)(t),m=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===d}),f=!!(null==m?void 0:m.isJob),x=!!(null==m?void 0:m.isAssetJob);(0,V.b)(l,f),(0,P.Bj)(r);var g=(n=(0,h.a)(ev,{skip:!d,variables:{repositoryLocationName:t.location,repositoryName:t.name,pipelineName:d}}).data,c.useMemo(function(){return{partitionSet:(null==n?void 0:n.partitionSetsOrError.__typename)==="PartitionSets"?n.partitionSetsOrError.results[0]:void 0,partitionSetError:(null==n?void 0:n.partitionSetsOrError.__typename)==="PipelineNotFoundError"||(null==n?void 0:n.partitionSetsOrError.__typename)==="PythonError"?n.partitionSetsOrError:void 0}},[n])),j=g.partitionSet,v=g.partitionSetError;return j||v?v?(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Partitions",description:v.message})}):j?x?(0,o.jsx)(AssetJobPartitionsView,{pipelineName:d,partitionSetName:j.name,repoAddress:t}):(0,o.jsx)(OpJobPartitionsView,{partitionSetName:j.name,repoAddress:t}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Partitions",description:(0,o.jsxs)("div",{children:["There are no partition sets defined for ",f?"job":"pipeline"," ",(0,o.jsx)("code",{children:d}),"."]})})}):(0,o.jsx)(eS.T,{purpose:"page"})},PipelineOrJobDisambiguationRoot=function(e){var n=e.repoAddress,t=(0,u.TH)(),r=(0,u.UO)().pipelinePath,i=(0,P.p3)(r).pipelineName,s=(0,q.Ux)(n),a=(0,q.E8)(s,i),l=t.pathname,c=t.search,d=l.replace("/pipeline_or_job/",a?"/jobs/":"/pipelines/");return(0,o.jsx)(u.l_,{to:"".concat(d).concat(c)})},nt=t(29211),PipelineRoot=function(e){var n=e.repoAddress,t=c.useContext(K.v).FallthroughRoute;return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,o.jsx)(PipelineNav,{repoAddress:n}),(0,o.jsxs)(u.rs,{children:[(0,o.jsx)(u.AW,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,o.jsx)(PipelineOrJobDisambiguationRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,o.jsx)(LaunchpadSetupRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,o.jsx)(LaunchpadSetupFromRunRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,o.jsx)(D.H,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return(0,o.jsx)(u.l_,{to:"/runs/".concat(e.match.params.runId)})}}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,o.jsx)(nt.G,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,o.jsx)(PipelinePartitionsRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return(0,o.jsx)(u.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,o.jsx)(t,{repoAddress:n})})]})]})},nr=t(56043),ni=t(76588),no=t(31761);t(33521);var ns=t(3842),na=t(99046),nl=t(54266),nc=t(65511),nu=t(42418),nd=t(19211),np=t(47544),nh=t(71277),nm=t(88846),nf=t(65767),nx=t(22665),ng=t(581),nj=t(91230),nv=t(49280),nS=t(90437),ny=t(32911),nb=t(85888);function TickHistory_templateObject(){var e=(0,d._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return TickHistory_templateObject=function(){return e},e}function _templateObject1(){var e=(0,d._)(["\n  background: transparent;\n  border: 0;\n  cursor: pointer;\n  padding: 8px;\n  margin: -6px;\n  outline: none;\n\n  "," {\n    background-color: ",";\n    transition: background-color 100ms;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n\n  :focus "," {\n    background-color: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,d._)(["\n  th,\n  td {\n    vertical-align: middle !important;\n  }\n"]);return _templateObject2=function(){return e},e}nc.kL.register(nu.ZP);var n_=(r={},(0,eY._)(r,ep.izS.SUCCESS,!0),(0,eY._)(r,ep.izS.FAILURE,!0),(0,eY._)(r,ep.izS.STARTED,!0),(0,eY._)(r,ep.izS.SKIPPED,!0),r),nO=(i={},(0,eY._)(i,ep.izS.SUCCESS,"Requested"),(0,eY._)(i,ep.izS.FAILURE,"Failed"),(0,eY._)(i,ep.izS.STARTED,"Started"),(0,eY._)(i,ep.izS.SKIPPED,"Skipped"),i),TicksTable=function(e){var n,t=e.name,r=e.repoAddress,i=e.tabs,l=e.setTimerange,u=e.setParentStatuses,d=(0,z._)((0,nh.q)({encode:function(e){var n={};return Object.keys(e).map(function(t){n[t.toLowerCase()]=String(e[t])}),n},decode:function(e){var n=(0,ey._)({},n_);return Object.keys(n_).forEach(function(t){t.toLowerCase() in e&&(n[t]="false"!==e[t.toLowerCase()])}),n}}),2),p=d[0],h=d[1],m=(0,eb._)((0,ey._)({},(0,eC.$)(r)),{name:t}),f=c.useMemo(function(){return Object.keys(p).filter(function(e){return p[e]}).map(function(e){return e})},[p]),x=(0,nf.l)({nextCursorForResult:function(e){var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[]},variables:{instigationSelector:m,statuses:f},query:nR,pageSize:25}),g=x.queryResult,j=x.paginationProps;(0,ed.C4)(g,ed.dT);var v=null==g?void 0:null===(n=g.data)||void 0===n?void 0:n.instigationStateOrError,S=c.useMemo(function(){return(null==v?void 0:v.__typename)==="InstigationState"?v.ticks:[]},[v]);c.useEffect(function(){if(j.hasPrevCursor){if(S&&S.length){var e,n,t=null===(e=S[S.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=S[0])||void 0===n?void 0:n.endTimestamp;t&&r&&(null==l||l([t,r]))}}else null==l||l(void 0)},[j.hasPrevCursor,S,l]),c.useEffect(function(){j.hasPrevCursor?null==u||u(Array.from(f)):null==u||u(void 0)},[j.hasPrevCursor,u,f]),c.useEffect(function(){!j.hasPrevCursor||S.length||g.loading||j.reset()},[S,g.loading,j.hasPrevCursor]);var y=(0,z._)(c.useState(),2),b=y[0],_=y[1],O=g.data;if(!O)return(0,o.jsx)(s.x,{padding:{vertical:48},children:(0,o.jsx)(eF.$,{purpose:"page"})});if("PythonError"===O.instigationStateOrError.__typename)return(0,o.jsx)(e$.T9,{error:O.instigationStateOrError});if("InstigationStateNotFoundError"===O.instigationStateOrError.__typename)return(0,o.jsx)(s.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No ticks to display"})});var R=O.instigationStateOrError.instigationType;if(!S.length&&f.length===Object.keys(n_).length)return null;var StatusFilter=function(e){var n=e.status;return(0,o.jsx)(eU.X,{label:nO[n],checked:p[n],onChange:function(e){h((0,eb._)((0,ey._)({},p),(0,eY._)({},n,e.target.checked)))}})};return(0,o.jsxs)(o.Fragment,{children:[b?(0,o.jsx)(nx.l,{tick:b,instigationSelector:m,onClose:function(){return _(void 0)}}):null,(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},children:(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[i,(0,o.jsxs)(s.x,{flex:{direction:"row",gap:16},children:[(0,o.jsx)(StatusFilter,{status:ep.izS.STARTED}),(0,o.jsx)(StatusFilter,{status:ep.izS.SUCCESS}),(0,o.jsx)(StatusFilter,{status:ep.izS.FAILURE}),(0,o.jsx)(StatusFilter,{status:ep.izS.SKIPPED})]})]})}),S.length?(0,o.jsxs)(nA,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,o.jsx)("th",{style:{width:90},children:"Status"}),(0,o.jsx)("th",{style:{width:90},children:"Duration"}),R===ep._5b.SENSOR?(0,o.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,o.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,o.jsx)("tbody",{children:S.map(function(e,n){return(0,o.jsx)(TickRow,{tick:e,instigationSelector:m,index:n},e.id)})})]}):(0,o.jsx)(s.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No ticks to display"})}),S.length>0?(0,o.jsx)("div",{style:{marginTop:"16px"},children:(0,o.jsx)(eN.pI,(0,ey._)({},j))}):null]})},TickHistoryTimeline=function(e){var n=e.name,t=e.repoAddress,r=e.onHighlightRunIds,i=e.beforeTimestamp,a=e.afterTimestamp,l=e.statuses,u=(0,z._)((0,nh.q)({encode:function(e){return{tickId:e}},decode:function(e){return e.tickId?Number(e.tickId):void 0}}),2),d=u[0],p=u[1],m=(0,z._)(c.useState(!1),2),f=m[0],g=m[1],j=(0,eb._)((0,ey._)({},(0,eC.$)(t)),{name:n}),v=(0,h.a)(nR,{variables:{instigationSelector:j,beforeTimestamp:i,afterTimestamp:a,statuses:l,limit:i?void 0:15},notifyOnNetworkStatusChange:!0});(0,ed.C4)(v,1e3,!(f||i&&a));var S=v.data,y=v.error;if(!S||y)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,o.jsx)(x.pm,{children:"Recent ticks"})}),(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(eF.$,{purpose:"section"})})]});if("PythonError"===S.instigationStateOrError.__typename)return(0,o.jsx)(e$.T9,{error:S.instigationStateOrError});if("InstigationStateNotFoundError"===S.instigationStateOrError.__typename)return null;var b=S.instigationStateOrError.ticks,onTickClick=function(e){p(e?Number(e.tickId):void 0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ny.X,{isOpen:!!d,tickId:d,instigationSelector:j,onClose:function(){return onTickClick(void 0)}}),(0,o.jsx)(s.x,{padding:{vertical:16,horizontal:24},children:(0,o.jsx)(x.pm,{children:"Recent ticks"})}),(0,o.jsx)(s.x,{border:"top",children:(0,o.jsx)(nS.p,{ticks:void 0===b?[]:b,onHoverTick:function(e){e||g(!1),(null==e?void 0:e.runIds)&&(r&&r(e.runIds),g(!0))},onSelectTick:onTickClick,exactRange:i&&a?[a,i]:void 0})})]})};function TickRow(e){var n=e.tick,t=e.instigationSelector,r=e.index,i=(0,np.m)(),a=(0,z._)(c.useState(!1),2),l=a[0],u=a[1],d=(0,z._)(c.useMemo(function(){return[null==n?void 0:n.dynamicPartitionsRequestResults.filter(function(e){var n;return e.type===ep.Dq2.ADD_PARTITIONS&&(null===(n=e.partitionKeys)||void 0===n?void 0:n.length)}).length,null==n?void 0:n.dynamicPartitionsRequestResults.filter(function(e){var n;return e.type===ep.Dq2.DELETE_PARTITIONS&&(null===(n=e.partitionKeys)||void 0===n?void 0:n.length)}).length]},[null==n?void 0:n.dynamicPartitionsRequestResults]),2),p=d[0],h=d[1],m=(0,nb.g)(n,r);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(ef.v,{timestamp:n.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,o.jsx)("td",{children:(0,o.jsx)(ng.a,{tick:n,isStuckStarted:m})}),(0,o.jsx)("td",{children:m?"- ":(0,o.jsx)(nm.Q,{startUnix:n.timestamp,endUnix:n.endTimestamp||Date.now()/1e3})}),n.instigationType===ep._5b.SENSOR?(0,o.jsx)("td",{style:{width:120},children:n.cursor?(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)("div",{style:{fontFamily:ns.b.monospace,fontSize:"16px"},children:(0,nb.$)(n.cursor||"")}),(0,o.jsx)(nP,{onClick:(0,eD._)(function(){return(0,ez.Jh)(this,function(e){switch(e.label){case 0:return i(n.cursor||""),[4,(0,nd.B7)({message:(0,o.jsx)("div",{children:"Copied value"}),intent:"success"})];case 1:return e.sent(),[2]}})}),children:(0,o.jsx)(eI.JO,{name:"assignment"})})]}):(0,o.jsx)(o.Fragment,{children:"—"})}):null,(0,o.jsx)("td",{children:(0,o.jsxs)(s.x,{flex:{direction:"column",gap:6},children:[(0,o.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(Z.Z,{onClick:function(){u(!0)},children:1===n.runIds.length?"1 run requested":"".concat(n.runIds.length," runs requested")}),1===n.runs.length?n.runs.map(function(e){return(0,o.jsx)(c.Fragment,{children:(0,o.jsx)(nv.RX,{run:e})},e.id)}):null]}),p||h?(0,o.jsxs)(x.YS,{children:["(",p?(0,o.jsxs)("span",{children:[p," partition",(0,na.I)(p,"","s")," created",h?",":""]}):null,h?(0,o.jsxs)("span",{children:[h," partition",(0,na.I)(h,"","s")," deleted,"]}):null,")"]}):null,(0,o.jsx)(ny.X,{isOpen:l,tickId:Number(n.tickId),instigationSelector:t,onClose:function(){u(!1)}})]})})]})}var nR=(0,p.Ps)(TickHistory_templateObject(),nv.S9,J.B,nj.dY,nv.vw),nP=e4.ZP.button.withConfig({componentId:"sc-b58acedb-0"})(_templateObject1(),eI.a1,(0,Y.md)(),eI.a1,(0,Y.$l)(),eI.a1,(0,Y.Es)()),nA=(0,e4.ZP)(nl.i).withConfig({componentId:"sc-b58acedb-1"})(_templateObject2()),nk=t(12746),nC=t(59692),nE=t(90818),nN=t(37783),nw=t(44678),nT=t(59686),nF=t(37305),nI=t(4472),n$=t(39818);function EvaluateScheduleDialog_templateObject(){var e=(0,d._)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]);return EvaluateScheduleDialog_templateObject=function(){return e},e}function EvaluateScheduleDialog_templateObject1(){var e=(0,d._)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"]);return EvaluateScheduleDialog_templateObject1=function(){return e},e}function EvaluateScheduleDialog_templateObject2(){var e=(0,d._)(["\n  button {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n  }\n"]);return EvaluateScheduleDialog_templateObject2=function(){return e},e}function _templateObject3(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  padding-bottom: 12px;\n  border-bottom: 1px solid ",";\n  margin-bottom: 12px;\n  "," {\n    padding-bottom: 4px;\n    display: block;\n  }\n  pre {\n    margin: 0;\n  }\n  button {\n    margin-top: 4px;\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,d._)(["\n  padding-bottom: 2px;\n"]);return _templateObject4=function(){return e},e}var nD=navigator.language,EvaluateScheduleDialog=function(e){return(0,o.jsx)(X.Vq,(0,eb._)((0,ey._)({},e),{style:{width:"70vw",display:"flex"},title:(0,o.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(eI.JO,{name:"schedule"}),(0,o.jsx)("span",{children:e.name})]}),children:(0,o.jsx)(EvaluateSchedule,(0,ey._)({},e))}))},EvaluateSchedule=function(e){var n=e.repoAddress,t=e.name,r=e.onClose,i=e.jobName,a=(0,z._)(c.useState(),2),l=a[0],u=a[1],d=(0,h.a)(nz,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}).data,p=c.useContext(nT.JB),m=(0,z._)(p.timezone,1)[0],f=(0,z._)(c.useState(!1),2),x=f[0],g=f[1],j=c.useRef(null),v=(0,e_.S)(),S=v.viewport,y=v.containerProps,b=(0,z._)(c.useState(!1),2),_=b[0],O=b[1],R=c.useMemo(function(){if(_)return(0,o.jsx)(EvaluateScheduleContent,{repoAddress:n,name:t,timestamp:j.current.ts,jobName:i});if(!d)return(0,o.jsx)(s.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(eF.$,{purpose:"page"})});if("PythonError"===d.scheduleOrError.__typename||"ScheduleNotFoundError"===d.scheduleOrError.__typename)return(0,o.jsx)("div",{});var e,r=d.scheduleOrError.potentialTickTimestamps.map(function(e){return{ts:e,label:(0,nF.j)({timestamp:{unix:e},locale:nD,timezone:m,timeFormat:{showTimezone:!0}})}});return j.current=l||r[0]||null,(0,o.jsxs)(nU,{children:[(0,o.jsx)(nV,{children:"Select a mock evaluation time"}),(0,o.jsx)(nN.J,{isOpen:x,position:"bottom-left",fill:!0,content:(0,o.jsx)(nw.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(S.width,"px")},children:r.map(function(e){return(0,o.jsx)(nw.sN,{text:(0,o.jsx)("div",{"data-testid":(0,e0.N)("tick-".concat(e.ts)),children:e.label}),onClick:function(){u(e),g(!1)}},e.ts)})}),children:(0,o.jsx)("div",(0,eb._)((0,ey._)({},y),{children:(0,o.jsx)(ee.zx,{style:{flex:1},rightIcon:(0,o.jsx)(eI.JO,{name:"arrow_drop_down"}),onClick:function(){return g(function(e){return!e})},"data-testid":(0,e0.N)("tick-selection"),children:null===(e=j.current)||void 0===e?void 0:e.label})}))})]})},[l,y,d,x,i,t,n,_,m,S.width]),P=c.useMemo(function(){return _?(0,o.jsx)(ee.zx,{onClick:r,children:"Close"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ee.zx,{onClick:r,children:"Cancel"}),(0,o.jsx)(ee.zx,{"data-testid":(0,e0.N)("evaluate"),intent:"primary",onClick:function(){O(!0)},children:"Evaluate"})]})},[r,_]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X.a7,{children:(0,o.jsx)("div",{style:{minHeight:"300px"},children:R})}),P?(0,o.jsx)(X.cN,{topBorder:!0,children:P}):null]})},nz=(0,p.Ps)(EvaluateScheduleDialog_templateObject()),EvaluateScheduleContent=function(e){var n,t,r,i,l=e.repoAddress,u=e.name,d=e.timestamp,p=e.jobName,h=c.useContext(nT.JB),m=(0,z._)(h.timezone,1)[0],f=(0,z._)((0,eL.D)(nL,c.useMemo(function(){var e=(0,eC.$)(l);return{variables:{selectorData:(0,eb._)((0,ey._)({},e),{scheduleName:u}),timestamp:d}}},[u,l,d])),1)[0],g=(0,z._)(c.useState(null),2),v=g[0],S=g[1];if(c.useEffect(function(){f().then(function(e){S(function(){return e})})},[f]),!v||!v.data)return(0,o.jsx)(s.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,o.jsx)(eF.$,{purpose:"page"})});var y=(null==v?void 0:null===(t=v.data)||void 0===t?void 0:t.scheduleDryRun.__typename)==="DryRunInstigationTick"?null==v?void 0:null===(r=v.data)||void 0===r?void 0:r.scheduleDryRun.evaluationResult:null,b=null==y?void 0:null===(i=y.runRequests)||void 0===i?void 0:i.length,_=null==y?void 0:y.error;return(0,o.jsxs)(s.x,{flex:{direction:"column",gap:8},children:[(0,o.jsx)(s.x,{children:(0,o.jsxs)(nJ,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(x.pm,{children:"Result"}),(0,o.jsx)(s.x,{flex:{grow:1,alignItems:"center"},children:(0,o.jsx)("div",{children:_?(0,o.jsx)(j.V,{intent:"danger",children:"Failed"}):b?(0,o.jsxs)(j.V,{intent:"success",children:[b," run requests"]}):(0,o.jsx)(j.V,{intent:"warning",children:"Skipped"})})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(x.pm,{children:"Tick"}),(0,o.jsx)(s.x,{flex:{grow:1,alignItems:"center"},children:(0,o.jsx)(x.fv,{children:(0,nF.j)({timestamp:{unix:d},locale:nD,timezone:m,timeFormat:{showTimezone:!0}})})})]})]})}),v.data&&y?y.error?(0,o.jsx)(e$.T9,{error:y.error}):(null===(n=y.runRequests)||void 0===n?void 0:n.length)?(0,o.jsx)(nI.k,{runRequests:y.runRequests,repoAddress:l,isJob:!0,jobName:p,name:u}):(0,o.jsxs)("div",{children:[(0,o.jsx)(x.pm,{children:"Skip Reason"}),(0,o.jsx)("div",{children:(null==y?void 0:y.skipReason)||"No skip reason was output"})]}):(0,o.jsx)(a.t,{title:"An unknown error occurred",description:(0,o.jsxs)("span",{children:["File an issue on"," ",(0,o.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})]})},nL=(0,p.Ps)(EvaluateScheduleDialog_templateObject1(),J.B,n$.s),nU=e4.ZP.div.withConfig({componentId:"sc-575f9bef-0"})(EvaluateScheduleDialog_templateObject2()),nJ=e4.ZP.div.withConfig({componentId:"sc-575f9bef-1"})(_templateObject3(),(0,Y.wL)(),x.pm),nV=e4.ZP.div.withConfig({componentId:"sc-575f9bef-2"})(_templateObject4()),nq=t(83601);function SchedulePartitionStatus_templateObject(){var e=(0,d._)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]);return SchedulePartitionStatus_templateObject=function(){return e},e}var nM=["Succeeded","Failed","Missing","Pending"],calculateDisplayStatus=function(e){switch(e.runStatus){case null:return"Missing";case ep.VOA.SUCCESS:return"Succeeded";case ep.VOA.FAILURE:case ep.VOA.CANCELED:case ep.VOA.CANCELING:return"Failed";case ep.VOA.MANAGED:case ep.VOA.QUEUED:case ep.VOA.NOT_STARTED:case ep.VOA.STARTED:case ep.VOA.STARTING:return"Pending";default:return(0,e8.UT)(e.runStatus)}},nW=c.memo(function(e){var n=e.repoAddress,t=e.schedule,r=(0,q.Ux)(n),i=t.name,s=t.partitionSet,a=t.pipelineName,l=null==s?void 0:s.name,u=(0,q.E8)(r,a),d=c.useMemo(function(){var e=l?G().stringify({partitionSet:l},{addQueryPrefix:!0}):"";return"/".concat(u?"jobs":"pipelines","/").concat(a,"/partitions").concat(e)},[l,u,a]),p=(0,E.$U)(n,d),h=(0,z._)((0,nq.t)(nB,{variables:{scheduleSelector:{scheduleName:i,repositoryName:n.name,repositoryLocationName:n.location}}}),2),m=h[0],f=h[1],g=f.data,j=f.loading,v=c.useCallback(function(){return m()},[m]);return(0,o.jsxs)(nC.Z,{direction:"column",spacing:4,children:[(0,o.jsx)(er.rU,{to:p,children:l}),function(){if(j)return(0,o.jsx)(x.YS,{style:{color:(0,Y.$)()},children:"Loading…"});if(!g)return(0,o.jsx)(Z.Z,{onClick:v,children:(0,o.jsx)(x.YS,{children:"Show coverage"})});var e=g.scheduleOrError;return"Schedule"===e.__typename?(0,o.jsx)(RetrievedSchedulePartitionStatus,{schedule:e,partitionURL:p}):(0,o.jsx)(x.YS,{style:{color:(0,Y.Yn)()},children:"Partition set not found!"})}()]})}),RetrievedSchedulePartitionStatus=function(e){var n=e.schedule,t=e.partitionURL,r=n.partitionSet;if(!r||"PartitionStatuses"!==r.partitionStatusesOrError.__typename)return(0,o.jsx)("span",{style:{color:(0,Y.$)()},children:"None"});var i=r.partitionStatusesOrError.results,s={};return i.forEach(function(e){var n=calculateDisplayStatus(e);s[n]=(0,eE._)(s[n]||[]).concat([e])}),(0,o.jsx)(nv.Jy,{children:(0,o.jsx)("tbody",{children:nM.map(function(e){return e in s?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{width:"100px"},children:e}),(0,o.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,o.jsx)(er.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:(0,Y.Ep)()},children:s[e].length}):s[e].length})]},e):null})})})},nB=(0,p.Ps)(SchedulePartitionStatus_templateObject()),nH=t(54483),nG={showSeconds:!1,showTimezone:!0},ScheduleDetails=function(e){var n=e.repoAddress,t=e.schedule,r=e.refreshState,i=t.cronSchedule,a=t.executionTimezone,l=t.futureTicks,u=t.name,d=t.partitionSet,p=t.pipelineName,h=(0,np.m)(),m=(0,q.Ux)(n),g=(0,q.E8)(m,p),v=(0,z._)(c.useState("Click to copy"),2),S=v[0],y=v[1];c.useEffect(function(){var e;return"Copied!"===S&&(e=setTimeout(function(){y("Click to copy")},2e3)),function(){e&&clearTimeout(e)}},[S]);var b=t.scheduleState,_=b.status,R=b.id,P=b.ticks,A=P.length>0?P[0]:null,k=_===ep.ynu.RUNNING,C=(0,z._)(c.useState(!1),2),E=C[0],N=C[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.m,{title:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(x.X6,{children:u}),(0,o.jsx)(ea.M,{repoAddress:n,schedule:t})]}),tags:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.V,{icon:"schedule",children:["Schedule in ",(0,o.jsx)(O.b,{repoAddress:n})]}),l.results[0]&&k?(0,o.jsxs)(j.V,{icon:"timer",children:["Next tick:"," ",(0,o.jsx)(ef.v,{timestamp:l.results[0].timestamp,timezone:a,timeFormat:nG})]}):null,(0,o.jsx)(s.x,{flex:{display:"inline-flex"},margin:{top:2},children:(0,o.jsx)(ec.u,{content:S,children:(0,o.jsx)(Z.Z,{color:{link:(0,Y.$)(),hover:(0,Y.Ep)()},onClick:function(){h(R),y("Copied!")},children:(0,o.jsx)(x.fv,{children:"id: ".concat(R.slice(0,8))})})})})]}),right:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)(ed.xi,{refreshState:r}),(0,o.jsx)(ee.zx,{onClick:function(){N(!0)},children:"Test Schedule"})]})}),(0,o.jsx)(EvaluateScheduleDialog,{isOpen:E,onClose:function(){N(!1)},name:t.name,repoAddress:n,jobName:p},E?"1":"0"),(0,o.jsx)(eu.fJ,{children:(0,o.jsxs)("tbody",{children:[t.description?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Description"}),(0,o.jsx)("td",{children:t.description})]}):null,(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Latest tick"}),(0,o.jsx)("td",{children:A?(0,o.jsxs)(nC.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,o.jsx)(ef.v,{timestamp:A.timestamp,timezone:a,timeFormat:nG}),(0,o.jsx)(ng.a,{tick:A})]}):"Schedule has never run"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:g?"Job":"Pipeline"}),(0,o.jsx)("td",{children:(0,o.jsx)(nE.h,{pipelineName:p,pipelineHrefContext:n,isJob:g})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Partition set"}),(0,o.jsx)("td",{children:d?(0,o.jsx)(nW,{schedule:t,repoAddress:n}):"None"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Schedule"}),(0,o.jsx)("td",{children:i?(0,o.jsxs)(nC.Z,{direction:"row",spacing:8,children:[(0,o.jsx)("span",{children:(0,nH.A)(i,a||"UTC")}),(0,o.jsxs)(x.EK,{children:["(",i,")"]})]}):(0,o.jsx)("div",{children:"—"})})]}),a?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Execution timezone"}),(0,o.jsx)("td",{children:a})]}):null]})})]})};function ScheduleUtils_templateObject(){var e=(0,d._)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleUtils_templateObject=function(){return e},e}var nK=(0,p.Ps)(ScheduleUtils_templateObject(),nv.ai),nQ=t(84826);function ScheduleRoot_templateObject(){var e=(0,d._)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return ScheduleRoot_templateObject=function(){return e},e}function ScheduleRoot_templateObject1(){var e=(0,d._)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleRoot_templateObject1=function(){return e},e}var ScheduleRoot=function(e){(0,y.Px)();var n=e.repoAddress,t=(0,u.UO)().scheduleName;(0,_.j)("Schedule: ".concat(t));var r=(0,eb._)((0,ey._)({},(0,eC.$)(n)),{scheduleName:t}),i=(0,z._)(c.useState("ticks"),2),s=i[0],a=i[1],l=(0,h.a)(nZ,{variables:{scheduleSelector:r},notifyOnNetworkStatusChange:!0}),d=(0,ed.C4)(l,ed.dT),p=(0,o.jsxs)(g.mQ,{selectedTabId:s,onChange:a,children:[(0,o.jsx)(g.OK,{id:"ticks",title:"Tick history"}),(0,o.jsx)(g.OK,{id:"runs",title:"Run history"})]});return(0,o.jsx)(eS.g,{queryResult:l,allowStaleData:!0,children:function(e){var t=e.scheduleOrError,r=e.instance;if("Schedule"!==t.__typename)return null;var i=!r.daemonHealth.daemonStatus.healthy;return(0,o.jsxs)(m.T,{children:[(0,o.jsx)(ScheduleDetails,{repoAddress:n,schedule:t,refreshState:d}),i?(0,o.jsx)(nQ.K,{daemonHealth:r.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===s?(0,o.jsx)(TicksTable,{tabs:p,repoAddress:n,name:t.name}):(0,o.jsx)(SchedulePreviousRuns,{repoAddress:n,schedule:t,tabs:p})]})}})},SchedulePreviousRuns=function(e){var n=e.repoAddress,t=e.schedule,r=e.highlightedIds,i=e.tabs,s=(0,h.a)(nY,{variables:{limit:20,filter:{tags:[{key:eo.H.ScheduleName,value:t.name},{key:eo.H.RepositoryLabelTag,value:(0,el.Wg)(n)}]}},notifyOnNetworkStatusChange:!0});(0,ed.C4)(s,ed.dT);var l=s.data;if(!l)return null;if("Runs"!==l.pipelineRunsOrError.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Query Error",description:l.pipelineRunsOrError.message});var c=null==l?void 0:l.pipelineRunsOrError.results;return(0,o.jsx)(nk.AL,{actionBarComponents:i,runs:c,highlightedIds:r,hideCreatedBy:!0})},nZ=(0,p.Ps)(ScheduleRoot_templateObject(),nK,J.B,no.O),nY=(0,p.Ps)(ScheduleRoot_templateObject1(),nk.ZZ),nX=t(99596),n0=t(82439);function SensorFragment_templateObject(){var e=(0,d._)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return SensorFragment_templateObject=function(){return e},e}var n1=(0,p.Ps)(SensorFragment_templateObject(),nv.ai),n2=t(56692),n4=t(9676),n8=t(3490),n3=t(80428),n6=t(89102);function AssetSensorTicksQuery_templateObject(){var e=(0,d._)(["\n  query AssetSensorTicksQuery(\n    $sensorSelector: SensorSelector!\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          ticks(\n            dayRange: $dayRange\n            dayOffset: $dayOffset\n            statuses: $statuses\n            limit: $limit\n            cursor: $cursor\n            beforeTimestamp: $beforeTimestamp\n            afterTimestamp: $afterTimestamp\n          ) {\n            id\n            ...AssetDaemonTickFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return AssetSensorTicksQuery_templateObject=function(){return e},e}var n5=(0,p.Ps)(AssetSensorTicksQuery_templateObject(),n6.B,J.B),n7=t(22370),SensorAutomaterializationEvaluationHistoryTable=function(e){var n,t,r=e.repoAddress,i=e.sensor,s=e.setSelectedTick,a=e.setTableView,l=e.setTimerange,u=e.setParentStatuses,d=(0,z._)((0,nh.q)({queryKey:"statuses",decode:c.useCallback(function(e){var n=e.statuses;return new Set(n?JSON.parse(n):[ep.izS.STARTED,ep.izS.SUCCESS,ep.izS.FAILURE,ep.izS.SKIPPED])},[]),encode:c.useCallback(function(e){return{statuses:JSON.stringify(Array.from(e))}},[])}),2),p=d[0],h=d[1],m=(0,nf.l)({query:n5,variables:{sensorSelector:{sensorName:i.name,repositoryName:r.name,repositoryLocationName:r.location},statuses:c.useMemo(function(){return Array.from(p)},[p])},nextCursorForResult:function(e){if((null==e?void 0:e.sensorOrError.__typename)==="Sensor"){var n,t=e.sensorOrError.sensorState.ticks;if(t.length)return null===(n=t[14])||void 0===n?void 0:n.id}},getResultArray:function(e){return(null==e?void 0:e.sensorOrError.__typename)==="Sensor"?e.sensorOrError.sensorState.ticks:[]},pageSize:15}),f=m.queryResult,x=m.paginationProps;(0,ed.C4)(f,1e4,!x.hasPrevCursor);var g=(null===(t=f.data)||void 0===t?void 0:null===(n=t.sensorOrError)||void 0===n?void 0:n.__typename)==="Sensor"?f.data.sensorOrError.sensorState.ticks:null;return c.useEffect(function(){if(x.hasPrevCursor){if(g&&g.length){var e,n,t=null===(e=g[g.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=g[0])||void 0===n?void 0:n.endTimestamp;t&&r&&l([t,r])}}else l(void 0)},[g,x.hasPrevCursor,l]),c.useEffect(function(){x.hasPrevCursor?u(Array.from(p)):u(void 0)},[x.hasPrevCursor,u,p]),(0,o.jsx)(n7.V,{loading:f.loading,ticks:g||[],paginationProps:x,setSelectedTick:s,setStatuses:h,setTableView:a,statuses:p})},SensorPageAutomaterialize=function(e){var n,fetchData=function(){S({variables:b})},t=e.repoAddress,r=e.sensor,i=e.loading,a=e.daemonStatus,l=(0,z._)(c.useState(!1),2),u=l[0],d=l[1],p=(0,z._)(c.useState(void 0),2),h=p[0],m=p[1],f=(0,z._)(c.useState(void 0),2),g=f[0],j=f[1],v=(0,z._)((0,nq.t)(n5),2),S=v[0],y=v[1],b=c.useMemo(function(){return g||h?{sensorSelector:{sensorName:r.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:null==g?void 0:g[0],beforeTimestamp:null==g?void 0:g[1],statuses:h}:{sensorSelector:{sensorName:r.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:(Date.now()-12e5)/1e3}},[r,t,h,g]);c.useLayoutEffect(fetchData,[b]),(0,ed.C4)(y,2e3,!u&&!g&&!h,fetchData);for(var _=(0,z._)(c.useState(null),2),O=_[0],R=_[1],P=(0,z._)((0,nh.q)(c.useMemo(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),A=P[0],k=P[1],C=null!==(n=y.data)&&void 0!==n?n:y.previousData,E=c.useMemo(function(){return(null==C?void 0:C.sensorOrError.__typename)==="Sensor"?C.sensorOrError.sensorState.ticks:[]},[C]),N=c.useMemo(function(){return E.map(function(e){return"".concat(e.id,":").concat(e.status)})},[E]);N.length<100;)N.push("");var w=c.useMemo(function(){var e;return null!==(e=E.map(function(e,n){var t=w[n-1];if(t&&(0,nb.g)(e,n)){var r=(0,ey._)({},e);return r.endTimestamp=t.timestamp,r.status=ep.izS.FAILURE,r}return e}))&&void 0!==e?e:[]},(0,eE._)(N.slice(0,100))),T=c.useCallback(function(e){d(!!e)},[d]),F=c.useMemo(function(){return[{key:eo.H.RepositoryLabelTag,value:(0,el.Wg)(t)},{key:eo.H.SensorName,value:r.name}]},[t,r]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,o.jsx)(n4.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,o.jsxs)(o.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling – instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,o.jsx)(n2.F,{assetDaemonHealth:a,padding:{vertical:16,horizontal:24}}),(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,o.jsx)(x.Tj,{children:"Evaluation timeline"})}),!r&&i?(0,o.jsxs)(s.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:(0,Y.$)()},children:"Loading evaluations…"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nS.p,{ticks:w,onHoverTick:T,onSelectTick:R,exactRange:g,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,o.jsx)(n8.d,{tick:O,isOpen:!!O,close:function(){R(null)}}),"evaluations"===A?(0,o.jsx)(SensorAutomaterializationEvaluationHistoryTable,{repoAddress:t,sensor:r,setSelectedTick:R,setTableView:k,setParentStatuses:m,setTimerange:j}):(0,o.jsx)(n3.o,{filterTags:F,setTableView:k})]})]})};function SensorPreviousRuns_templateObject(){var e=(0,d._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return SensorPreviousRuns_templateObject=function(){return e},e}var SensorPreviousRuns=function(e){var n=e.sensor,t=e.repoAddress,r=e.highlightedIds,i=e.tabs,s=(0,nf.l)({query:n9,variables:{filter:{tags:[{key:eo.H.SensorName,value:n.name},{key:eo.H.RepositoryLabelTag,value:(0,el.Wg)(t)}]}},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[19])||void 0===n?void 0:n.id},getResultArray:function(e){return(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results},pageSize:20}),a=s.queryResult,l=s.paginationProps;(0,ed.C4)(a,l.hasPrevCursor?36e5:1e4);var c=a.data;if(c&&(null==c?void 0:c.pipelineRunsOrError.__typename)==="Runs"||(c=a.previousData),!c||(null==c?void 0:c.pipelineRunsOrError.__typename)!=="Runs")return null;var u=c.pipelineRunsOrError.results;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nk.AL,{actionBarComponents:i,runs:u,highlightedIds:r,hideCreatedBy:!0}),(0,o.jsx)("div",{style:{paddingBottom:"16px"},children:(0,o.jsx)(eN.pI,(0,ey._)({},l))})]})},n9=(0,p.Ps)(SensorPreviousRuns_templateObject(),nk.ZZ);function SensorRoot_templateObject(){var e=(0,d._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return SensorRoot_templateObject=function(){return e},e}var SensorRoot=function(e){var n=e.repoAddress;(0,y.Px)();var t=(0,u.UO)().sensorName;(0,_.j)("Sensor: ".concat(t));var r=(0,eb._)((0,ey._)({},(0,eC.$)(n)),{sensorName:t}),i=(0,z._)(c.useState(void 0),2),l=i[0],d=i[1],p=(0,z._)(c.useState(void 0),2),f=p[0],x=p[1],g=c.useMemo(function(){return f||l?{afterTimestamp:null==f?void 0:f[0],beforeTimestamp:null==f?void 0:f[1],statuses:l}:{}},[l,f]),j=(0,z._)((0,nh.q)(c.useMemo(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),v=j[0],S=j[1],b=(0,h.a)(te,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0}),O=(0,ed.C4)(b,ed.dT),R=b.data,P=b.loading,A=(0,o.jsx)(nX.h,{activeItems:new Set([v]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:function(e){S(e)}});if(!R&&P)return(0,o.jsxs)(s.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:(0,Y.$)()},children:"Loading sensor…"})]});if(!R||"SensorNotFoundError"===R.sensorOrError.__typename)return(0,o.jsx)(s.x,{padding:{vertical:32},children:(0,o.jsx)(a.t,{icon:"error",title:"Could not find sensor `".concat(t,"` in definitions for `").concat(n.name,"`")})});var k=R.sensorOrError;if("PythonError"===k.__typename)return(0,o.jsx)(e$.T9,{error:k});if("UnauthorizedError"===k.__typename)return(0,o.jsx)(u.l_,{to:"/overview/sensors"});var C=R.instance;if(k.sensorType===ep.dEY.AUTOMATION_POLICY){var E=C.daemonHealth.ampDaemonStatus;return(0,o.jsxs)(m.T,{children:[(0,o.jsx)(n0.e,{repoAddress:n,sensor:k,daemonHealth:E.healthy,refreshState:O}),(0,o.jsx)(SensorPageAutomaterialize,{repoAddress:n,sensor:k,daemonStatus:E,loading:P})]})}var N=C.daemonHealth.sensorDaemonStatus;return(0,o.jsxs)(m.T,{children:[(0,o.jsx)(n0.e,{repoAddress:n,sensor:k,daemonHealth:N.healthy,refreshState:O}),(0,o.jsx)(n2.F,{sensorDaemonStatus:N,padding:{vertical:16,horizontal:24}}),(0,o.jsx)(TickHistoryTimeline,(0,ey._)({repoAddress:n,name:k.name},g)),(0,o.jsx)(s.x,{margin:{top:32},border:"top",children:"evaluations"===v?(0,o.jsx)(TicksTable,{tabs:A,repoAddress:n,name:k.name,setParentStatuses:d,setTimerange:x}):(0,o.jsx)(SensorPreviousRuns,{repoAddress:n,sensor:k,tabs:A})})]})},te=(0,p.Ps)(SensorRoot_templateObject(),n1,J.B,no.O);function GraphRoot_templateObject(){var e=(0,d._)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return GraphRoot_templateObject=function(){return e},e}var GraphRoot=function(e){(0,y.Px)();var n=e.repoAddress,t=(0,u.UO)(),r=(0,P.p3)(t[0]),i=r.opNames.length>1?r.opNames[r.opNames.length-2]:r.pipelineName;return(0,_.j)("Graph: ".concat(i)),(0,o.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,o.jsx)(f.m,{title:(0,o.jsx)(x.X6,{children:i}),tags:(0,o.jsxs)(j.V,{icon:"schema",children:["Graph in ",(0,o.jsx)(O.b,{repoAddress:n})]})}),(0,o.jsx)(s.x,{border:"top",style:{minHeight:0,flex:1,display:"flex"},children:(0,o.jsx)(GraphExplorerRoot,{repoAddress:n})})]})},GraphExplorerRoot=function(e){var n=e.repoAddress,t=(0,u.UO)(),r=(0,P.p3)(t["0"]),i=(0,u.k6)(),s=(0,z._)(c.useState({explodeComposites:!1,preferAssetRendering:!0}),2),l=s[0],d=s[1],p=r.opNames.slice(0,r.opNames.length-1),m=(0,h.a)(tn,{variables:{graphSelector:{repositoryName:(null==n?void 0:n.name)||"",repositoryLocationName:(null==n?void 0:n.location)||"",graphName:r.pipelineName},rootHandleID:p.join("."),requestScopeHandleID:l.explodeComposites?void 0:p.join(".")}});return(0,o.jsx)(eS.g,{queryResult:m,children:function(t){var s=t.graphOrError;if("GraphNotFoundError"===s.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Graph not found",description:s.message});if("PythonError"===s.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Query Error",description:s.message});var c=s.solidHandle,u=l.explodeComposites?(0,eH.i)(s.solidHandles):s.solidHandles;return(0,o.jsx)(eG.m0,{options:l,setOptions:d,explorerPath:r,onChangeExplorerPath:function(n,t){var r=(0,E.$U)(e.repoAddress,"/graphs/".concat((0,P.gY)(n)));"push"===t?i.push(r):i.replace(r)},container:s,repoAddress:n,handles:u,parentHandle:c||void 0,isGraph:!0,getInvocations:function(e){return u.filter(function(n){return n.solid.definition.name===e}).map(function(e){return{handleID:e.handleID}})}})}})},tn=(0,p.Ps)(GraphRoot_templateObject(),eG.Q,eG.Sm,J.B),tt=t(34822),tr=t(88983),ti=t(88510),to=t(34263),ts=t(62175),ta=t(15282),tl=t(55658),tc=t(90537);function VirtualizedRepoAssetTable_templateObject(){var e=(0,d._)(["\n  cursor: pointer;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return VirtualizedRepoAssetTable_templateObject=function(){return e},e}function VirtualizedRepoAssetTable_templateObject1(){var e=(0,d._)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"]);return VirtualizedRepoAssetTable_templateObject1=function(){return e},e}var tu="UNGROUPED",VirtualizedRepoAssetTable=function(e){var n=e.repoAddress,t=e.assets,r=c.useRef(null),i=(0,el.Uz)(n),s=useAssetGroupExpansionState("".concat(i,"-").concat("assets-virtualized-expansion-state")),a=s.expandedKeys,l=s.onToggle,u=c.useMemo(function(){var e={},n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=a.groupName||tu,c=e[l]||[];e[l]=(0,eE._)(c).concat([a])}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},[t]),d=c.useMemo(function(){var e=[];return Object.entries(u).forEach(function(n){var t=(0,z._)(n,2),r=t[0],i=t[1];e.push({type:"group",name:r,assetCount:i.length}),a.includes(r)&&i.forEach(function(n){e.push({type:"asset",id:n.id,definition:n})})}),e},[u,a]),p=(0,ti.MG)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="group"?48:64},overscan:5}),h=p.getTotalSize(),m=p.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tc.XC,{nameLabel:"Asset name"}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tl.W2,{ref:r,children:(0,o.jsx)(tl.Nh,{$totalHeight:h,children:m.map(function(e){var t=e.index,r=e.key,i=e.size,s=e.start,c=d[t];return"group"===c.type?(0,o.jsx)(GroupNameRow,{repoAddress:n,groupName:c.name,assetCount:c.assetCount,expanded:a.includes(c.name),height:i,start:s,onToggle:l},r):(0,o.jsx)(tc.pN,{showCheckboxColumn:!1,definition:c.definition,path:c.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:i,start:s,checked:!1,onToggleChecked:function(){},onWipe:function(){}},r)})})})})]})},GroupNameRow=function(e){var n=e.repoAddress,t=e.groupName,r=e.assetCount,i=e.expanded,a=e.height,l=e.start,c=e.onToggle;return(0,o.jsx)(td,{$height:a,$start:l,onClick:function(){return c(t)},$open:i,tabIndex:0,onKeyDown:function(e){("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),c(t))},children:(0,o.jsxs)(s.x,{background:(0,Y.gJ)(),flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,o.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(eI.JO,{name:"asset_group"}),t===tu?(0,o.jsx)("div",{children:"Ungrouped assets"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{children:t}),t!==tu?(0,o.jsx)(s.x,{margin:{left:12},children:(0,o.jsx)(er.rU,{to:(0,E.$U)(n,"/asset-groups/".concat(t)),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,o.jsx)("span",{children:"View lineage"}),(0,o.jsx)(eI.JO,{name:"open_in_new",size:16,color:(0,Y.Es)()})]})})}):null]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(j.V,{children:1===r?"1 asset":"".concat(r," assets")}),(0,o.jsx)(eI.JO,{name:"arrow_drop_down",size:20})]})]})})},td=(0,e4.ZP)(tl.X2).withConfig({componentId:"sc-50bb0b83-0"})(VirtualizedRepoAssetTable_templateObject(),eI.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),validateExpandedKeys=function(e){return Array.isArray(e)?e:[]},useAssetGroupExpansionState=function(e){var n=c.useContext(to.I).basePath,t=(0,z._)((0,ta.U)("".concat(n,":dagster.").concat(e),validateExpandedKeys),2),r=t[0],i=t[1],o=c.useCallback(function(e){i(function(n){var t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)})},[i]);return c.useMemo(function(){return{expandedKeys:r,onToggle:o}},[r,o])},tp=(0,p.Ps)(VirtualizedRepoAssetTable_templateObject1(),ts.s),th=t(20763);function WorkspaceAssetsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceAssetsRoot_templateObject=function(){return e},e}var WorkspaceAssetsRoot=function(e){var n=e.repoAddress;(0,y.Px)();var t=(0,el.Uz)(n);(0,_.j)("Assets: ".concat(t));var r=(0,eC.$)(n),i=(0,z._)((0,nh.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,h.a)(tm,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=d.data,m=d.loading,f=(0,ed.C4)(d,ed.dT),x=l.trim().toLocaleLowerCase().length>0,g=c.useMemo(function(){return(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.assetNodes:[]},[p]),j=(0,tr.h)(l,g);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(th.h,{repoAddress:n,tab:"assets",refreshState:f,queryData:d}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(tt.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by asset name…",style:{width:"340px"}})}),m&&!p?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eF.$,{purpose:"page"})}):m&&!p?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:(0,Y.$)()},children:"Loading assets…"})]})}):j.length?(0,o.jsx)(VirtualizedRepoAssetTable,{repoAddress:n,assets:j}):x?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching assets",description:(0,o.jsxs)("div",{children:["No assets matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})},tm=(0,p.Ps)(WorkspaceAssetsRoot_templateObject(),tp,J.B),tf=t(86839);function VirtualizedGraphTable_templateObject(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: 100%;\n  height: 100%;\n"]);return VirtualizedGraphTable_templateObject=function(){return e},e}function VirtualizedGraphTable_templateObject1(){var e=(0,d._)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]);return VirtualizedGraphTable_templateObject1=function(){return e},e}var VirtualizedGraphTable=function(e){var n=e.repoAddress,t=e.graphs,r=c.useRef(null),i=(0,ti.MG)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),a=i.getTotalSize(),l=i.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:"100%",height:"32px",fontSize:"12px",color:(0,Y.$)()},children:(0,o.jsx)(tl.qN,{children:"Graph"})}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tl.W2,{ref:r,children:(0,o.jsx)(tl.Nh,{$totalHeight:a,children:l.map(function(e){var r=e.index,i=e.key,s=e.size,a=e.start,l=t[r];return(0,o.jsx)(GraphRow,{name:l.name,description:l.description,path:l.path,repoAddress:n,height:s,start:a},i)})})})})]})},GraphRow=function(e){var n=e.name,t=e.path,r=e.description,i=e.repoAddress,a=e.start,l=e.height,u=(0,z._)((0,nq.t)(tg,{variables:{selector:{repositoryName:i.name,repositoryLocationName:i.location,graphName:n}}}),2),d=u[0],p=u[1];(0,tf.v5)(d);var h=p.data,m=c.useMemo(function(){return r||((null==h?void 0:h.graphOrError.__typename)==="Graph"?h.graphOrError.description:null)},[h,r]);return(0,o.jsx)(tl.X2,{$height:l,$start:a,children:(0,o.jsx)(tx,{border:"bottom",children:(0,o.jsx)(tl.E5,{children:(0,o.jsxs)(s.x,{flex:{direction:"column"},children:[(0,o.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,o.jsx)(er.rU,{to:(0,E.$U)(i,t),children:n})}),m?(0,o.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,o.jsx)(x.YS,{style:{color:(0,Y.$)(),whiteSpace:"nowrap"},children:m})}):null]})})})})},tx=(0,e4.ZP)(s.x).withConfig({componentId:"sc-ed487f54-0"})(VirtualizedGraphTable_templateObject()),tg=(0,p.Ps)(VirtualizedGraphTable_templateObject1());function WorkspaceGraphsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          isJob\n          graphName\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceGraphsRoot_templateObject=function(){return e},e}var WorkspaceGraphsRoot=function(e){var n=e.repoAddress;(0,y.Px)();var t=(0,el.Uz)(n);(0,_.j)("Graphs: ".concat(t));var r=(0,eC.$)(n),i=(0,z._)((0,nh.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,h.a)(tj,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=d.data,m=d.loading,f=(0,ed.C4)(d,ed.dT),x=l.trim().toLocaleLowerCase(),g=x.length>0,j=c.useMemo(function(){var e=null==p?void 0:p.repositoryOrError;if(!e||"Repository"!==e.__typename)return[];var n=Array.from(new Set(e.pipelines.filter(function(e){return e.isJob&&!(0,ei.pv)(e.name)}).map(function(e){return e.graphName}))).map(function(e){return{name:e,path:"/graphs/".concat(e),description:null}});return e.usedSolids.forEach(function(e){if("CompositeSolidDefinition"===e.definition.__typename){var t=e.invocations[0];t&&n.push({name:e.definition.name,path:"/graphs/".concat(t.pipeline.name,"/").concat(t.solidHandle.handleID,"/"),description:e.definition.description})}}),n.sort(function(e,n){return e.name.localeCompare(n.name)})},[p]),v=c.useMemo(function(){var e=x.toLocaleLowerCase();return j.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[j,x]);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(th.h,{repoAddress:n,tab:"graphs",refreshState:f,queryData:d}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(tt.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by graph name…",style:{width:"340px"}})}),m&&!p?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eF.$,{purpose:"page"})}):m&&!p?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:(0,Y.$)()},children:"Loading graphs…"})]})}):v.length?(0,o.jsx)(VirtualizedGraphTable,{repoAddress:n,graphs:v}):g?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching graphs",description:(0,o.jsxs)("div",{children:["No graphs matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})},tj=(0,p.Ps)(WorkspaceGraphsRoot_templateObject(),J.B),tv=t(83568),tS=t(9901),VirtualizedJobTable=function(e){var n=e.repoAddress,t=e.jobs,r=c.useRef(null),i=(0,ti.MG)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),s=i.getTotalSize(),a=i.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tS.I,{}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tl.W2,{ref:r,children:(0,o.jsx)(tl.Nh,{$totalHeight:s,children:a.map(function(e){var r=e.index,i=e.key,s=e.size,a=e.start,l=t[r];return(0,o.jsx)(tS.b,{name:l.name,isJob:l.isJob,repoAddress:n,height:s,start:a},i)})})})})]})};function WorkspaceJobsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceJobsRoot_templateObject=function(){return e},e}var WorkspaceJobsRoot=function(e){var n=e.repoAddress,t=(0,tv.t)("WorkspaceJobsRoot");(0,y.Px)();var r=(0,el.Uz)(n);(0,_.j)("Jobs: ".concat(r));var i=(0,eC.$)(n),l=(0,z._)((0,nh.q)({queryKey:"search",defaults:{search:""}}),2),u=l[0],d=l[1],p=(0,h.a)(ty,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:i}}),m=p.data,f=p.loading;c.useLayoutEffect(function(){f||t.endTrace()},[f,t]);var x=(0,ed.C4)(p,ed.dT),g=u.trim().toLocaleLowerCase(),j=g.length>0,v=c.useMemo(function(){return(null==m?void 0:m.repositoryOrError.__typename)==="Repository"?m.repositoryOrError.pipelines:[]},[m]),S=c.useMemo(function(){var e=g.toLocaleLowerCase();return v.filter(function(n){var t=n.name;return!(0,ei.pv)(t)&&t.toLocaleLowerCase().includes(e)})},[v,g]);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(th.h,{repoAddress:n,tab:"jobs",refreshState:x,queryData:p}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(tt.oi,{icon:"search",value:u,onChange:function(e){return d(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})}),f&&!m?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eF.$,{purpose:"page"})}):f&&!m?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:(0,Y.$)()},children:"Loading jobs…"})]})}):S.length?(0,o.jsx)(VirtualizedJobTable,{repoAddress:n,jobs:S}):j?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching jobs",description:(0,o.jsxs)("div",{children:["No jobs matching ",(0,o.jsx)("strong",{children:u})," were found in ",r]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(r)})})]})},ty=(0,p.Ps)(WorkspaceJobsRoot_templateObject(),J.B),tb=t(82361),t_=t(21221),tO=t(10735),tR=t(41061),tP=t(65139),tA=t(87763),tk=t(33161);function OpCard_templateObject(){var e=(0,d._)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"]);return OpCard_templateObject=function(){return e},e}function OpCard_templateObject1(){var e=(0,d._)(["\n  flex: 1;\n  max-width: 450px;\n  position: relative;\n"]);return OpCard_templateObject1=function(){return e},e}var OpCard=function(e){var n=e.definition,t=n.name,r=n.inputDefinitions,i=n.outputDefinitions,a=(0,tk.og)({name:t,inputs:r.map(function(e){return{definition:e,dependsOn:[]}}),outputs:i.map(function(e){return{definition:e,dependedBy:[]}}),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,o.jsx)(s.x,{padding:24,children:(0,o.jsx)(tE,{style:{height:a.bounds.height},children:(0,o.jsx)(tA.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:a,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},tC=(0,p.Ps)(OpCard_templateObject(),tA.WH),tE=e4.ZP.div.withConfig({componentId:"sc-6b3b0278-0"})(OpCard_templateObject1());function OpDetailsRoot_templateObject(){var e=(0,d._)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return OpDetailsRoot_templateObject=function(){return e},e}function OpDetailsRoot_templateObject1(){var e=(0,d._)(["\n  overflow-y: scroll;\n  flex: 1;\n"]);return OpDetailsRoot_templateObject1=function(){return e},e}var UsedSolidDetails=function(e){var n=e.name,t=e.onClickInvocation,r=e.repoAddress,i=(0,eC.$)(r),s=(0,h.a)(tN,{variables:{name:n,repositorySelector:i}});return(0,o.jsx)(eS.g,{queryResult:s,children:function(e){var n=e.repositoryOrError;if(!((null==n?void 0:n.__typename)==="Repository"&&n.usedSolid))return null;var r=n.usedSolid;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(OpCard,{definition:r.definition}),(0,o.jsx)(tP.I,{definition:r.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:function(){return r.invocations.map(function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}})}})]})}})},tN=(0,p.Ps)(OpDetailsRoot_templateObject(),tC,tP.u),tw=e4.ZP.div.withConfig({componentId:"sc-d5e8171c-0"})(OpDetailsRoot_templateObject1()),tT=t(89481);function OpsRoot_templateObject(){var e=(0,d._)(["\n  .solids-list:focus {\n    outline: none;\n  }\n"]);return OpsRoot_templateObject=function(){return e},e}function OpsRoot_templateObject1(){var e=(0,d._)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n"]);return OpsRoot_templateObject1=function(){return e},e}function OpsRoot_templateObject2(){var e=(0,d._)(["\n  background: ",";\n  box-shadow:\n    "," 4px 0 0 inset,\n    "," 0 -1px 0 inset;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  display: flex;\n  flex-direction: column;\n  padding: 12px 24px;\n  user-select: none;\n\n  & > code.bp4-code {\n    color: ",";\n    background: transparent;\n    font-family: ",";\n    padding: 5px 0 0 0;\n  }\n"]);return OpsRoot_templateObject2=function(){return e},e}function OpsRoot_templateObject3(){var e=(0,d._)(["\n  flex: 1;\n  font-weight: 600;\n"]);return OpsRoot_templateObject3=function(){return e},e}function OpsRoot_templateObject4(){var e=(0,d._)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return OpsRoot_templateObject4=function(){return e},e}var tF=tR.qj,tI=tR.Z8,t$=tR.aV;function flatUniq(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value,l=!0,c=!1,u=void 0;try{for(var d,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)n[d.value]=!0}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}return Object.keys(n).sort(function(e,n){return e.localeCompare(n)})}var OpsRoot=function(e){(0,y.Px)(),(0,_.j)("Ops");var n=(0,u.UO)().name,t=e.repoAddress,r=(0,eC.$)(t),i=(0,h.a)(tz,{variables:{repositorySelector:r}});return(0,o.jsx)("div",{style:{flex:1,minHeight:0},children:(0,o.jsx)(eS.g,{queryResult:i,children:function(r){var i=r.repositoryOrError;return(null==i?void 0:i.__typename)==="Repository"&&i.usedSolids?(0,o.jsx)(OpsRootWithData,(0,eb._)((0,ey._)({},e),{name:n,repoAddress:t,usedSolids:i.usedSolids})):null}})})},OpsRootWithData=function(e){var n=e.name,t=e.repoAddress,r=e.usedSolids,i=(0,u.k6)(),l=(0,u.TH)(),d=G().parse(l.search,{ignoreQueryPrefix:!0}),p=d.q,h=d.typeExplorer,m=[{token:"name",values:function(){return r.map(function(e){return e.definition.name})}},{token:"job",values:function(){return flatUniq(r.map(function(e){return e.invocations.filter(function(e){return!e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"pipeline",values:function(){return flatUniq(r.map(function(e){return e.invocations.filter(function(e){return e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"input",values:function(){return flatUniq(r.map(function(e){return e.definition.inputDefinitions.map(function(e){return e.type.displayName})}))}},{token:"output",values:function(){return flatUniq(r.map(function(e){return e.definition.outputDefinitions.map(function(e){return e.type.displayName})}))}}],f=(0,t_.HE)(p||"",m),x=r.filter(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=f[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=function(){var n=i.value;if(("name"===n.token||void 0===n.token)&&!e.definition.name.startsWith(n.value)||("pipeline"===n.token||"job"===n.token)&&!e.invocations.some(function(e){return e.pipeline.name===n.value})||"input"===n.token&&!e.definition.inputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)})||"output"===n.token&&!e.definition.outputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)}))return{v:!1}}();if("object"===(0,tb._)(s))return s.v}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!0}),g=r.find(function(e){return e.definition.name===n}),onSearch=function(e){i.replace({search:"?".concat(G().stringify({q:(0,t_.jP)(e)}))})},onClickOp=function(e){i.replace((0,E.$U)(t,"/ops/".concat(e,"?").concat(G().stringify({q:p}))))};c.useEffect(function(){1!==x.length||g&&x[0]===g||onClickOp(x[0].definition.name),"string"==typeof h&&onSearch((0,eE._)(f).concat([{token:"input",value:h}]))});var j=c.useCallback(function(e){var n=e.pipelineName,r=e.handleID;i.push((0,E.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))},[i,t]);return(0,o.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,o.jsx)(tO.O,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,o.jsxs)(tJ,{children:[(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,o.jsx)(t_.Gf,{values:f,onChange:function(e){return onSearch(e)},suggestionProviders:m,placeholder:"Filter by name or input/output type..."})}),(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsx)(tF,{nonce:window.__webpack_nonce__,children:function(e){var n=e.height,t=e.width;return(0,o.jsx)(OpList,{height:n,width:t,selected:g,onClickOp:onClickOp,items:x.sort(function(e,n){return e.definition.name.localeCompare(n.definition.name)})})}})})]}),second:g?(0,o.jsx)(tw,{children:(0,o.jsx)(UsedSolidDetails,{name:g.definition.name,onClickInvocation:j,repoAddress:t})}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},OpList=function(e){var n=e.items,t=e.selected,r=c.useRef(new tR.t1({defaultHeight:60,fixedWidth:!0})),i=c.useRef(e.width);e.width!==i.current&&(r.current.clearAll(),i.current=e.width);var s=t?n.findIndex(function(e){return e===t}):void 0;return(0,o.jsx)(tD,{children:(0,o.jsx)(t$,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:r.current.rowHeight,scrollToIndex:s,className:"solids-list",rowRenderer:function(n){var t=n.parent,i=n.index,s=n.key,a=n.style,l=e.items[i];return(0,o.jsx)(tI,{cache:r.current,index:i,parent:t,children:(0,o.jsxs)(tL,{style:a,selected:l===e.selected,onClick:function(){return e.onClickOp(l.definition.name)},children:[(0,o.jsx)(tU,{children:l.definition.name}),(0,o.jsx)(tT.z,{definition:l.definition})]})},s)},overscanRowCount:10})})},tD=e4.ZP.div.withConfig({componentId:"sc-747b844f-0"})(OpsRoot_templateObject()),tz=(0,p.Ps)(OpsRoot_templateObject1(),tT.C),tL=e4.ZP.div.withConfig({componentId:"sc-747b844f-1"})(OpsRoot_templateObject2(),function(e){return e.selected?(0,Y.gJ)():(0,Y.v8)()},function(e){return e.selected?(0,Y.yM)():"transparent"},(0,Y.wL)(),(0,Y.$)(),(0,Y.$)(),ns.b.monospace),tU=e4.ZP.div.withConfig({componentId:"sc-747b844f-2"})(OpsRoot_templateObject3()),tJ=e4.ZP.div.withConfig({componentId:"sc-747b844f-3"})(OpsRoot_templateObject4()),WorkspaceOpsRoot=function(e){var n=e.repoAddress;(0,y.Px)();var t=(0,el.Uz)(n);return(0,_.j)("Ops: ".concat(t)),(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(th.h,{repoAddress:n,tab:"ops"}),(0,o.jsx)(OpsRoot,{repoAddress:n})]})},tV=t(73689),tq=t(30894),tM=t(72855),tW=t(24808),tB=t(157),tH=t(30682),tG=t(77376),tK=t(8223),tQ=t(72349),VirtualizedScheduleTable=function(e){var n=e.repoAddress,t=e.schedules,r=e.headerCheckbox,i=e.checkedKeys,s=e.onToggleCheckFactory,a=c.useRef(null),l=(0,ti.MG)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),u=l.getTotalSize(),d=l.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tQ.o,{checkbox:r}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tl.W2,{ref:a,children:(0,o.jsx)(tl.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,tB.g)(n,d.name);return(0,o.jsx)(tQ.i,{name:d.name,repoAddress:n,scheduleState:d.scheduleState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:s(p),height:c,start:u},l)})})})})]})};function WorkspaceSchedulesRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSchedulesRoot_templateObject=function(){return e},e}var WorkspaceSchedulesRoot=function(e){var n=e.repoAddress;(0,y.Px)();var t=(0,el.Uz)(n);(0,_.j)("Schedules: ".concat(t));var r=(0,eC.$)(n),i=(0,z._)((0,nh.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,tK.g)(),p=c.useMemo(function(){return[d]},[d]),m=(0,tG.m)({filters:p}),f=m.button,x=m.activeFiltersJsx,g=(0,h.a)(tZ,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,v=g.loading,S=(0,ed.C4)(g,ed.dT),b=l.trim().toLocaleLowerCase(),O=b.length>0,R=c.useMemo(function(){return(null==j?void 0:j.repositoryOrError.__typename)==="Repository"?j.repositoryOrError.schedules:[]},[j]),P=d.state,A=c.useMemo(function(){return P.size?R.filter(function(e){var n=e.scheduleState;return P.has(n.status)}):R},[R,P]),k=c.useMemo(function(){var e=b.toLocaleLowerCase();return A.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[A,b]),C=k.length>0,E=c.useMemo(function(){return k.filter(function(e){var n=e.scheduleState;return(0,tq.i)(n)})},[k]),N=c.useMemo(function(){return E.map(function(e){var t=e.name;return(0,tB.g)(n,t)})},[E,n]),w=(0,z._)((0,tV.a)(N),2),T=w[0].checkedIds,F=w[1],I=F.onToggleFactory,$=F.onToggleAll,D=c.useMemo(function(){return E.filter(function(e){var t=e.name;return T.has((0,tB.g)(n,t))}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})},[E,T,n]),L=N.length,U=T.size,J=N.length>0;return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(th.h,{repoAddress:n,tab:"schedules",refreshState:S,queryData:g}),(0,o.jsxs)(s.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",gap:12},children:[f,(0,o.jsx)(tt.oi,{icon:"search",value:l,onChange:function(e){u(e.target.value),$(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,o.jsx)(ec.u,{content:"You do not have permission to start or stop these schedules",canShow:C&&!J,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(tW._,{schedules:D,onDone:function(){return S.refetch()}})})]}),x.length?(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:x}):null,v&&!j?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eF.$,{purpose:"page"})}):v&&!j?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:(0,Y.$)()},children:"Loading schedules…"})]})}):k.length?(0,o.jsx)(VirtualizedScheduleTable,{repoAddress:n,schedules:k,headerCheckbox:J?(0,o.jsx)(tH.W,{checkedCount:U,totalCount:L,onToggleAll:$}):void 0,checkedKeys:T,onToggleCheckFactory:I}):O?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching schedules",description:(0,o.jsxs)("div",{children:["No schedules matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(t)})})]})},tZ=(0,p.Ps)(WorkspaceSchedulesRoot_templateObject(),tM.i,J.B),tY=t(67802),tX=t(22478),t0=t(16592),VirtualizedSensorTable=function(e){var n=e.repoAddress,t=e.sensors,r=e.headerCheckbox,i=e.checkedKeys,s=e.onToggleCheckFactory,a=c.useRef(null),l=(0,ti.MG)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),u=l.getTotalSize(),d=l.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t0.K,{checkbox:r}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(tl.W2,{ref:a,children:(0,o.jsx)(tl.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,tX.x)(n,d.name);return(0,o.jsx)(t0.R,{name:d.name,repoAddress:n,sensorState:d.sensorState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:s(p),height:c,start:u},l)})})})})]})};function WorkspaceSensorsRoot_templateObject(){var e=(0,d._)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSensorsRoot_templateObject=function(){return e},e}var WorkspaceSensorsRoot=function(e){var n=e.repoAddress;(0,y.Px)();var t=(0,el.Uz)(n);(0,_.j)("Sensors: ".concat(t));var r=(0,eC.$)(n),i=(0,z._)((0,nh.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],d=(0,tK.g)(),p=c.useMemo(function(){return[d]},[d]),m=(0,tG.m)({filters:p}),f=m.button,x=m.activeFiltersJsx,g=(0,h.a)(t1,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,v=g.loading,S=(0,ed.C4)(g,ed.dT),b=l.trim().toLocaleLowerCase(),O=b.length>0,R=c.useMemo(function(){return(null==j?void 0:j.repositoryOrError.__typename)==="Repository"?j.repositoryOrError.sensors:[]},[j]),P=d.state,A=c.useMemo(function(){return P.size?R.filter(function(e){var n=e.sensorState;return P.has(n.status)}):R},[R,P]),k=c.useMemo(function(){var e=b.toLocaleLowerCase();return A.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[A,b]),C=k.length>0,E=c.useMemo(function(){return k.filter(function(e){var n=e.sensorState;return(0,tq.i)(n)})},[k]),N=c.useMemo(function(){return E.map(function(e){var t=e.name;return(0,tX.x)(n,t)})},[E,n]),w=(0,z._)((0,tV.a)(N),2),T=w[0].checkedIds,F=w[1],I=F.onToggleFactory,$=F.onToggleAll,D=c.useMemo(function(){return E.filter(function(e){var t=e.name;return T.has((0,tX.x)(n,t))}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})},[E,T,n]),L=N.length,U=T.size,J=N.length>0;return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(th.h,{repoAddress:n,tab:"sensors",refreshState:S,queryData:g}),(0,o.jsxs)(s.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",gap:12},children:[f,(0,o.jsx)(tt.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,o.jsx)(ec.u,{content:"You do not have permission to start or stop these sensors",canShow:C&&!J,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(tY.b,{sensors:D,onDone:function(){return S.refetch()}})})]}),x.length?(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:x}):null,v&&!j?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(eF.$,{purpose:"page"})}):v&&!j?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(eF.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:(0,Y.$)()},children:"Loading sensors…"})]})}):k.length?(0,o.jsx)(VirtualizedSensorTable,{repoAddress:n,sensors:k,headerCheckbox:J?(0,o.jsx)(tH.W,{checkedCount:U,totalCount:L,onToggleAll:$}):void 0,checkedKeys:T,onToggleCheckFactory:I}):O?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching sensors",description:(0,o.jsxs)("div",{children:["No sensors matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(t)})})]})},t1=(0,p.Ps)(WorkspaceSensorsRoot_templateObject(),tM.i,J.B),t2=t(31197),RepoRouteContainer=function(){var e=(0,u.UO)().repoPath,n=c.useContext(q.C5),t=(0,t2.g)(e);return t?n.loading?(0,o.jsx)("div",{}):n.allRepos.find(function(e){return e.repository.name===t.name&&e.repositoryLocation.name===t.location})?(0,o.jsxs)(u.rs,{children:[(0,o.jsx)(u.AW,{path:"/locations/:repoPath/resources",exact:!0,children:(0,o.jsx)(ni.g,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/assets",exact:!0,children:(0,o.jsx)(WorkspaceAssetsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,o.jsx)(WorkspaceJobsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,o.jsx)(WorkspaceSchedulesRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,o.jsx)(WorkspaceSensorsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,o.jsx)(WorkspaceGraphsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,o.jsx)(WorkspaceOpsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,o.jsx)(GraphRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,o.jsx)(PipelineRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,o.jsx)(ScheduleRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,o.jsx)(SensorRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/resources/:resourceName",children:(0,o.jsx)(nr.r,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,o.jsx)(AssetGroupRoot,{repoAddress:t,tab:"list"})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,o.jsx)(AssetGroupRoot,{repoAddress:t,tab:"lineage"})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/*",children:(0,o.jsx)(u.l_,{to:(0,E.$U)(t,"/assets")})})]}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Unknown code location",description:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:(0,el.Uz)(t)})}),"  is not loaded in the current workspace."]})})}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Invalid code location path",description:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})})},WorkspaceRoot=function(){return(0,o.jsx)(l.M,{children:(0,o.jsx)(u.rs,{children:(0,o.jsx)(u.AW,{path:"/locations/:repoPath",children:(0,o.jsx)(RepoRouteContainer,{})})})})},t4=WorkspaceRoot}}]);
//# sourceMappingURL=308.11bbf9139bab34b2.js.map